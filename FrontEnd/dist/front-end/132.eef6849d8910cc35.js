"use strict";(self.webpackChunkFrontEnd=self.webpackChunkFrontEnd||[]).push([[132],{132:(E0,Ar,kt)=>{kt.r(Ar),kt.d(Ar,{AdminModule:()=>A0});var ai=kt(6814),Xe=kt(1303),p=kt(5879),su=kt(2181),ou=kt(8180),Xn=kt(2296);function au(s,t){1&s&&(p.TgZ(0,"li")(1,"a",4),p._uU(2,"Dashboard"),p.qZA()())}function ru(s,t){1&s&&(p.TgZ(0,"li")(1,"a",5),p._uU(2,"Users"),p.qZA()())}function lu(s,t){1&s&&(p.TgZ(0,"li")(1,"a",6),p._uU(2,"Posts"),p.qZA()())}function cu(s,t){1&s&&(p.TgZ(0,"li")(1,"a",7),p._uU(2,"Reports"),p.qZA()())}function du(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"li")(1,"button",8),p.NdJ("click",function(){p.CHM(e);const n=p.oxw();return p.KtG(n.logout())}),p._uU(2,"Logout"),p.qZA()()}}let uu=(()=>{class s{constructor(e,i,n){this.router=e,this.activatedRoute=i,this.cdr=n,this.hideSidebar=!1}ngOnInit(){this.router.events.pipe((0,su.h)(e=>e instanceof Xe.m2),(0,ou.q)(1)).subscribe(()=>{this.checkLoginRoute()})}ngAfterViewInit(){this.checkLoginRoute()}checkLoginRoute(){this.hideSidebar=this.router.url.includes("/admin/login"),this.cdr.detectChanges()}logout(){localStorage.removeItem("adminToken"),this.router.navigate(["admin"])}static#t=this.\u0275fac=function(i){return new(i||s)(p.Y36(Xe.F0),p.Y36(Xe.gz),p.Y36(p.sBO))};static#e=this.\u0275cmp=p.Xpm({type:s,selectors:[["app-admin-sidebar"]],decls:10,vars:5,consts:[["id","sidebar"],[1,"sidebar-header"],[1,"list-unstyled","components"],[4,"ngIf"],["routerLink","/admin/dashboard"],["routerLink","/admin/users"],["routerLink","/admin/posts"],["routerLink","/admin/reports"],["mat-raised-button","","color","warn",3,"click"]],template:function(i,n){1&i&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"h1"),p._uU(3,"Admin Panel"),p.qZA()(),p.TgZ(4,"ul",2),p.YNc(5,au,3,0,"li",3),p.YNc(6,ru,3,0,"li",3),p.YNc(7,lu,3,0,"li",3),p.YNc(8,cu,3,0,"li",3),p.YNc(9,du,3,0,"li",3),p.qZA()()),2&i&&(p.xp6(5),p.Q6J("ngIf",!n.hideSidebar),p.xp6(1),p.Q6J("ngIf",!n.hideSidebar),p.xp6(1),p.Q6J("ngIf",!n.hideSidebar),p.xp6(1),p.Q6J("ngIf",!n.hideSidebar),p.xp6(1),p.Q6J("ngIf",!n.hideSidebar))},dependencies:[ai.O5,Xe.rH,Xn.lW],styles:["#sidebar[_ngcontent-%COMP%]{height:100%;width:250px;position:fixed;top:0;left:0;background-color:#000;padding-top:20px}#sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;font-size:1.2em;color:#818181;display:block;text-decoration:none;transition:color .3s}#sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f8f9fa}.sidebar-header[_ngcontent-%COMP%]{text-align:center;padding:20px;background-color:#000}#sidebar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff}"]})}return s})(),hu=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275cmp=p.Xpm({type:s,selectors:[["app-admin"]],decls:5,vars:0,consts:[[1,"wrapper"],["id","sidebar"],["id","content"]],template:function(i,n){1&i&&(p.TgZ(0,"div",0)(1,"div",1),p._UZ(2,"app-admin-sidebar"),p.qZA(),p.TgZ(3,"div",2),p._UZ(4,"router-outlet"),p.qZA()())},dependencies:[Xe.lC,uu],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;height:100vh}.wrapper.hide-sidebar[_ngcontent-%COMP%]{flex-direction:row}#sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:250px;position:fixed;top:0;left:0;background-color:#343a40;padding-top:20px;color:#818181}#sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;font-size:1.2em;color:#818181;display:block;text-decoration:none;transition:color .3s}#sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f8f9fa}.sidebar-header[_ngcontent-%COMP%]{text-align:center;padding:20px;background-color:#343a40}#content[_ngcontent-%COMP%]{width:calc(100% - 250px);margin-left:250px;padding:20px;height:100%;box-sizing:border-box;background-color:#fff}"]})}return s})();var se=kt(6223),pu=kt(6306),fu=kt(8504),gu=kt(108),mu=kt(9862);let Gi=(()=>{class s{constructor(e){this.http=e,this.ApiBaseUrl=`${gu.N.apiUrl}/admin`}login(e){return this.http.post(`${this.ApiBaseUrl}/signin`,e)}getUsers(){return this.http.get(`${this.ApiBaseUrl}/allUsers`)}changeUserStatus(e){return this.http.patch(`${this.ApiBaseUrl}/block`,{userid:e})}changePostStatus(e){return this.http.patch(`${this.ApiBaseUrl}/blockpost`,{postId:e})}getPosts(){return this.http.get(`${this.ApiBaseUrl}/allposts`)}getReports(){return this.http.get(`${this.ApiBaseUrl}/allreports`)}static#t=this.\u0275fac=function(i){return new(i||s)(p.LFG(mu.eN))};static#e=this.\u0275prov=p.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var yu=kt(6501);function vu(s,t){1&s&&(p.TgZ(0,"div")(1,"span",9),p._uU(2,"Username is required"),p.qZA()())}function bu(s,t){1&s&&(p.TgZ(0,"div")(1,"span",9),p._uU(2,"Password is required and must be at least 6 characters"),p.qZA()())}let xu=(()=>{class s{constructor(e,i,n,o){this.fb=e,this.service=i,this.snackBar=n,this.router=o}ngOnInit(){this.loginForm=this.fb.group({email:["",[se.kI.required]],password:["",[se.kI.required,se.kI.minLength(6)]]})}onSubmit(){this.loginForm.valid?this.loginForm.valid&&this.service.login(this.loginForm.value).pipe((0,pu.K)(e=>(console.error("Login failed:",e?.error?.message),this.snackBar.showError(`Login failed....Error:${e?.error?.message||"Unknown error"}`),(0,fu._)(()=>e)))).subscribe(e=>{localStorage.setItem("adminToken",e?.token),this.snackBar.showSuccess("Login Successful"),this.router.navigate(["admin/dashboard"])}):this.loginForm.markAllAsTouched()}static#t=this.\u0275fac=function(i){return new(i||s)(p.Y36(se.qu),p.Y36(Gi),p.Y36(yu.o),p.Y36(Xe.F0))};static#e=this.\u0275cmp=p.Xpm({type:s,selectors:[["app-admin-login"]],decls:16,vars:4,consts:[[1,"login-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","email"],[4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password"],["type","submit",3,"disabled"],[1,"error-text"]],template:function(i,n){1&i&&(p.TgZ(0,"div",0)(1,"h2"),p._uU(2,"Login"),p.qZA(),p.TgZ(3,"form",1),p.NdJ("ngSubmit",function(){return n.onSubmit()}),p.TgZ(4,"div",2)(5,"label",3),p._uU(6,"Username"),p.qZA(),p._UZ(7,"input",4),p.YNc(8,vu,3,0,"div",5),p.qZA(),p.TgZ(9,"div",2)(10,"label",6),p._uU(11,"Password"),p.qZA(),p._UZ(12,"input",7),p.YNc(13,bu,3,0,"div",5),p.qZA(),p.TgZ(14,"button",8),p._uU(15,"Login"),p.qZA()()()),2&i&&(p.xp6(3),p.Q6J("formGroup",n.loginForm),p.xp6(5),p.Q6J("ngIf",n.loginForm.controls.email.invalid&&n.loginForm.controls.email.touched),p.xp6(5),p.Q6J("ngIf",n.loginForm.controls.password.invalid&&n.loginForm.controls.password.touched),p.xp6(1),p.Q6J("disabled",n.loginForm.invalid))},dependencies:[ai.O5,se._Y,se.Fj,se.JJ,se.JL,se.sg,se.u],styles:["[_nghost-%COMP%]{display:flex;height:100vh;color:#fff}.login-container[_ngcontent-%COMP%]{width:400px;margin:auto;padding:20px;color:#fff;background-color:#000;border:1px solid #ccc;border-radius:8px;box-shadow:0 2px 4px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.error-text[_ngcontent-%COMP%]{color:red;font-size:.8em}button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]})}return s})();var et=kt(5313),cn=kt(1476),yt=kt(5195);function Su(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Username"),p.qZA())}function _u(s,t){if(1&s&&(p.TgZ(0,"td",14),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.userName)}}function Au(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Profile Picture"),p.qZA())}function ku(s,t){if(1&s&&p._UZ(0,"img",16),2&s){const e=p.oxw().$implicit;p.Q6J("src",e.profilePicture,p.LSH)}}function Ou(s,t){if(1&s&&(p.TgZ(0,"td",14),p.YNc(1,ku,1,1,"img",15),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Q6J("ngIf",e.profilePicture)}}function Eu(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Full Name"),p.qZA())}function Du(s,t){if(1&s&&(p.TgZ(0,"td",14),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.fullName)}}function Tu(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Followers Count"),p.qZA())}function Cu(s,t){if(1&s&&(p.TgZ(0,"td",14),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.followers.length)}}function Nu(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Following Count"),p.qZA())}function wu(s,t){if(1&s&&(p.TgZ(0,"td",14),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.following.length)}}function Mu(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Action"),p.qZA())}function Ru(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"td",14)(1,"button",17),p.NdJ("click",function(){const o=p.CHM(e).$implicit,a=p.oxw();return p.KtG(a.toggleBlockUser(o))}),p._uU(2),p.qZA()()}if(2&s){const e=t.$implicit;p.xp6(1),p.s9C("color",e.isActive?"warn":"primary"),p.xp6(1),p.hij(" ",e.isActive?"Block":"Unblock"," ")}}function Lu(s,t){1&s&&p._UZ(0,"tr",18)}function Iu(s,t){1&s&&p._UZ(0,"tr",19)}const Pu=function(){return[5,10,25,100]};let Fu=(()=>{class s{constructor(e){this.adminService=e,this.dataSource=new et.by,this.displayedColumns=["userName","profilePicture","fullName","followersCount","followingCount","blockAction"]}ngOnInit(){this.adminService.getUsers().subscribe(e=>{this.dataSource.data=e,this.dataSource.paginator=this.paginator})}toggleBlockUser(e){this.adminService.changeUserStatus(e._id).subscribe(()=>{const i=this.dataSource.data.findIndex(n=>n._id===e._id);-1!==i&&(this.dataSource.data[i].isActive=!this.dataSource.data[i].isActive,this.dataSource._updateChangeSubscription())},i=>{console.error("Error changing user status:",i)})}static#t=this.\u0275fac=function(i){return new(i||s)(p.Y36(Gi))};static#e=this.\u0275cmp=p.Xpm({type:s,selectors:[["app-admin-users"]],viewQuery:function(i,n){if(1&i&&p.Gf(cn.NW,5),2&i){let o;p.iGM(o=p.CRH())&&(n.paginator=o.first)}},decls:29,vars:5,consts:[[2,"min-height","500px"],["matSort","","mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","userName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","profilePicture"],["matColumnDef","fullName"],["matColumnDef","followersCount"],["matColumnDef","followingCount"],["matColumnDef","blockAction"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["alt","Profile Picture","style","width: 80px; height: 80px; border-radius: 50%; object-fit: cover;",3,"src",4,"ngIf"],["alt","Profile Picture",2,"width","80px","height","80px","border-radius","50%","object-fit","cover",3,"src"],["mat-raised-button","",3,"color","click"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(p.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"h1"),p._uU(3,"User Listing"),p.qZA()(),p.TgZ(4,"mat-card-content")(5,"table",1),p.ynx(6,2),p.YNc(7,Su,2,0,"th",3),p.YNc(8,_u,2,1,"td",4),p.BQk(),p.ynx(9,5),p.YNc(10,Au,2,0,"th",3),p.YNc(11,Ou,2,1,"td",4),p.BQk(),p.ynx(12,6),p.YNc(13,Eu,2,0,"th",3),p.YNc(14,Du,2,1,"td",4),p.BQk(),p.ynx(15,7),p.YNc(16,Tu,2,0,"th",3),p.YNc(17,Cu,2,1,"td",4),p.BQk(),p.ynx(18,8),p.YNc(19,Nu,2,0,"th",3),p.YNc(20,wu,2,1,"td",4),p.BQk(),p.ynx(21,9),p.YNc(22,Mu,2,0,"th",3),p.YNc(23,Ru,3,2,"td",4),p.BQk(),p.YNc(24,Lu,1,0,"tr",10),p.YNc(25,Iu,1,0,"tr",11),p.qZA()(),p._UZ(26,"br"),p.TgZ(27,"mat-card-footer"),p._UZ(28,"mat-paginator",12),p.qZA()()),2&i&&(p.xp6(5),p.Q6J("dataSource",n.dataSource),p.xp6(19),p.Q6J("matHeaderRowDef",n.displayedColumns),p.xp6(1),p.Q6J("matRowDefColumns",n.displayedColumns),p.xp6(3),p.Q6J("pageSizeOptions",p.DdM(4,Pu)))},dependencies:[ai.O5,Xn.lW,yt.a8,yt.dn,yt.rt,yt.dk,et.BZ,et.fO,et.as,et.w1,et.Dz,et.nj,et.ge,et.ev,et.XQ,et.Gk,cn.NW]})}return s})();var kr=kt(5683),Bu=kt(8525),Gu=kt(3680);class Kn{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var n;const o=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),a=this._encode(i?this.floor(t):this.ceil(t)),r=this._encode(i?this.ceil(e):this.floor(e));if(r<a)return[];const l=[];for(let c=a;c<=r;c++){const d=this._decode(c);l.push(d)}return o?.(),l}}class ue extends Kn{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let n,i=0;const{snapTo:o="start"}=e??{};if("string"==typeof o){const l=i;n=(c,d)=>(i=this.getOffset("start"===o?c:d,t),()=>i=l)}else"number"==typeof o?i=this.getOffset(new Date(o),t):o instanceof Date&&(i=this.getOffset(o,t));return new Kn(l=>{const c=this._encode(l);return Math.floor((c-i)/t)},l=>this._decode(l*t+i),n)}}const Or=new ue(function Yu(s){return s.getTime()},function Uu(s){return new Date(s)});new Date(0).getFullYear();const he=6e4,Ke=60*he,Si=24*Ke,$n=7*Si,Zn=30*Si,js=365*Si,Er=(new Date).getTimezoneOffset()*he,Dr=new ue(function ju(s){return Math.floor((s.getTime()-Er)/1e3)},function zu(s){return new Date(Er+1e3*s)}),Tr=(new Date).getTimezoneOffset()*he,Cr=new ue(function Wu(s){return Math.floor((s.getTime()-Tr)/he)},function Vu(s){return new Date(Tr+s*he)}),Nr=(new Date).getTimezoneOffset()*he,wr=new ue(function Hu(s){return Math.floor((s.getTime()-Nr)/Ke)},function Xu(s){return new Date(Nr+s*Ke)}),Mr=new ue(function Ku(s){const t=6e4*s.getTimezoneOffset();return Math.floor((s.getTime()-t)/Si)},function $u(s){const t=new Date(1970,0,1);return t.setDate(t.getDate()+s),t});function Ui(s){const t=new Date(2023,0,1+s).getTime();return new ue(function e(n){const o=n.getTime();return Math.floor((o-t)/$n)},function i(n){const o=new Date(t);return o.setDate(o.getDate()+7*n),o})}const Rr=Ui(0);Ui(1),Ui(2),Ui(3),Ui(4),Ui(5),Ui(6);const Lr=new ue(function ih(s){return 12*s.getFullYear()+s.getMonth()},function nh(s){const t=Math.floor(s/12);return new Date(t,s-12*t,1)}),Ir=new ue(function sh(s){return s.getFullYear()},function oh(s){const t=new Date;return t.setFullYear(s),t.setMonth(0,1),t.setHours(0,0,0,0),t});function pe(s,t){var e={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(s);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(s,i[n])&&(e[i[n]]=s[i[n]])}return e}function v(s,t,e,i){var a,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(s,t,e,i);else for(var r=s.length-1;r>=0;r--)(a=s[r])&&(o=(n<3?a(o):n>3?a(t,e,o):a(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o}function b(s,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,t)}function R(s,t,e,i){return new(e||(e=Promise))(function(o,a){function r(d){try{c(i.next(d))}catch(u){a(u)}}function l(d){try{c(i.throw(d))}catch(u){a(u)}}function c(d){d.done?o(d.value):function n(o){return o instanceof e?o:new e(function(a){a(o)})}(d.value).then(r,l)}c((i=i.apply(s,t||[])).next())})}new ue(function ah(s){return Math.floor(s.getTime()/he)},function rh(s){return new Date(s*he)}),new ue(function ch(s){return Math.floor(s.getTime()/Ke)},function dh(s){return new Date(s*Ke)}),new ue(function hh(s){return Math.floor(s.getTime()/Si)},function ph(s){const t=new Date(0);return t.setUTCDate(t.getUTCDate()+s),t.setUTCHours(0,0,0,0),t}),new ue(function gh(s){return 12*s.getUTCFullYear()+s.getUTCMonth()},function mh(s){const t=Math.floor(s/12);return new Date(Date.UTC(t,s-12*t,1))}),new ue(function vh(s){return s.getUTCFullYear()},function bh(s){const t=new Date;return t.setUTCFullYear(s),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t}),"function"==typeof SuppressedError&&SuppressedError;const dn={isEnterprise:!1};class Uo{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const $e=[];function Ze(s){const t=$e.find(e=>s.type===e.type&&s.optionsKey===e.optionsKey&&s.identifier===e.identifier);if(t){if("enterprise"===s.packageType&&"community"===t.packageType){const e=$e.indexOf(t);$e.splice(e,1,s)}}else $e.push(s)}function zs(){return $e.some(s=>"enterprise"===s.packageType)}const jo=new Map;function Pr(s,t){jo.set(s,t)}function Ne(s){const{length:t}=s;if(0===t)return;let e=1/0,i=-1/0;for(let o=0;o<t;o++){let a=s[o];a instanceof Date&&(a=a.getTime()),"number"==typeof a&&(a<e&&(e=a),a>i&&(i=a))}const n=[e,i];return n.some(o=>!isFinite(o))?void 0:n}function qn(s,t,e){var i;let n=!1;return s.length>2&&(s=null!==(i=Ne(s))&&void 0!==i?i:[NaN,NaN]),isNaN(t)||(n||(n=t>s[0]),s=[t,s[1]]),isNaN(e)||(n||(n=e<s[1]),s=[s[0],e]),s[0]>s[1]&&(s=[]),{extent:s,clipped:n}}function Jn(s,t){if(null==s||null==t||s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(Array.isArray(s[e])&&Array.isArray(t[e])){if(!Jn(s[e],t[e]))return!1}else if(s[e]!==t[e])return!1;return!0}function Ws(s){return typeof s>"u"?[]:Array.isArray(s)?s:[s]}const Br={};function Gr(s,t){Br[t]||(s(),Br[t]=!0)}const G={log(...s){console.log(...s)},warn(s,...t){console.warn(`AG Charts - ${s}`,...t)},error(s,...t){"object"==typeof s?console.error("AG Charts error",s,...t):console.error(`AG Charts - ${s}`,...t)},table(...s){console.table(...s)},warnOnce(s,...t){Gr(()=>G.warn(s,...t),`Logger.warn: ${s}`)},errorOnce(s,...t){Gr(()=>G.error(s,...t),`Logger.warn: ${s}`)}};function zo(s){const t=typeof window<"u"?window:void 0;return t?.[s]}let Yr=Date.now();const Mt={create:(...s)=>(...t)=>{Mt.check(...s)&&("function"==typeof t[0]&&(t=Ws(t[0]())),(()=>{const s=Date.now()-Yr;if(s>2e3){const t=(Math.floor(s/100)/10).toFixed(1);G.log(`**** ${t}s since last log message ****`)}Yr=Date.now()})(),G.log(...t))},check:(...s)=>(0===s.length&&s.push(!0),Ws(zo("agChartsDebug")).some(e=>s.includes(e)))},Wo=Symbol("BREAK"),Qn="__decorator_config";function ts(s,t){return(e,i)=>{const n=i.toString(),o=`__${n}`,{getters:a,setters:r}=function Ah(s,t,e,i){null==Object.getOwnPropertyDescriptor(s,Qn)&&Object.defineProperty(s,Qn,{value:{}});const n=s[Qn];if(null!=n[e])return n[e];n[e]={setters:[],getters:[]};const o=Object.getOwnPropertyDescriptor(s,t),a=o?.set,r=o?.get;return Object.defineProperty(s,t,{set:function(d){var u,h;const f=null!==(h=null===(u=n[e])||void 0===u?void 0:u.setters)&&void 0!==h?h:[];let g;f.some(m=>m.length>2)&&(g=r?r.call(this):this[i]);for(const m of f)if((d=m(this,t,d,g))===Wo)return;a?a.call(this,d):this[i]=d},get:function(){var d,u;let h=r?r.call(this):this[i];for(const f of null!==(u=null===(d=n[e])||void 0===d?void 0:d.getters)&&void 0!==u?u:[])if(h=f(this,t,h),h===Wo)return;return h},enumerable:!0,configurable:!1}),n[e]}(e,i,n,o);r.push(s),t&&a.unshift(t)}}function Vo(s){return typeof s<"u"&&Qn in s}function Ho(s){const t=new Set;for(;Vo(s);)t.add(s?.[Qn]),s=Object.getPrototypeOf(s);return Array.from(t).flatMap(e=>Object.keys(e))}const es="class-instance";function qe(s,t){const e=Se(s),i=Se(t);if("array"===i){const c=t;return"array"!==e||s.length!==c.length||c.some((d,u)=>null!=qe(s?.[u],d))?[...c]:null}if("primitive"===i)return"primitive"!==e?Object.assign({},t):s!==t?t:null;const n=s||{},o=t||{},a=new Set([...Object.keys(n),...Object.keys(o)]);let r=0;const l={};for(const c of a){if(n[c]===o[c])continue;const d=g=>{l[c]=g,r++},u=Se(n[c]),h=Se(o[c]);if(u!==h){d(o[c]);continue}if("primitive"===h||null===h){d(o[c]);continue}if("array"===h&&n[c].length!==o[c].length){d(o[c]);continue}if(h===es){d(o[c]);continue}if("function"===h&&n[c]!==o[c]){d(o[c]);continue}const f=qe(n[c],o[c]);null!==f&&d(f)}return 0===r?null:l}const xe=Symbol("<delete-property>"),Ur=Symbol("<unspecified-property>");function Et(s,t){var e;const i=null!==(e=t?.avoidDeepClone)&&void 0!==e?e:[];if(s.map(r=>Se(r)).some(r=>"array"===r)){const r=s[s.length-1];return Array.isArray(r)?r.map(l=>{const c=Se(l);return"array"===c?Et([[],l],t):"object"===c?Et([{},l],t):l}):r}const o={},a=new Set(s.map(r=>null!=r?Object.keys(r):[]).reduce((r,l)=>r.concat(l),[]));for(const r of a){const l=s.map(h=>null!=h&&"object"==typeof h&&r in h?h[r]:Ur).filter(h=>h!==Ur);if(0===l.length)continue;const c=l[l.length-1];if(c===xe)continue;const d=l.map(h=>Se(h)),u=d[0];o[r]=d.some(h=>h!==u)?c:"array"!==u&&"object"!==u||i.includes(r)?"array"===u?[...c]:c:Et(l,t)}return o}function un(s,t,e={}){var i,n,o;const{path:a,matcherPath:r=(a?a.replace(/(\[[0-9+]+])/i,"[]"):void 0),skip:l=[],constructors:c={},constructedArrays:d=new WeakMap,allowedTypes:u={},idx:h}=e;if(null==s)throw new Error(`AG Charts - target is uninitialised: ${a??"<root>"}`);if(null==t)return s;const f=s;null!=h&&"_declarationOrder"in f&&(f._declarationOrder=h);const g=Se(s);for(const m in t){const y=`${r?r+".":""}${m}`;if(l.indexOf(y)>=0)continue;const x=t[m],A=`${a?a+".":""}${m}`,S=f.constructor,k=f[m];let E=null!==(i=c[y])&&void 0!==i?i:c[m];try{const O=Se(k),D=Se(x);if(g===es&&!(m in s)&&!Object.prototype.hasOwnProperty.call(f,m)){G.warn(`unable to set [${A}] in ${S?.name} - property is unknown`);continue}const T=null!==(n=u[y])&&void 0!==n?n:[O];if((O!==es||"object"!==D)&&null!=O&&null!=D&&!T.includes(D)){G.warn(`unable to set [${A}] in ${S?.name} - can't apply type of [${D}], allowed types are: [${T}]`);continue}"array"===D?(E=null!==(o=E??d.get(k))&&void 0!==o?o:c[`${y}[]`],f[m]=null!=E?x.map((C,N)=>un(new E,C,Object.assign(Object.assign({},e),{path:A,matcherPath:y+"[]",idx:N}))):x):D===es?f[m]=x:"object"===D?null!=k?un(k,x,Object.assign(Object.assign({},e),{path:A,matcherPath:y,idx:void 0})):f[m]=null!=E?un(new E,x,Object.assign(Object.assign({},e),{path:A,matcherPath:y,idx:void 0})):x:f[m]=x}catch(O){G.warn(`unable to set [${A}] in [${S?.name}]; nested error is: ${O.message}`)}}return s}function ji(s,t,e,...i){const n=Se(s),{skip:o=[]}=e??{};if("array"===n)return t(n,s,...i),void s.forEach((a,r)=>{ji(a,t,e,...(i??[]).map(l=>l?.[r]))});if("object"===n){t(n,s,...i);for(const a in s){if(o.includes(a))continue;const r=s[a],l=i?.map(d=>d?.[a]),c=Se(r);("object"===c||"array"===c)&&ji(r,t,e,...l)}}}const Eh=typeof window<"u";function Se(s){return null==s?null:Eh&&s instanceof HTMLElement?"primitive":Array.isArray(s)?"array":s instanceof Date?"primitive":"object"==typeof s&&s.constructor===Object?"object":"function"==typeof s?"function":"object"==typeof s&&null!=s.constructor?es:"primitive"}const Je=2*Math.PI;function $t(s){return s%=Je,(s+=Je)%Je}function Vs(s){return(s%=Je)<-Math.PI?s+=Je:s>=Math.PI&&(s-=Je),s}function fe(s){return s/180*Math.PI}function Xo(s,t,e){return Math.max(t,Math.min(e,s))}class hn{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(i=>this[i]!==t[i])||(this.cache={},this.cacheProps.forEach(i=>this.cache[i]=this[i]),0))}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach(n=>{void 0===i.get(n)&&i.set(n,e.push(n)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((i,n)=>n%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(i=>i===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=Xo(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=Xo(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=Xo(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,n=this._paddingOuter,[o,a]=this.range,r=a-o,l=r/Math.max(1,t+2*n-i),c=e?Math.floor(l):l,u=o+(r-c*(t-i))/2,h=e?Math.round(u):u,f=c*(1-i),g=e?Math.round(f):f,m=l*(1-i),y=[];for(let x=0;x<t;x++)y.push(h+c*x);this._bandwidth=g,this._rawBandwidth=m,this.ordinalRange=y}}function we(s,t,e){return Math.min(e,Math.max(s,t))}function is(s){return Math.sign(s)<0||Object.is(s,-0)}class X{constructor(t,e,i,n=1){this.r=we(0,t||0,1),this.g=we(0,e||0,1),this.b=we(0,i||0,1),this.a=we(0,n||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!X.parseHex(t):t.indexOf("rgb")>=0?!!X.stringToRgba(t):!!X.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return X.fromHexString(t);const e=X.nameToHex[t.toLowerCase()];if(e)return X.fromHexString(e);if(t.indexOf("rgb")>=0)return X.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return X.fromString(t)}catch{return G.warnOnce(`invalid color string: '${t}'.`),X.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(i=>parseInt(i,16)).map(i=>i+16*i)}if(e?.length>=3&&e.every(i=>i>=0))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=X.parseHex(t);if(e){const[i,n,o,a]=e;return new X(i/255,n/255,o/255,a/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let r=0;r<t.length;r++){const l=t[r];if(e||"("!==l){if(")"===l){i=r;break}}else e=r}const n=e&&i&&t.substring(e+1,i);if(!n)return;const o=n.split(","),a=[];for(let r=0;r<o.length;r++){const l=o[r];let c=parseFloat(l);if(isNaN(c))return;l.indexOf("%")>=0?(c=Math.max(0,Math.min(100,c)),c/=100):3===r?c=Math.max(0,Math.min(1,c)):(c=Math.max(0,Math.min(255,c)),c/=255),a.push(c)}return a}static fromRgbaString(t){const e=X.stringToRgba(t);if(e){if(3===e.length)return new X(e[0],e[1],e[2]);if(4===e.length)return new X(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new X(t[0],t[1],t[2],t[3]);if(3===t.length)return new X(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i,n=1){const o=X.HSBtoRGB(t,e,i);return new X(o[0],o[1],o[2],n)}static fromHSL(t,e,i,n=1){const o=X.HSLtoRGB(t,e,i);return new X(o[0],o[1],o[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+X.padHex(Math.round(255*this.r).toString(16))+X.padHex(Math.round(255*this.g).toString(16))+X.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=X.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return X.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSL(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i),a=(o+n)/2;let r,l;if(o===n)r=NaN,l=0;else{const c=o-n;l=a>.5?c/(2-o-n):c/(o+n),r=o===t?(e-i)/c+(e<i?6:0):o===e?(i-t)/c+2:(t-e)/c+4,r*=60}return[r,l,a]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const n=i<.5?i*(1+e):i+e-i*e,o=2*i-n;function a(d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?o+6*(n-o)*d:d<.5?n:d<2/3?o+(n-o)*(2/3-d)*6:o}return[a(t/360+1/3),a(t/360),a(t/360-1/3)]}static RGBtoHSB(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i);let r=NaN;if(n!==o){const l=o-n,c=(o-t)/l,d=(o-e)/l,u=(o-i)/l;r=t===o?u-d:e===o?2+c-u:4+d-c,r/=6,r<0&&(r+=1)}return[360*r,0!==o?(o-n)/o:0,o]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,o=0,a=0;if(0===e)n=o=a=i;else{const r=6*(t-Math.floor(t)),l=r-Math.floor(r),c=i*(1-e),d=i*(1-e*l),u=i*(1-e*(1-l));switch(r>>0){case 0:n=i,o=u,a=c;break;case 1:n=d,o=i,a=c;break;case 2:n=c,o=i,a=u;break;case 3:n=c,o=d,a=i;break;case 4:n=u,o=c,a=i;break;case 5:n=i,o=c,a=d}}return[n,o,a]}derive(t,e,i,n){const o=X.RGBtoHSB(this.r,this.g,this.b);let a=o[2];0==a&&i>1&&(a=.05);const r=((o[0]+t)%360+360)%360,l=Math.max(Math.min(o[1]*e,1),0);a=Math.max(Math.min(a*i,1),0);const c=Math.max(Math.min(this.a*n,1),0),d=X.HSBtoRGB(r,l,a);return d.push(c),X.fromArray(d)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=X.tryParseFromString(t),n=X.tryParseFromString(e);return o=>{const a=(l,c)=>l*(1-o)+c*o;return new X(a(i.r,n.r),a(i.g,n.g),a(i.b,n.b),a(i.a,n.a)).toString()}}}function _(s){return ts((t,e,i)=>{var n,o,a;if(s(i,{target:t}))return i;const r=e.toString().replace(/^_*/,"");let l=null!==(o=null===(n=t.constructor)||void 0===n?void 0:n.className)&&void 0!==o?o:null===(a=t.constructor)||void 0===a?void 0:a.name;l?.length<3&&(l=null);const c=l?`of [${l}] `:"";return G.warn(s.message?`Property [${r}] ${c}cannot be set to [${jr(i)}]; ${s.message}, ignoring.`:`Property [${r}] ${c}cannot be set to [${jr(i)}], ignoring.`),Wo})}function jr(s){return"number"==typeof s&&isNaN(s)?"NaN":s===1/0?"Infinity":s===-1/0?"-Infinity":JSON.stringify(s)}function U(s,t){return s.message=t,s}X.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const vt=(s,t,e)=>void 0===s||e(s,t),ri=(s,t)=>U((e,i)=>Array.isArray(e)&&(!s||e.length===s)&&(!t||e.every(n=>t(n,i))),"expecting an Array"),Xs=s=>U((t,e)=>vt(t,e,ri(s)),"expecting an optional Array"),Qe=(U(s=>Array.isArray(s)&&s.length>0,"expecting a non-empty Array"),(...s)=>U((t,e)=>s.every(i=>i(t,e)),s.map(t=>t.message).filter(t=>null!=t).join(" AND "))),Ks=s=>null!=s&&!isNaN(s),ns=s=>U((t,e)=>!Ks(t)||!Ks(e.target[s])||t<e.target[s],`expected to be less than ${s}`),pn=s=>U((t,e)=>!Ks(t)||!Ks(e.target[s])||t>e.target[s],`expected to be greater than ${s}`),Vr=U(s=>"function"==typeof s,"expecting a Function"),ti=U((s,t)=>vt(s,t,Vr),"expecting an optional Function"),ot=U(s=>!0===s||!1===s,"expecting a Boolean"),Me=U((s,t)=>vt(s,t,ot),"expecting an optional Boolean"),Qt=U(s=>"string"==typeof s,"expecting a String"),j=U((s,t)=>vt(s,t,Qt),"expecting an optional String"),qo=U(s=>s instanceof Date&&!isNaN(+s),"expecting a Date object"),Hr=U((s,t)=>vt(s,t,qo),"expecting an optional Date"),Xr=(U(ri(void 0,qo),"expecting an Array of Date objects"),I(0)),Jo=((...s)=>U((t,e)=>s.some(i=>i(t,e)),s.map(t=>t.message).filter(t=>null!=t).join(" OR ")))(Hr,U((s,t)=>vt(s,t,Xr),"expecting an optional number")),$s="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",_e=U(s=>"string"==typeof s&&X.validColorString(s),`expecting a color String. ${$s}`),Ot=U((s,t)=>vt(s,t,_e),`expecting an optional color String. ${$s}`),fn=U(ri(void 0,_e),`expecting an Array of color strings. ${$s}`),ss=U((s,t)=>vt(s,t,fn),`expecting an optional Array of color strings. ${$s}`);function Qo(s="expecting a finite Number",t,e){let i=s;return void 0!==t&&void 0!==e?i+=` between ${t} and ${e} inclusive`:void 0!==t?i+=` greater than or equal to ${t}`:void 0!==e&&(i+=` less than or equal to ${e}`),i}function I(s,t){return U(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===s||i>=s)&&(void 0===t||i<=t),Qo(void 0,s,t))}function J(s,t){return U((i,n)=>vt(i,n,I(s,t)),Qo("expecting an optional finite Number",s,t))}function li(s,t){return U(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===s||i>=s)&&(void 0===t||i<=t)),Qo(void 0,s,t))}const $r=U(ri(void 0,I()),"expecting an Array of numbers"),Zs=U((s,t)=>vt(s,t,$r),"expecting an optional Array of numbers"),ta=U(ri(void 0,Qt),"expecting an Array of strings");function qs(...s){return U(e=>"string"==typeof e&&s.indexOf(e)>=0,`expecting one of: ${s.join(", ")}`)}U((s,t)=>vt(s,t,ta),"expecting an optional Array of strings");const Zr=U(ri(void 0,ot),"expecting an Array of boolean values"),Lh=(U((s,t)=>vt(s,t,Zr),"expecting an optional Array of boolean values"),["normal","bold","bolder","lighter"]),qr=U(s=>"normal"===s||"italic"===s||"oblique"===s,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),_i=U((s,t)=>vt(s,t,qr),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),Jr=U(s=>Lh.includes(s)||"number"==typeof s&&isFinite(s),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Ai=U((s,t)=>vt(s,t,Jr),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Qr=U(ri(void 0,I(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),ki=U((s,t)=>vt(s,t,Qr),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Ih=["butt","round","square"],ea=U(s=>Ih.includes(s),"expecting a line cap keyword such as 'butt', 'round' or 'square'"),Fh=(U((s,t)=>vt(s,t,ea),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'"),["round","bevel","miter"]),tl=U(s=>Fh.includes(s),"expecting a line join keyword such as 'round', 'bevel' or 'miter'"),Gh=(U((s,t)=>vt(s,t,tl),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'"),["top","right","bottom","left"]),ia=U(s=>Gh.includes(s),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),Yh=["exact","nearest"],na=U(s=>"number"==typeof s&&Number.isFinite(s)||Yh.includes(s),"expecting an interaction range of 'exact', 'nearest' or a number"),Uh=["never","always","hyphenate","on-space"],sa=U(s=>Uh.includes(s),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', or 'on-space'"),jh=["ellipsis","hide"],Wh=(U(s=>jh.includes(s),"expecting an overflow strategy keyword such as 'ellipsis', or 'hide'"),["left","center","right"]),Hh=(U(s=>Wh.includes(s),"expecting a text align keyword such as 'left', 'center', or 'right'"),["top","middle","bottom"]),Kh=(U(s=>Hh.includes(s),"expecting a text align keyword such as 'top', 'middle', or 'bottom'"),["horizontal","vertical"]),oa=U(s=>Kh.includes(s),"expecting a direction keyword such as 'horizontal' or 'vertical'");U((s,t)=>vt(s,t,oa),"expecting an optional direction keyword such as 'horizontal' or 'vertical'");var P=function(s){return s.X="x",s.Y="y",s}(P||{}),M=function(s){return s[s.NONE=0]="NONE",s[s.TRIVIAL=1]="TRIVIAL",s[s.MINOR=2]="MINOR",s[s.MAJOR=3]="MAJOR",s}(M||{});const qh=function Zh(){try{return new Function("return true"),!0}catch{return!1}}();function B(s){const{changeCb:t,convertor:e}=s??{};return function(i,n){const o=`__${n}`;i[n]||(qh&&null==t&&null==e?function Jh(s,t,e,i){const{redraw:n=M.TRIVIAL,type:o="normal",checkDirtyOnAssignment:a=!1}=i??{},r=new Function("value",`\n        const oldValue = this.${e};\n        if (value !== oldValue) {\n            this.${e} = value;\n            ${"normal"===o?`this.markDirty(this, ${n});`:""}\n            ${"transform"===o?`this.markDirtyTransform(${n});`:""}\n            ${"path"===o?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}\n            ${"font"===o?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}\n        }\n        ${a?`if (value != null && value._dirty > ${M.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${e};`);Object.defineProperty(s,t,{set:r,get:l,enumerable:!0,configurable:!0})}(i,n,o,s):function Qh(s,t,e,i){const{redraw:n=M.TRIVIAL,type:o="normal",changeCb:a,convertor:r,checkDirtyOnAssignment:l=!1}=i??{};Object.defineProperty(s,t,{set:function(u){const h=this[e];(u=r?r(u):u)!==h&&(this[e]=u,"normal"===o&&this.markDirty(this,n),"transform"===o&&this.markDirtyTransform(n),"path"===o&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,n)),"font"===o&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,n)),a&&a(this)),l&&null!=u&&u._dirty>M.NONE&&this.markDirty(u,u._dirty)},get:function(){return this[e]},enumerable:!0,configurable:!0})}(i,n,o,s))}}class aa{constructor(){this._dirty=M.MAJOR}markDirty(t,e=M.TRIVIAL){this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=M.NONE}isDirty(){return this._dirty>M.NONE}}const Js={};function ci(s){var t;const e=s.constructor,i=Object.prototype.hasOwnProperty.call(e,"className")?e.className:e.name;if(!i)throw new Error(`The ${e} is missing the 'className' property.`);const n=(null!==(t=Js[i])&&void 0!==t?t:0)+1;return Js[i]=n,i+"-"+n}class H{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}clone(){const{x:t,y:e,width:i,height:n}=this;return new H(t,e,i,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(t){if(this.containsPoint(t.x,t.y))return 0;const e=t.x-Math.max(this.x,Math.min(t.x,this.x+this.width)),i=t.y-Math.max(this.y,Math.min(t.y,this.y+this.height));return e*e+i*i}static nearestBox(t,e){return function il(s,t,e=1/0){const i={nearest:void 0,distanceSquared:e};for(const n of t){const o=n.distanceSquared(s);if(0===o)return{nearest:n,distanceSquared:0};o<i.distanceSquared&&(i.nearest=n,i.distanceSquared=o)}return i}(t,e)}shrink(t,e){const i=(n,o)=>{switch(n){case"top":this.y+=o;case"bottom":this.height-=o;break;case"left":this.x+=o;case"right":this.width-=o;break;case"vertical":this.y+=o,this.height-=2*o;break;case"horizontal":this.x+=o,this.width-=2*o;break;case void 0:this.x+=o,this.width-=2*o,this.y+=o,this.height-=2*o}};return"number"==typeof t?i(e,t):Object.entries(t).forEach(([n,o])=>i(n,o)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const i=Object.assign({},t);for(const n in i)i[n]*=-1;this.shrink(i)}return this}static merge(t){let e=1/0,i=1/0,n=-1/0,o=-1/0;return t.forEach(a=>{a.x<e&&(e=a.x),a.y<i&&(i=a.y),a.x+a.width>n&&(n=a.x+a.width),a.y+a.height>o&&(o=a.y+a.height)}),new H(e,i,n-e,o-i)}}H.zero=new H(0,0,0,0);class Bt{get e(){return[...this.elements]}constructor(t=[1,0,0,1,0,0]){this.elements=t}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const o=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],r=t[1]*e[2]+t[3]*e[3],l=t[0]*e[4]+t[2]*e[5]+t[4],c=t[1]*e[4]+t[3]*e[5]+t[5];(i=i??t)[0]=t[0]*e[0]+t[2]*e[1],i[1]=o,i[2]=a,i[3]=r,i[4]=l,i[5]=c}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new Bt(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const a=t[4],r=t[5],l=1/(e*o-i*n);return e*=l,i*=l,n*=l,o*=l,new Bt([o,-i,-n,e,n*r-o*a,i*a-e*r])}inverseTo(t){const e=this.elements;let i=e[0],n=e[1],o=e[2],a=e[3];const r=e[4],l=e[5],c=1/(i*a-n*o);return i*=c,n*=c,o*=c,a*=c,t.setElements([a,-n,-o,i,o*l-a*r,n*r-i*l]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const a=t[4],r=t[5],l=1/(e*o-i*n);return e*=l,i*=l,n*=l,o*=l,t[0]=o,t[1]=-i,t[2]=-n,t[3]=e,t[4]=n*r-o*a,t[5]=i*a-e*r,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,n=i[0],o=i[1],a=i[2],r=i[3],l=.5*t.width,c=.5*t.height,d=t.x+l,u=t.y+c,h=Math.abs(l*n)+Math.abs(c*a),f=Math.abs(l*o)+Math.abs(c*r);return e||(e=new H(0,0,0,0)),e.x=d*n+u*a+i[4]-h,e.y=d*o+u*r+i[5]-f,e.width=h+h,e.height=f+f,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return Bt.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,n,o,a,r){const[l,c]=[0,0],d=e,u=i;let h,f;1===d&&1===u?(h=0,f=0):(h=null==r?.scalingCenterX?l:r?.scalingCenterX,f=null==r?.scalingCenterY?c:r?.scalingCenterY);const g=n,m=Math.cos(g),y=Math.sin(g);let x,A;0===g?(x=0,A=0):(x=null==r?.rotationCenterX?l:r?.rotationCenterX,A=null==r?.rotationCenterY?c:r?.rotationCenterY);const E=h*(1-d)-x,O=f*(1-u)-A;return t.setElements([m*d,y*d,-y*u,m*u,m*E-y*O+x+o,y*E+m*O+A+a]),t}static fromContext(t){const e=t.getTransform();return new Bt([e.a,e.b,e.c,e.d,e.e,e.f])}}Bt.instance=new Bt;var te=function(s){return s[s.All=0]="All",s[s.None=1]="None",s}(te||{});const nl=s=>{s.parent&&(s.parent.dirtyZIndex=!0),s.zIndexChanged()};class Tt extends aa{get datum(){var t,e;return null!==(t=this._datum)&&void 0!==t?t:null===(e=this._parent)||void 0===e?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=t?.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;const t=[...this._children];for(const e of this._virtualChildren)t.push(...e.children);return t}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,e){const i=e??Object.keys(t);for(const n of i)this[n]=t[n];return this}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,M.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,M.MAJOR),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=Bt.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,M.MAJOR)}constructor({isVirtual:t,tag:e}={}){super(),this.serialNumber=Tt._nextSerialNumber++,this.id=ci(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new Bt,this.inverseMatrix=new Bt,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=te.All,this.isVirtual=t??!1,this.tag=e??NaN}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===te.None||!this.containsPoint(t,e))return;const n=this.children;if(n.length>1e3)for(let o=n.length-1;o>=0;o--){const a=n[o],l=(null===(i=a.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?a.pickNode(t,e):void 0;if(l)return l}else if(n.length)for(let o=n.length-1;o>=0;o--){const a=n[o].pickNode(t,e);if(a)return a}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const n=i.findNodes(t);n&&e.push(...n)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=Bt.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:n,translationX:o,translationY:a,scalingCenterX:r,scalingCenterY:l,rotationCenterX:c,rotationCenterY:d}=this;Bt.updateTransformMatrix(t,e,i,n,o,a,{scalingCenterX:r,scalingCenterY:l,rotationCenterX:c,rotationCenterY:d}),t.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=M.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:n,width:o,height:a}=e,r=this.transformPoint(i,n),l=this.transformPoint(i+o,n+a);t.clearRect(r.x,r.y,l.x-r.x,l.y-r.y)}markDirty(t,e=M.TRIVIAL,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=t??{};if(this._dirty!==M.NONE||e){if(this._dirty=M.NONE,!1!==i)for(const n of this._virtualChildren)n.markClean({force:e});if(!0===i)for(const n of this._children)n.markClean({force:e})}}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=M.NONE||this.dirtyTransform?1:0,i=this.visible?1:0;const n=o=>{const{count:a,visibleCount:r,dirtyCount:l}=o.nodeCount;t+=a,i+=r,e+=l};for(const o of this._children)n(o);for(const o of this._virtualChildren)n(o);return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}Tt._nextSerialNumber=0,v([B({type:"transform"}),b("design:type",Number)],Tt.prototype,"scalingX",void 0),v([B({type:"transform"}),b("design:type",Number)],Tt.prototype,"scalingY",void 0),v([B({type:"transform"}),b("design:type",Object)],Tt.prototype,"scalingCenterX",void 0),v([B({type:"transform"}),b("design:type",Object)],Tt.prototype,"scalingCenterY",void 0),v([B({type:"transform"}),b("design:type",Object)],Tt.prototype,"rotationCenterX",void 0),v([B({type:"transform"}),b("design:type",Object)],Tt.prototype,"rotationCenterY",void 0),v([B({type:"transform"}),b("design:type",Number)],Tt.prototype,"rotation",void 0),v([B({type:"transform"}),b("design:type",Number)],Tt.prototype,"translationX",void 0),v([B({type:"transform"}),b("design:type",Number)],Tt.prototype,"translationY",void 0),v([B({redraw:M.MAJOR,changeCb:s=>s.visibilityChanged()}),b("design:type",Boolean)],Tt.prototype,"visible",void 0),v([B({redraw:M.TRIVIAL,changeCb:nl}),b("design:type",Number)],Tt.prototype,"zIndex",void 0),v([B({redraw:M.TRIVIAL,changeCb:nl}),b("design:type",Array)],Tt.prototype,"zIndexSubOrder",void 0);class zi extends aa{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}v([_(ot),B({redraw:M.MAJOR}),b("design:type",Object)],zi.prototype,"enabled",void 0),v([_(_e),B({redraw:M.MAJOR}),b("design:type",Object)],zi.prototype,"color",void 0),v([_(I()),B({redraw:M.MAJOR}),b("design:type",Object)],zi.prototype,"xOffset",void 0),v([_(I()),B({redraw:M.MAJOR}),b("design:type",Object)],zi.prototype,"yOffset",void 0),v([_(I(0)),B({redraw:M.MAJOR}),b("design:type",Object)],zi.prototype,"blur",void 0);const ep=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function sl(){if(typeof navigator>"u")return!0;const s=navigator.userAgent;return!ep.some(t=>t.test(s))}class ut{constructor(t){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;const{document:e,window:i,width:n=600,height:o=300,domLayer:a=!1,zIndex:r=0,name:l,overrideDevicePixelRatio:c}=t;this.document=e,this.window=i,ut.document=e,this.element=e.createElement("canvas"),this.element.width=n,this.element.height=o,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;const{style:d}=this.element;d.userSelect="none",d.display="block",a&&(d.position="absolute",d.zIndex=String(r),d.top="0",d.left="0",d.pointerEvents="none",d.opacity="1",l&&(this.element.id=l)),this.context=this.setPixelRatio(c),this.resize(n,o)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;t?.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,e="image/png"){t=(t??"").trim()||"image";const i=this.getDataURL(e),n=this.document,o=n.createElement("a");o.href=i,o.download=t,o.style.display="none",n.body.appendChild(o),o.click(),n.body.removeChild(o)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=t??this.window.devicePixelRatio;return sl()||(e=1),this._pixelRatio=e,ut.overrideScale(this.realContext,e)}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),i.style.width=t+"px",i.style.height=e+"px",n.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=this.document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t=typeof navigator>"u"||navigator.userAgent.indexOf("Chrome")>-1,e=typeof navigator<"u"&&navigator.userAgent.indexOf("Firefox")>-1,i=!t&&typeof navigator<"u"&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,n){const o=this.textMeasuringContext;return o.font=e,o.textBaseline=i,o.textAlign=n,o.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const n=i.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,n=i[e];if(n){const l=n[t];if(l)return l}else i[e]={};const o=this.svgText;o.style.font=e,o.textContent=t;const a=o.getBBox(),r={width:a.width,height:a.height};return i[e][t]=r,r}static overrideScale(t,e){let i=0;const n={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(o,a,r,l,c,d){"object"==typeof o?this.$setTransform(o):this.$setTransform(o*e,a*e,r*e,l*e,c*e,d*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t["$"+o]||(t["$"+o]=t[o]),t[o]=n[o]);return t}}ut.document=globalThis.document,ut.textSizeCache={};class ip{constructor(){this.stops=[]}}class np extends ip{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:n,angle:o}=this,a=$t(fe(o+90)),r=Math.cos(a),l=Math.sin(a),c=e.width,d=e.height,u=e.x+.5*c,h=e.y+.5*d;if(c>0&&d>0){const f=Math.sqrt(d*d+c*c)/2,g=Math.atan2(d,c);let m;m=a<Math.PI/2?a:a<Math.PI?Math.PI-a:a<3*Math.PI/2?a-Math.PI:2*Math.PI-a;const y=f*Math.abs(Math.cos(m-g)),x=t.createLinearGradient(u+r*y,h+l*y,u-r*y,h-l*y);return n.forEach(A=>{x.addColorStop(A.offset,A.color)}),x}return"black"}}const sp=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class Q extends Tt{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=Q.defaultStyles.fill,this.stroke=Q.defaultStyles.stroke,this.strokeWidth=Q.defaultStyles.strokeWidth,this.lineDash=Q.defaultStyles.lineDash,this.lineDashOffset=Q.defaultStyles.lineDashOffset,this.lineCap=Q.defaultStyles.lineCap,this.lineJoin=Q.defaultStyles.lineJoin,this.opacity=Q.defaultStyles.opacity,this.fillShadow=Q.defaultStyles.fillShadow}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,n=e.length;i<n;i++){const o=e[i];this[o]=t[o]}}updateGradient(){const{fill:t}=this;let e;if(t?.startsWith("linear-gradient")&&(e=sp.exec(t))){const i=parseFloat(e[1]),n=[],o=e[2],a=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let r;for(;r=a.exec(o);)n.push(r[0]);this.gradient=new np,this.gradient.angle=i,this.gradient.stops=n.map((l,c)=>({offset:c/(n.length-1),color:l}))}else this.gradient=void 0}align(t,e){var i,n,o;const a=null!==(o=null===(n=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==o?o:1,r=Math.round(t*a)/a;return null==e?r:0===e?0:e<1?Math.ceil(e*a)/a:Math.round((e+t)*a)/a-r}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){t.fillStyle=this.gradient?this.gradient.createGradient(t,this.computeBBox()):this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const n=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,o=this.fillShadow;o?.enabled&&(t.shadowColor=o.color,t.shadowOffsetX=o.xOffset*n,t.shadowOffsetY=o.yOffset*n,t.shadowBlur=o.blur*n)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}function Qs(s){const{redraw:t=M.MAJOR,changeCb:e}=s??{};return B({redraw:t,type:"font",changeCb:e})}Q.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),v([B({redraw:M.MINOR}),b("design:type",Number)],Q.prototype,"fillOpacity",void 0),v([B({redraw:M.MINOR}),b("design:type",Number)],Q.prototype,"strokeOpacity",void 0),v([B({redraw:M.MINOR,changeCb:s=>s.updateGradient()}),b("design:type",Object)],Q.prototype,"fill",void 0),v([B({redraw:M.MINOR}),b("design:type",Object)],Q.prototype,"stroke",void 0),v([B({redraw:M.MINOR}),b("design:type",Number)],Q.prototype,"strokeWidth",void 0),v([B({redraw:M.MINOR}),b("design:type",Object)],Q.prototype,"lineDash",void 0),v([B({redraw:M.MINOR}),b("design:type",Number)],Q.prototype,"lineDashOffset",void 0),v([B({redraw:M.MINOR}),b("design:type",String)],Q.prototype,"lineCap",void 0),v([B({redraw:M.MINOR}),b("design:type",String)],Q.prototype,"lineJoin",void 0),v([B({redraw:M.MINOR,convertor:s=>Math.min(1,Math.max(0,s))}),b("design:type",Number)],Q.prototype,"opacity",void 0),v([B({redraw:M.MINOR,checkDirtyOnAssignment:!0}),b("design:type",Object)],Q.prototype,"fillShadow",void 0);class z extends Q{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=z.defaultStyles.textAlign,this.textBaseline=z.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=ll(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Oi(this)),this._font}computeBBox(){return ut.has.textMetrics?ol(this.lines,this.x,this.y,this):al(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(ut.has.textMetrics){const n=ut.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(i=n.fontBoundingBoxDescent)&&void 0!==i?i:n.emHeightDescent)}return ut.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===M.NONE&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:o,stroke:a,strokeWidth:r}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const l=this.layerManager.canvas.pixelRatio||1,{globalAlpha:c}=e;if(o){e.fillStyle=o,e.globalAlpha=c*this.opacity*this.fillOpacity;const{fillShadow:d}=this;d?.enabled&&(e.shadowColor=d.color,e.shadowOffsetX=d.xOffset*l,e.shadowOffsetY=d.yOffset*l,e.shadowBlur=d.blur*l),this.renderLines((u,h,f)=>e.fillText(u,h,f))}if(a&&r){e.strokeStyle=a,e.lineWidth=r,e.globalAlpha=c*this.opacity*this.strokeOpacity;const{lineDash:d,lineDashOffset:u,lineCap:h,lineJoin:f}=this;d&&e.setLineDash(d),u&&(e.lineDashOffset=u),h&&(e.lineCap=h),f&&(e.lineJoin=f),this.renderLines((g,m,y)=>e.strokeText(g,m,y))}super.render(t)}renderLines(t){const{lines:e,x:i,y:n}=this,o=this.lines.map(l=>this.getLineHeight(l));let r=-(o.reduce((l,c)=>l+c,0)-o[0])*rl(this.textBaseline);for(let l=0;l<e.length;l++)t(e[l],i,n+r),r+=o[l]}static wrap(t,e,i,n,o,a="ellipsis"){var r;const l="hide"!==a,d=function op(s){const t=new Map,e=n=>ut.getTextSize(n,s);return{size:e,width:n=>{if(t.has(n))return t.get(n);const{width:o}=e(n);return t.set(n,o),o}}}(Oi(n)),u=t.split(/\r?\n/g);if(0===u.length)return"";if("never"===o)return null!==(r=z.truncateLine(u[0],e,d,l?"auto":"never"))&&void 0!==r?r:"";const h=[];let f=0;for(const g of u){const m=z.wrapLine(g,e,i,d,n,o,f,l);if(null==m)return"";if(h.push(m.result),f=m.cumulativeHeight,m.truncated)break}return h.join("\n").trim()}static wrapLine(t,e,i,n,o,a,r,l){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:r};const c=n.size(t);if(c.width<=e)return{result:t,truncated:!1,cumulativeHeight:r+c.height};if(c.height>i||n.width("W")>e)return l?{result:"",truncated:!0,cumulativeHeight:r}:void 0;const d=t.split(/\s+/g),u=z.wrapLineSequentially(d,e,i,n,o,a,r,l);if(null==u)return;r=u.cumulativeHeight;let{lines:h}=u;if(!u.wordsBrokenOrTruncated&&!u.linesTruncated){const m=z.wrapLineBalanced(d,e,n,u.lines.length);m.length===h.length&&(h=m)}return{result:h.map(g=>g.join(" ")).join("\n"),truncated:u.linesTruncated,cumulativeHeight:r}}static breakWord(t,e,i,n,o){const a=f=>z.punctuationMarks.includes(t[f]),r=n?o.width("-"):0,l=[];let c=0,d=0;for(let f=0;f<t.length;f++){const m=o.width(t[f]);c+m+r>(0===d?e:i)&&(l.push(f),c=0,d++),c+=m}const u=[];let h=0;for(const f of l){let g=t.substring(h,f);n&&g.length>0&&!a(f-1)&&!a(f)&&(g+="-"),u.push(g),h=f}return u.push(t.substring(h)),u}static truncateLine(t,e,i,n){t=t.trimEnd();const o=i.width(t);if(o>e&&"never"===n)return;if(o<=e&&"force"!==n)return t;const a=i.width("\u2026");let r=t,l=o;for(;r.length>0&&l+a>e;)r=r.slice(0,-1).trimEnd(),l=i.width(r);return l+a<=e?`${r}\u2026`:void 0}static wrapLineSequentially(t,e,i,n,o,a,r,l){const{fontSize:c=0,lineHeight:d=c*z.defaultLineHeightRatio}=o,u="always"===a||"hyphenate"===a,h="hyphenate"===a,f=n.width(" ");let g=!1,m=!1;const y=[];let x=[],A=0;const S=()=>({lines:y,linesTruncated:m,wordsBrokenOrTruncated:g,cumulativeHeight:r}),k=()=>{if(!l)return;const O=x.join(" "),D=z.truncateLine(O,e,n,"force");return null!=D?(x.splice(0,x.length,D),m=!0,S()):void 0},E=()=>{const O=r+d;return!(O>=i||(x=[],A=0,r=O,y.push(x),0))};if(!E())return k();for(let O=0;O<t.length;O++){const D=t[O],T=n.width(D),w=0===x.length?0:f,C=A+w+T;if(C<=e)x.push(D),A=C;else if(T<=e){if(!E())return k();x.push(D),A=T}else{if(g=!0,!u){if(l){if(!E())return k();const N=z.truncateLine(D,e,n,"force");if(null==N)return;x.push(N),O<t.length-1&&(m=!0);break}return}{const L=z.breakWord(D,e-A-w,e,h,n);for(let F=0;F<L.length;F++){const V=L[F];if(V&&x.push(V),F===L.length-1)A=n.width(V);else if(!E())return k()}}}}return S()}static wrapLineBalanced(t,e,i,n){const o=t.reduce((f,g)=>f+i.width(g),0),a=i.width(" "),l=(o+a*(t.length-n-2))/n,c=[];let d=[],u=i.width(t[0]),h=!0;for(const f of t){const g=i.width(f);if(h){d=[],d.push(f),u=g,h=!1,c.push(d);continue}const m=u+a+g;m<=l?(d.push(f),u=m):m<=e?(d.push(f),h=!0):(d=[f],u=g,c.push(d))}return c}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}}function Oi(s){const{fontFamily:t,fontSize:e,fontStyle:i,fontWeight:n}=s;return[i??"",n??"",e+"px",t].join(" ").trim()}function ap(s,t,e,i){return ut.has.textMetrics?ol(s,t,e,i):al(s,t,e,i)}function ol(s,t,e,i){var n,o;let a=0,r=0,l=0,c=0,d=0;const u=Oi(i),{lineHeight:h,textBaseline:f=z.defaultStyles.textBaseline,textAlign:g=z.defaultStyles.textAlign}=i;for(let m=0;m<s.length;m++){const y=ut.measureText(s[m],u,f,g);a=Math.max(a,y.actualBoundingBoxLeft),l=Math.max(l,y.width),0==m?(r+=y.actualBoundingBoxAscent,c+=y.actualBoundingBoxAscent):d+=null!==(n=y.fontBoundingBoxAscent)&&void 0!==n?n:y.emHeightAscent,m==s.length-1?c+=y.actualBoundingBoxDescent:d+=null!==(o=y.fontBoundingBoxDescent)&&void 0!==o?o:y.emHeightDescent}return void 0!==h&&(d=(s.length-1)*h),c+=d,r+=d*rl(f),new H(t-a,e-r,l,c)}function al(s,t,e,i){let n=0,o=0,a=0;const r=Oi(i),{lineHeight:l,textBaseline:c=z.defaultStyles.textBaseline,textAlign:d=z.defaultStyles.textAlign}=i;if(s.length>0){const u=ut.getTextSize(s[0],r);n=u.width,o=u.height}for(let u=1;u<s.length;u++){const h=ut.getTextSize(s[u],r);n=Math.max(n,h.width),a+=l??h.height}switch(d){case"end":case"right":t-=n;break;case"center":t-=n/2}switch(c){case"alphabetic":e-=.7*o+.5*a;break;case"middle":e-=.45*o+.5*a;break;case"ideographic":case"bottom":e-=o+a;break;case"hanging":e-=.2*o+.5*a}return new H(t,e,n,o+a)}function rl(s){switch(s){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function ll(s){return"string"==typeof s?s.split(/\r?\n/g):[]}function Rt(s,t){return ts((e,i,n)=>(e[s][t??i]=n,n))}function Zt(s){const{newValue:t,oldValue:e,changeValue:i}=s;return ts((n,o,a,r)=>(a!==r&&(void 0!==r&&e?.call(n,r),void 0!==a&&t?.call(n,a),i?.call(n,a,r)),a))}z.className="Text",z.defaultLineHeightRatio=1.15,z.defaultStyles=Object.assign({},Q.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),z.ellipsis="\u2026",z.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],v([B({redraw:M.MAJOR}),b("design:type",Number)],z.prototype,"x",void 0),v([B({redraw:M.MAJOR}),b("design:type",Number)],z.prototype,"y",void 0),v([B({redraw:M.MAJOR,changeCb:s=>s._setLines()}),b("design:type",String)],z.prototype,"text",void 0),v([Qs(),b("design:type",String)],z.prototype,"fontStyle",void 0),v([Qs(),b("design:type",String)],z.prototype,"fontWeight",void 0),v([Qs(),b("design:type",Number)],z.prototype,"fontSize",void 0),v([Qs(),b("design:type",String)],z.prototype,"fontFamily",void 0),v([B({redraw:M.MAJOR}),b("design:type",String)],z.prototype,"textAlign",void 0),v([B({redraw:M.MAJOR}),b("design:type",String)],z.prototype,"textBaseline",void 0),v([B({redraw:M.MAJOR}),b("design:type",Number)],z.prototype,"lineHeight",void 0);class bt{constructor(){this.node=new z,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=te.None}computeTextWrap(t,e){var i,n;const{text:o,wrapping:a}=this,r=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),l=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(!isFinite(r)&&!isFinite(l))return void(this.node.text=o);const c=z.wrap(o??"",r,l,this,a);this.node.text=c}}bt.SMALL_PADDING=10,bt.LARGE_PADDING=20,v([_(ot),b("design:type",Object)],bt.prototype,"enabled",void 0),v([_(j),Rt("node"),b("design:type",String)],bt.prototype,"text",void 0),v([_(_i),Rt("node"),b("design:type",Object)],bt.prototype,"fontStyle",void 0),v([_(Ai),Rt("node"),b("design:type",Object)],bt.prototype,"fontWeight",void 0),v([_(I(0)),Rt("node"),b("design:type",Number)],bt.prototype,"fontSize",void 0),v([_(Qt),Rt("node"),b("design:type",String)],bt.prototype,"fontFamily",void 0),v([_(Ot),Rt("node","fill"),b("design:type",Object)],bt.prototype,"color",void 0),v([_(J(0)),b("design:type",Number)],bt.prototype,"spacing",void 0),v([_(J(0)),b("design:type",Number)],bt.prototype,"lineHeight",void 0),v([_(J(0)),b("design:type",Number)],bt.prototype,"maxWidth",void 0),v([_(J(0)),b("design:type",Number)],bt.prototype,"maxHeight",void 0),v([_(sa),b("design:type",String)],bt.prototype,"wrapping",void 0);class Re{constructor(){this.enabled=!1,this.text=void 0,this.spacing=bt.SMALL_PADDING,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.formatter=void 0}}function la(s,t){const e={};if(Array.isArray(t))for(let i=0;i<s.length;i++)e[`${s[i]}`]=t[i];else for(let i=0;i<s.length;i++)e[`${s[i]}`]=t;return e}function os(s,t){return e=>Number(s)*(1-e)+Number(t)*e}v([_(ot),b("design:type",Object)],Re.prototype,"enabled",void 0),v([_(j),b("design:type",String)],Re.prototype,"text",void 0),v([_(J(0)),b("design:type",Number)],Re.prototype,"spacing",void 0),v([_(_i),b("design:type",String)],Re.prototype,"fontStyle",void 0),v([_(Ai),b("design:type",String)],Re.prototype,"fontWeight",void 0),v([_(I(0)),b("design:type",Number)],Re.prototype,"fontSize",void 0),v([_(Qt),b("design:type",String)],Re.prototype,"fontFamily",void 0),v([_(Ot),b("design:type",String)],Re.prototype,"color",void 0),v([_(sa),b("design:type",String)],Re.prototype,"wrapping",void 0),v([_(ti),b("design:type",Function)],Re.prototype,"formatter",void 0);const cl=s=>s,as=s=>Math.sin(s*Math.PI/2),rs={animationDuration:.2,animationDelay:1};var to=function(s){return s.Loop="loop",s.Reverse="reverse",s}(to||{});function eo(s){return s.every(t=>t instanceof Tt)}class ml{constructor(t){var e,i,n,o,a,r,l,c,d,u;this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=null===(e=t.autoplay)||void 0===e||e,this.delay=null!==(i=t.delay)&&void 0!==i?i:0,this.duration=null!==(n=t.duration)&&void 0!==n?n:1e3,this.ease=null!==(o=t.ease)&&void 0!==o?o:cl,this.repeat=null!==(a=t.repeat)&&void 0!==a?a:0,this.repeatType=null!==(r=t.repeatType)&&void 0!==r?r:to.Loop,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onRepeat=t.onRepeat,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),!0===t.skip?(null===(l=this.onUpdate)||void 0===l||l.call(this,t.to,!1,this),null===(c=this.onStop)||void 0===c||c.call(this,this),null===(d=this.onComplete)||void 0===d||d.call(this,this)):this.autoplay&&(this.play(),null===(u=this.onUpdate)||void 0===u||u.call(this,t.from,!0,this))}play(){var t;return this.isPlaying||(this.isPlaying=!0,null===(t=this.onPlay)||void 0===t||t.call(this,this)),this}pause(){return this.isPlaying&&(this.isPlaying=!1),this}stop(){var t;return this.isPlaying&&(this.isPlaying=!1,null===(t=this.onStop)||void 0===t||t.call(this,this)),this}reset(t){const e=this.interpolate(this.isReverse?1-this.delta:this.delta);return this.interpolate=this.createInterpolator(e,t.to),this.elapsed=0,this.iteration=0,"number"==typeof t.delay&&(this.delay=t.delay),"number"==typeof t.duration&&(this.duration=t.duration),"function"==typeof t.ease&&(this.ease=t.ease),this}update(t){var e,i,n;if(this.elapsed+=t,this.elapsed<=this.delay)return this;const o=this.interpolate(this.isReverse?1-this.delta:this.delta);return null===(e=this.onUpdate)||void 0===e||e.call(this,o,!1,this),this.elapsed-this.delay>=this.duration&&(this.iteration<this.repeat?(this.iteration++,this.elapsed=(this.elapsed-this.delay)%this.duration+this.delay,this.repeatType===to.Reverse&&(this.isReverse=!this.isReverse),null===(i=this.onRepeat)||void 0===i||i.call(this,this)):(this.stop(),null===(n=this.onComplete)||void 0===n||n.call(this,this))),this}get delta(){return this.ease(we(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!=typeof e)return this.interpolateValue(t,e);const i=Object.keys(e).map(n=>[n,this.interpolateValue(t[n],e[n])]);return n=>{const o={};for(const[a,r]of i)o[a]=r(n);return o}}interpolateValue(t,e){try{switch(typeof t){case"number":return os(t,e);case"string":return function lp(s,t){if("string"==typeof s)try{s=X.fromString(s)}catch{s=X.fromArray([0,0,0])}if("string"==typeof t)try{t=X.fromString(t)}catch{t=X.fromArray([0,0,0])}const e=os(s.r,t.r),i=os(s.g,t.g),n=os(s.b,t.b),o=os(s.a,t.a);return a=>X.fromArray([e(a),i(a),n(a),o(a)]).toRgbaString()}(t,e)}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}const ee={added:{animationDuration:.25,animationDelay:.75},updated:{animationDuration:.5,animationDelay:.25},removed:{animationDuration:.25,animationDelay:0},unknown:{animationDuration:1,animationDelay:0}};function Ct(s,t,e,i,n,o,a){const{defaultDuration:r}=e,{fromFn:l,toFn:c,intermediateFn:d}=n,u=eo(i),h=u?i:[],f=u?[]:i,g={added:{},removed:{}};o&&a&&(g.added=la(a.added,!0),g.removed=la(a.removed,!0));const m=(x,A)=>{var S,k;let E,O=0,D=0;for(const T of A){const w=x[O]===T,C={last:D>=A.length-1,lastLive:O>=x.length-1,prev:A[D-1],prevFromProps:E,prevLive:x[O-1],next:A[D+1],nextLive:x[O+(w?1:0)]},N=`${s}_${t}_${T.id}`;e.stopByAnimationId(N);let L="unknown";w?o&&a&&(L=dp(T,T.datum,o,g)):L="removed";const F=l(T,T.datum,L,C),{animationDelay:V,animationDuration:Z,start:q={},finish:it={}}=F,nt=pe(F,["animationDelay","animationDuration","start","finish"]),tt=c(T,T.datum,L,C),{animationDelay:dt,animationDuration:ht,start:wt={},finish:Jt={}}=tt,gt=pe(tt,["animationDelay","animationDuration","start","finish"]);e.animate({id:N,groupId:s,from:nt,to:gt,ease:as,onPlay:()=>{T.setProperties(Object.assign(Object.assign({},q),wt))},onUpdate(Ce){T.setProperties(Ce),d&&T.setProperties(d(T,T.datum,L,C))},onStop:()=>{T.setProperties(Object.assign(Object.assign(Object.assign({},gt),it),Jt))},duration:(null!==(S=Z??ht)&&void 0!==S?S:1)*r,delay:(null!==(k=V??dt)&&void 0!==k?k:0)*r}),w&&O++,D++,E=nt}};let y=0;for(const x of f){const A=x.nodes();m(A.filter(k=>!x.isGarbage(k)),A),e.animate({id:`${s}_${t}_selection_${y}`,groupId:s,from:0,to:1,ease:as,onStop(){x.cleanup()}}),y++}m(h,h)}function di(s,t,e,i,n,o,a={}){const r=eo(i),l=r?i:[],c=r?[]:i,{animationDelay:d=0,animationDuration:u=1,start:h={},finish:f={}}=a,{defaultDuration:g}=e;e.animate({id:`${s}_${t}`,groupId:s,from:n,to:o,ease:as,onPlay:()=>{for(const m of l)m.setProperties(h);for(const m of c)for(const y of m.nodes())y.setProperties(h)},onUpdate(m){for(const y of l)y.setProperties(m);for(const y of c)for(const x of y.nodes())x.setProperties(m)},onStop:()=>{for(const m of l)m.setProperties(Object.assign(Object.assign({},o),f));for(const m of c)for(const y of m.nodes())y.setProperties(Object.assign(Object.assign({},o),f))},duration:u*g,delay:d*g})}function dp(s,t,e,i){const n=e(s,t);return i.added[n]?"added":i.removed[n]?"removed":"updated"}var up=Object.freeze({__proto__:null,NODE_UPDATE_PHASES:["removed","updated","added"],FROM_TO_MIXINS:ee,fromToMotion:Ct,staticFromToMotion:di});const gn=s=>`(${s})`,ui=s=>`${gn(s)}?`,vl=s=>ui(`?:${s}`),hp=new RegExp(["^",vl(`${ui(".")}${gn("[<>=^]")}`),ui("[+\\-( ]"),ui("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),ui("0"),ui("\\d+"),ui(","),vl(`\\.${gn("\\d+")}`),ui("~"),ui("[%a-z]"),"$"].join(""),"i"),pp=new RegExp(["^",gn(".*?"),`#\\{${gn(".+?")}\\}`,gn(".*?"),"$"].join(""));function bl(s){let t,e;const i=pp.exec(s);i&&([,t,s,e]=i);const n=hp.exec(s);if(!n)throw new Error(`The number formatter is invalid: ${s}`);const[,o,a,r,l,c,d,u,h,f,g]=n;return{fill:o,align:a,sign:r,symbol:l,zero:c,width:parseInt(d),comma:u,precision:parseInt(h),trim:!!f,type:g,prefix:t,suffix:e}}function xl(s){const t="string"==typeof s?bl(s):s,{fill:e,align:i,sign:n="-",symbol:o,zero:a,width:r,comma:l,type:c,prefix:d="",suffix:u="",precision:h}=t;let{trim:f}=t;const g=void 0===h||isNaN(h);let m,y;if(c)if(c in ge&&c in mn)m=g?mn[c]:ge[c];else if(c in ge)m=ge[c];else{if(!(c in mn))throw new Error(`The number formatter type is invalid: ${c}`);m=mn[c]}else m=ge.g,f=!0;return y=null==h||g?c?6:12:h,x=>{let A=m(x,y);return f&&(A=function fp(s){return s.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}(A)),l&&(A=function gp(s,t){let e=s.indexOf(".");e<0&&(e=s.length);const i=s.substring(0,e).split(""),n=s.substring(e);for(let o=i.length-3;o>0;o-=3)i.splice(o,0,t);return`${i.join("")}${n}`}(A,l)),A=function bp(s,t,e=""){if("("===e)return s>=0?t:`(${t})`;return`${s>=0?"+"===e?"+":"":vp}${t}`}(x,A,n),o&&"#"!==o&&(A=`${o}${A}`),"#"===o&&"x"===c&&(A=`0x${A}`),"s"===c&&(A=`${A}${function mp(s){return yp[Sl(s)]}(x)}`),("%"===c||"p"===c)&&(A=`${A}%`),null!=r&&!isNaN(r)&&(A=function xp(s,t,e=" ",i=">"){let n=s;if(">"!==i&&i){if("<"===i)n=n.padEnd(t,e);else if("^"===i){const o=Math.max(0,t-n.length),a=Math.ceil(o/2),r=Math.floor(o/2);n=n.padStart(a+n.length,e),n=n.padEnd(r+n.length,e)}}else n=n.padStart(t,e);return n}(A,r,e??a,i)),A=`${d}${A}${u}`,A}}const io=s=>Math.floor(Math.abs(s)),mn={b:s=>io(s).toString(2),c:s=>String.fromCharCode(s),d:s=>Math.round(Math.abs(s)).toFixed(0),o:s=>io(s).toString(8),x:s=>io(s).toString(16),X:s=>mn.x(s).toUpperCase(),n:s=>mn.d(s),"%":s=>`${io(100*s).toFixed(0)}`},ge={e:(s,t)=>Math.abs(s).toExponential(t),E:(s,t)=>ge.e(s,t).toUpperCase(),f:(s,t)=>Math.abs(s).toFixed(t),F:(s,t)=>ge.f(s,t).toUpperCase(),g:(s,t)=>{if(0===s)return"0";const e=Math.abs(s),i=Math.floor(Math.log10(e));return i>=-4&&i<t?e.toFixed(t-1-i):e.toExponential(t-1)},G:(s,t)=>ge.g(s,t).toUpperCase(),n:(s,t)=>ge.g(s,t),p:(s,t)=>ge.r(100*s,t),r:(s,t)=>{if(0===s)return"0";const e=Math.abs(s),n=Math.floor(Math.log10(e))-(t-1);if(n<=0)return e.toFixed(-n);const o=Math.pow(10,n);return(Math.round(e/o)*o).toFixed()},s:(s,t)=>{const e=Sl(s);return ge.r(s/Math.pow(10,e),t)},"%":(s,t)=>ge.f(100*s,t)};function Sl(s){const t=Math.log10(Math.abs(s)),e=3*Math.floor(t/3);return Math.max(_l,Math.min(Al,e))}const _l=-24,Al=24,yp={[_l]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[Al]:"Y"},vp="\u2212";function no(s,t,e,i,n){if(e<2)return ls(s,t,t-s);const o=yn(s,t,e,i,n);return isNaN(o)?new da(0):ls(s=Math.ceil(s/o)*o,t=Math.floor(t/o)*o,o)}const Ol=[1,2,5,10];function yn(s,t,e,i=0,n=1/0){const a=Math.floor(Math.log10((t-s)/e)),r=Math.pow(10,a),l=Ol.map(c=>{const u=Math.ceil((t-s)/(c*r));return{multiplier:c,isWithinBounds:u>=i&&u<=n,diffCount:Math.abs(u-e)}}).sort((c,d)=>c.isWithinBounds!==d.isWithinBounds?c.isWithinBounds?-1:1:c.diffCount-d.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*r}class da extends Array{constructor(t,e){if(super(),e)for(let i=0,n=e.length;i<n;i++)this[i]=e[i];this.fractionDigits=t}}function ls(s,t,e){const n=(l=>{var c,d;const u=l.split("e");return Math.max((null!==(d=null===(c=u[0].split(".")[1])||void 0===c?void 0:c.length)&&void 0!==d?d:0)-Number(u[1]),0)})((e%1).toExponential()),o=Math.pow(10,n),a=Math.ceil((t-s)/e),r=new da(n);for(let l=0;l<=a;l++)r.push(Math.round((s+e*l)*o)/o);return r}let rt=(()=>{class s{static is(e){return e instanceof s}constructor(e,i){this.domain=e,this.range=i,this.nice=!1,this.tickCount=s.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1){const i=this.getDomain(),n=Math.max(...this.range),o=(i[1]-i[0])/e+1,a=Math.floor(n),r=Math.min(o,a);return n/Math.max(1,r)}fromDomain(e){return"number"==typeof e?e:e instanceof Date?e.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,i){var n;const o=null!==(n=i?.clampMode)&&void 0!==n?n:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const a=this.getDomain().map(h=>this.transform(h)),[r,l]=a,{range:c}=this,[d,u]=c;if(e=this.transform(e),"clamped"===o){if(e<r)return d;if(e>l)return u}return r===l?(d+u)/2:e===r?d:e===l?u:d+(this.fromDomain(e)-this.fromDomain(r))/(this.fromDomain(l)-this.fromDomain(r))*(u-d)}invert(e){this.refresh();const i=this.getDomain().map(f=>this.transform(f)),[n,o]=i,{range:a}=this,[r,l]=a,c=r>l;let h;return e<(c?l:r)?c?o:n:e>(c?r:l)?c?n:o:(h=this.toDomain(r===l?(this.fromDomain(n)+this.fromDomain(o))/2:this.fromDomain(n)+(e-r)/(l-r)*(this.fromDomain(o)-this.fromDomain(n))),this.transformInvert(h))}didChange(){const{cache:e}=this;return!(e&&!this.cacheProps.some(n=>this[n]!==e[n])||(this.cache={},this.cacheProps.forEach(n=>this.cache[n]=this[n]),0))}refresh(){this.didChange()&&this.update()}getPixelRange(){const e=this.range.slice().sort((i,n)=>i-n);return e[1]-e[0]}isDenseInterval({start:e,stop:i,interval:n,count:o}){return o??(o=(i-e)/("number"==typeof n?n:1)),o>=this.getPixelRange()&&(G.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}return s.defaultTickCount=5,s.defaultMaxTickCount=6,s})();class Wi extends rt{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:rt.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(a=>!isFinite(a)))return[];this.refresh();const[i,n]=this.getDomain(),{interval:o}=this;if(o){const a=Math.abs(o);if(!this.isDenseInterval({start:i,stop:n,interval:a}))return ls(i,n,a)}return no(i,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i,n;const o=null!==(i=this.tickCount)&&void 0!==i?i:rt.defaultTickCount;return null!==(n=this.interval)&&void 0!==n?n:yn(t,e,o,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:rt.defaultTickCount;let[i,n]=this.domain;if(e<1)return void(this.niceDomain=[i,n]);if(1===e)return void(this.niceDomain=function Sp(s,t){const e=Math.floor(Math.log10(t-s)),i=Math.pow(10,e);return Ol.map(n=>{const o=n*i,a=Math.floor(s/o)*o,r=Math.ceil(t/o)*o;return{error:1-(t-s)/(r-a),domain:[a,r]}}).sort((n,o)=>n.error-o.error)[0].domain}(i,n));let a=i,r=n;for(let l=0;l<4;l++){const c=this.getTickStep(i,n),[d,u]=this.domain;if(c>=1)i=Math.floor(d/c)*c,n=Math.ceil(u/c)*c;else{const h=1/c;i=Math.floor(d*h)/h,n=Math.ceil(u*h)/h}if(i===a&&n===r)break;a=i,r=n}this.niceDomain=[i,n]}tickFormat({ticks:t,specifier:e}){return function kl(s,t){const e=bl(t??",f"),{precision:i}=e;(null==i||isNaN(i))&&("f"===e.type||"%"===e.type?e.precision=Math.max(...s.map(o=>{if("number"!=typeof o||0===o)return 0;const a=Math.floor(Math.log10(Math.abs(o))),l=o.toExponential((e.type?6:12)-1).replace(/\.?0+e/,"e"),c=l.indexOf(".");if(c<0)return a>=0?0:-a;const d=l.indexOf("e")-c;return Math.max(0,d-a-1)})):(!e.type||e.type in ge)&&(e.precision=Math.max(...s.map(o=>{if("number"!=typeof o)return 0;const a=o.toExponential((e.type?6:12)-1).replace(/\.?0+e/,"e");return a.substring(0,a.indexOf("e")).replace(".","").length}))));const n=xl(e);return o=>n(Number(o))}(t??this.ticks(),e)}}function El(s,t){let e=0;return"number"==typeof s&&"number"==typeof t?e=s-t:"string"==typeof s&&"string"==typeof t?e=s.localeCompare(t):null==s&&null==t||(e=null==s?-1:null==t?1:String(s).localeCompare(String(t))),e}function Dl(s,t,e){const i=n=>"function"==typeof n?n():n;for(const n in s){const o=e(i(s[n]),i(t[n]));if(0!==o)return o}return 0}class W extends Tt{zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}constructor(t){var e;super({isVirtual:t?.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=t??{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&null!==(e=this.opts)&&void 0!==e&&e.layer){const{zIndex:n,zIndexSubOrder:o,name:a}=null!==(i=this.opts)&&void 0!==i?i:{};this.layer=t.addLayer({zIndex:n,zIndexSubOrder:o,name:a,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()})}}getComputedOpacity(){let t=1,e=this;do{e instanceof W&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=M.TRIVIAL){if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<M.MINOR||null!=this.layer)&&(i=M.TRIVIAL),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),W.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:n}={},_debug:o=(()=>{})}=this,{dirty:a,dirtyZIndex:r,layer:l,children:c,clipRect:d,dirtyTransform:u}=this;let{ctx:h,forceRender:f,clipBBox:g}=t;const{resized:m,stats:y}=t,x=h.getTransform(),A=a>=M.MINOR||r||m;let S=A,k=!1;for(const C of c)if(S||(S=null==C.layerManager&&C.dirty>=M.TRIVIAL),k||(k=null!=C.layerManager&&C.dirty>=M.TRIVIAL),S)break;if(n&&o({name:n,group:this,isDirty:A,isChildDirty:S,dirtyTransform:u,renderCtx:t,forceRender:f}),u)f="dirtyTransform";else if(l){const C=this.computeBBox();(void 0===this.lastBBox||!this.lastBBox.equals(C))&&(f="dirtyTransform",this.lastBBox=C)}if(!(A||S||k||f))return n&&y&&o({name:n,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),l&&y&&(y.layersSkipped++,y.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const E=this.visible;if(l){if(h=l.context,h.save(),h.resetTransform(),"dirtyTransform"!==f&&(f=S||r),f&&l.clear(),g){const{width:C,height:N,x:L,y:F}=g;o(()=>({name:n,clipBBox:g,ctxTransform:h.getTransform(),renderCtx:t,group:this})),this.clipCtx(h,L,F,C,N)}h.setTransform(x)}else h.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(h),d){const{x:C,y:N,width:L,height:F}=d;h.save(),o(()=>({name:n,clipRect:d,ctxTransform:h.getTransform(),renderCtx:t,group:this})),this.clipCtx(h,C,N,L,F),g=this.matrix.transformBBox(d)}const O=this.hasVirtualChildren();r?(this.sortChildren(c),"dirtyTransform"!==f&&(f=!0)):O&&this.sortChildren(c);const T=f!==t.forceRender||g!==t.clipBBox||h!==t.ctx?Object.assign(Object.assign({},t),{ctx:h,forceRender:f,clipBBox:g}):t;let w=0;for(const C of c)C.visible&&E?f||C.dirty!==M.NONE?(h.save(),C.render(T),h.restore()):y&&(w+=C.nodeCount.count):(C.markClean(),y&&(w+=C.nodeCount.count));if(y&&(y.nodesSkipped+=w),super.render(t),d&&h.restore(),O)for(const C of this.virtualChildren)C.markClean({recursive:"virtual"});l&&(y&&y.layersRendered++,h.restore(),f&&l.snapshot(),null===(i=(e=l.context).verifyDepthZero)||void 0===i||i.call(e)),n&&y&&o({name:n,result:"rendered",skipped:w,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort((e,i)=>{var n,o;return Dl([e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.serialNumber],[i.zIndex,...null!==(o=i.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],i.serialNumber],El)})}clipCtx(t,e,i,n,o){t.beginPath(),t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,n=1/0,o=-1/0;return t.forEach(a=>{if(!a.visible)return;const r=a.computeTransformedBBox();if(!r)return;const l=r.x,c=r.y;l<e&&(e=l),c<n&&(n=c),l+r.width>i&&(i=l+r.width),c+r.height>o&&(o=c+r.height)}),new H(e,n,i-e,o-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}W.className="Group",v([B({redraw:M.MAJOR,convertor:s=>Math.min(1,Math.max(0,s))}),b("design:type",Number)],W.prototype,"opacity",void 0);class lt{static select(t,e,i=!0){return new lt(t,e,i)}static selectAll(t,e){const i=[],n=o=>{e(o)&&i.push(o),o.children.forEach(n)};return n(t),i}static selectByClass(t,e){return lt.selectAll(t,i=>i instanceof e)}static selectByTag(t,e){return lt.selectAll(t,i=>i.tag===e)}constructor(t,e,i=!0){this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Mt.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Tt,e)?()=>new e:e}createNode(t,e,i){const n=this.nodeFactory(t);return n.datum=t,e?.(n),null!=i?this._nodes.splice(i,0,n):this._nodes.push(n),this.parentNode.appendChild(n),n}update(t,e,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${t}`),i){const n=new Map(t.map((o,a)=>[i(o),[o,a]]));for(const[o,a]of this._nodesMap.entries())if(n.has(a)){const[r]=n.get(a);o.datum=r,this.garbageBin.delete(o),n.delete(a)}else this.garbageBin.add(o);for(const[o,[a,r]]of n.entries())this._nodesMap.set(this.createNode(a,e,r),o)}else{const n=Math.max(t.length,this.data.length);for(let o=0;o<n;o++)o>=t.length?this.garbageBin.add(this._nodes[o]):o>=this._nodes.length?this.createNode(t[o],e):(this._nodes[o].datum=t[o],this.garbageBin.delete(this._nodes[o]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t],i=this._nodes[t].datum;yield{node:e,datum:i,index:t}}}select(t){return lt.selectAll(this.parentNode,t)}selectByClass(t){return lt.selectByClass(this.parentNode,t)}selectByTag(t){return lt.selectByTag(this.parentNode,t)}nodes(){return this._nodes}}class jt extends Q{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new H(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:n}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,n)}return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===M.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:a,y1:r,x2:l,y2:c}=this;if(a===l){const d=Math.round(a)+Math.floor(this.strokeWidth)%2/2;a=d,l=d}else if(r===c){const d=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=d,c=d}i.beginPath(),i.moveTo(a,r),i.lineTo(l,c),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function cs(s,t,e,i,n,o,a,r){const l=(e-s)*(r-o)-(i-t)*(a-n);if(0===l)return null;const c=((a-n)*(t-o)-(s-n)*(r-o))/l,d=((e-s)*(t-o)-(i-t)*(s-n))/l;return c>=0&&c<=1&&d>=0&&d<=1?{x:s+c*(e-s),y:t+c*(i-t)}:null}function Op(s,t,e,i,n,o,a,r,l,c,d,u){const h=[],f=c-u,g=d-l,m=l*(u-c)-c*(d-l),y=Tl(s,e,n,a),x=Tl(t,i,o,r),O=function kp(s,t,e,i){if(0===s)return function Ap(s,t,e){if(0===s)return function _p(s,t){const e=-t/s;return 0!==s&&e>=0&&e<=1?[e]:[]}(t,e);const i=t*t-4*s*e,n=[];if(0===i){const o=-t/(2*s);o>=0&&o<=1&&n.push(o)}else if(i>0){const o=Math.sqrt(i),a=(-t-o)/(2*s),r=(-t+o)/(2*s);a>=0&&a<=1&&n.push(a),r>=0&&r<=1&&n.push(r)}return n}(t,e,i);const n=t/s,o=e/s,r=(3*o-n*n)/9,l=(9*n*o-i/s*27-2*n*n*n)/54,c=r*r*r+l*l,d=1/3,u=[];if(c>=0){const h=Math.sqrt(c),f=Math.sign(l+h)*Math.pow(Math.abs(l+h),d),g=Math.sign(l-h)*Math.pow(Math.abs(l-h),d),m=Math.abs(Math.sqrt(3)*(f-g)/2),y=-d*n+(f+g);if(y>=0&&y<=1&&u.push(y),0===m){const x=-d*n-(f+g)/2;x>=0&&x<=1&&u.push(x)}}else{const h=Math.acos(l/Math.sqrt(-r*r*r)),f=d*n,g=2*Math.sqrt(-r),m=g*Math.cos(d*h)-f,y=g*Math.cos(d*(h+2*Math.PI))-f,x=g*Math.cos(d*(h+4*Math.PI))-f;m>=0&&m<=1&&u.push(m),y>=0&&y<=1&&u.push(y),x>=0&&x<=1&&u.push(x)}return u}(f*y[0]+g*x[0],f*y[1]+g*x[1],f*y[2]+g*x[2],f*y[3]+g*x[3]+m);for(const D of O){const T=D*D,w=D*T,C=y[0]*w+y[1]*T+y[2]*D+y[3],N=x[0]*w+x[1]*T+x[2]*D+x[3];let L;L=l!==d?(C-l)/(d-l):(N-c)/(u-c),L>=0&&L<=1&&h.push({x:C,y:N})}return h}function Tl(s,t,e,i){return[3*t-s-3*e+i,3*s-6*t+3*e,-3*s+3*t,s]}function Cl(s,t,e,i,n,o,a,r,l,c){const d=(c-r)/(l-a),u=r-d*a,h=Math.pow(d,2)+1,f=2*(d*(u-t)-s),g=Math.pow(s,2)+Math.pow(u-t,2)-Math.pow(e,2),m=Math.pow(f,2)-4*h*g;if(m<0)return[];const y=(-f+Math.sqrt(m))/2/h,x=(-f-Math.sqrt(m))/2/h,A=[];return[y,x].forEach(S=>{if(!(S>=Math.min(a,l)&&S<=Math.max(a,l)))return;const E=d*S+u,O=$t(i);let D=$t(n),T=$t(Math.atan2(E,S));D<=O&&(D+=2*Math.PI),T<O&&(T+=2*Math.PI),o!==(T>=O&&T<=D)&&A.push({x:S,y:E})}),A}function Nl(s,t,e){const i=Math.sqrt(Math.pow(s,2)+Math.pow(t,2)),{innerRadius:n,outerRadius:o}=e;if(e.startAngle===e.endAngle||i<Math.min(n,o)||i>Math.max(n,o))return!1;const a=Vs(e.startAngle),r=Vs(e.endAngle),l=Math.atan2(t,s);return a<r?l<=r&&l>=a:l<=r&&l>=-Math.PI||l>=a&&l<=Math.PI}function wl(s,t){const{startAngle:e,endAngle:i,innerRadius:n,outerRadius:o}=t,a={x:o*Math.cos(e),y:o*Math.sin(e)},r={x:o*Math.cos(i),y:o*Math.sin(i)},l=0===n?{x:0,y:0}:{x:n*Math.cos(e),y:n*Math.sin(e)},c=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)};return null!=cs(s.start.x,s.start.y,s.end.x,s.end.y,a.x,a.y,l.x,l.y)||null!=cs(s.start.x,s.start.y,s.end.x,s.end.y,r.x,r.y,c.x,c.y)||Cl(0,0,o,e,i,!0,s.start.x,s.start.y,s.end.x,s.end.y).length>0}jt.className="Line",jt.defaultStyles=Object.assign({},Q.defaultStyles,{fill:void 0,strokeWidth:1}),v([B({redraw:M.MAJOR}),b("design:type",Number)],jt.prototype,"x1",void 0),v([B({redraw:M.MAJOR}),b("design:type",Number)],jt.prototype,"y1",void 0),v([B({redraw:M.MAJOR}),b("design:type",Number)],jt.prototype,"x2",void 0),v([B({redraw:M.MAJOR}),b("design:type",Number)],jt.prototype,"y2",void 0);var Nt=function(s){return s[s.Move=0]="Move",s[s.Line=1]="Line",s[s.Arc=2]="Arc",s[s.Curve=3]="Curve",s[s.ClosePath=4]="ClosePath",s}(Nt||{});class Vi{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let n=0;t.beginPath();for(const o of e)switch(o){case Nt.Move:t.moveTo(i[n++],i[n++]);break;case Nt.Line:t.lineTo(i[n++],i[n++]);break;case Nt.Curve:t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);break;case Nt.Arc:t.arc(i[n++],i[n++],i[n++],i[n++],i[n++],1===i[n++]);break;case Nt.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(Nt.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(Nt.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()}arc(t,e,i,n,o,a=!1){const r=t+i*Math.cos(o),l=e+i*Math.sin(o);this.xy?(this.xy[0]=r,this.xy[1]=l):this.xy=[r,l],this.commands.push(Nt.Arc),this.params.push(t,e,i,n,o,a?1:0)}cubicCurveTo(t,e,i,n,o,a){this.xy||this.moveTo(t,e),this.commands.push(Nt.Curve),this.params.push(t,e,i,n,o,a),this.xy&&(this.xy[0]=o,this.xy[1]=a)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(Nt.ClosePath),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,n=this.params,o=i.length,a=-1e4,r=-1e4;let l=NaN,c=NaN,d=0,u=0,h=0;for(let f=0,g=0;f<o;f++)switch(i[f]){case Nt.Move:!isNaN(l)&&cs(l,c,d,u,a,r,t,e)&&h++,d=n[g++],l=d,u=n[g++],c=u;break;case Nt.Line:cs(d,u,n[g++],n[g++],a,r,t,e)&&h++,d=n[g-2],u=n[g-1];break;case Nt.Curve:h+=Op(d,u,n[g++],n[g++],n[g++],n[g++],n[g++],n[g++],a,r,t,e).length,d=n[g-2],u=n[g-1];break;case Nt.Arc:const m=n[g++],y=n[g++],x=n[g++],A=n[g++],S=n[g++];h+=Cl(m,y,x,A,S,!!n[g++],a,r,t,e).length,d=m+Math.cos(S)*x,u=y+Math.sin(S)*x;break;case Nt.ClosePath:!isNaN(l)&&cs(l,c,d,u,a,r,t,e)&&h++}return h%2==1}getPoints(){const{commands:t,params:e}=this,i=[];let n=0;for(let o=0;o<t.length;o++)switch(t[o]){case Nt.Move:case Nt.Line:i.push({x:e[n++],y:e[n++]});break;case Nt.Curve:n+=4,i.push({x:e[n++],y:e[n++]});break;case Nt.Arc:i.push({x:e[n++],y:e[n++]}),n+=4}return i}}function at(s){const{redraw:t=M.MAJOR,changeCb:e,convertor:i}=s??{};return B({redraw:t,type:"path",convertor:i,changeCb:e})}class me extends Q{constructor(){super(...arguments),this.path=new Vi,this.clipScalingX=1,this.clipScalingY=1,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,M.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,n;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e||null!==(n=null===(i=this.clipPath)||void 0===i?void 0:i.isDirty())&&void 0!==n&&n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}clip(t,e){const i=t.getTransform(),n=1!==this.clipScalingX||1!==this.clipScalingY;n&&t.scale(this.clipScalingX,this.clipScalingY),e(),n&&t.setTransform(i)}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;this.dirty!==M.NONE||n?(this.computeTransformMatrix(),this.matrix.toContext(i),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath&&null!=this.clipMode?(i.save(),"normal"===this.clipMode&&this.clip(i,()=>{var a;null===(a=this.clipPath)||void 0===a||a.draw(i),i.clip()}),this.clipScalingX>0&&this.clipScalingY>0&&(this.path.draw(i),this.fillStroke(i)),"punch-out"===this.clipMode&&this.clip(i,()=>{var a,r;null===(a=this.clipPath)||void 0===a||a.draw(i),i.clip();const{x:l=-1e4,y:c=-1e4,width:d=2e4,height:u=2e4}=null!==(r=this.computeBBox())&&void 0!==r?r:{};i.clearRect(l,c,d,u)}),i.restore()):(this.path.draw(i),this.fillStroke(i)),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)):o&&(o.nodesSkipped+=this.nodeCount.count)}}me.className="Path",v([at(),b("design:type",Vi)],me.prototype,"clipPath",void 0),v([at(),b("design:type",String)],me.prototype,"clipMode",void 0),v([at(),b("design:type",Object)],me.prototype,"clipScalingX",void 0),v([at(),b("design:type",Object)],me.prototype,"clipScalingY",void 0);class Le extends me{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){const t=this.outerRadius;return new H(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,{angleOffset:e,inset:i}=this,n=this.startAngle+e,o=this.endAngle+e,a=Math.abs(this.endAngle-this.startAngle)>=2*Math.PI,r=this.centerX,l=this.centerY;if(t.clear(),a){const c=this.innerRadius<=0?0:this.innerRadius+i,d=Math.min(c,this.outerRadius-i),u=Math.max(c,this.outerRadius-i);t.arc(r,l,u,n,o),d>0&&(t.moveTo(r+d*Math.cos(o),l+d*Math.sin(o)),t.arc(r,l,d,o,n,!0))}else{const c=Math.min(this.innerRadius+i,this.outerRadius-i),d=Math.max(this.innerRadius+i,this.outerRadius-i),u=c>0?i/c:0,h=d>0?i/d:0,f=Math.abs(o-n);if(f<2*h)return;const m=c<=i||f<2*u;if(m){const y=Math.abs(f)<.5*Math.PI?i*(1+Math.cos(f))/Math.sin(f):NaN;let x;x=y>0&&y<d?Math.max(Math.hypot(i,y),c):c;const A=.5*(n+o);t.moveTo(r+x*Math.cos(A),l+x*Math.sin(A))}else t.moveTo(r+c*Math.cos(n+u),l+c*Math.sin(n+u));t.arc(r,l,d,n+h,o-h),m||(c>0?t.arc(r,l,c,o-u,n+u,!0):t.lineTo(r,l))}t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,n=this.startAngle+i,o=this.endAngle+i,a=Math.min(this.innerRadius,this.outerRadius),r=Math.max(this.innerRadius,this.outerRadius),l=this.transformPoint(t,e);return Nl(l.x,l.y,{startAngle:n,endAngle:o,innerRadius:a,outerRadius:r})}}function ye(s,t){if(Ml(s)&&Ml(t)){const e={};return Object.keys(s).forEach(i=>{e[i]=i in t?ye(s[i],t[i]):s[i]}),Object.keys(t).forEach(i=>{i in s||(e[i]=t[i])}),e}return Array.isArray(s)&&!Array.isArray(t)||ua(s)&&!ua(t)?s:t}function ua(s){return"object"==typeof s&&null!==s}function ha(s){return ua(s)&&!Array.isArray(s)}function Ml(s){return ha(s)&&s.constructor===Object}function oe(...s){var t;const e={};for(const i of s){if(!i)continue;const n=Vo(i)?Ho(i):Object.keys(i);for(const o of n)ha(e[o])&&ha(i[o])?e[o]=oe(e[o],i[o]):null!==(t=e[o])&&void 0!==t||(e[o]=i[o])}return e}Le.className="Sector",v([at(),b("design:type",Number)],Le.prototype,"centerX",void 0),v([at(),b("design:type",Number)],Le.prototype,"centerY",void 0),v([at(),b("design:type",Number)],Le.prototype,"innerRadius",void 0),v([at(),b("design:type",Number)],Le.prototype,"outerRadius",void 0),v([at(),b("design:type",Number)],Le.prototype,"startAngle",void 0),v([at(),b("design:type",Number)],Le.prototype,"endAngle",void 0),v([at(),b("design:type",Number)],Le.prototype,"angleOffset",void 0),v([at(),b("design:type",Number)],Le.prototype,"inset",void 0);let vn=null;function xt(s){if(null!=s)return""===s?"":(vn??(vn=document.createElement("div")),vn.textContent=String(s),vn.innerHTML)}const pa=s=>"string"==typeof s,Rl=s=>!!s&&Object.prototype.hasOwnProperty.call(s,"toString")&&pa(s.toString());function fa(s){return ae(s)||!!(i=s)&&Object.prototype.hasOwnProperty.call(i,"valueOf")&&ae(i.valueOf())||(i=>i instanceof Date&&!isNaN(+i))(s);var i}function ds(s,t){return t&&fa(s)?s:t?void 0:function Ll(s){return pa(s)||Rl(s)}(s)?s:String(s)}const ae=s=>"number"==typeof s&&Number.isFinite(s),us=new Map;function so(s,t){var e,i,n;const o=JSON.stringify(s,null,0);return us.has(t)||us.set(t,new Map),!(null===(e=us.get(t))||void 0===e)&&e.has(o)||null===(i=us.get(t))||void 0===i||i.set(o,t(s)),null===(n=us.get(t))||void 0===n?void 0:n.get(o)}const ga={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let s=NaN;return(t=1/0,e)=>{const i=e.keys[0],n=Math.abs(i-s);return s=i,!isNaN(n)&&n>0&&n<t?n:t}}},Il={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:s}})=>{if(null!=s)return[...s].sort((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i]-e[i];if(0!==n)return n}return 0})}};function Np({normaliseTo:s,mode:t}){const e=(i,n)=>{const o=i*s/n;return o>=0?Math.min(s,o):Math.max(-s,o)};return()=>()=>(i,n)=>{const o=[0,0];for(const r of n){const l=i[r],c=l<0?0:1;"sum"===t?o[c]+=l:o[c]=0===c?Math.min(o[c],l):Math.max(o[c],l)}const a=Math.max(Math.abs(o[0]),o[1]);for(const r of n)i[r]=e(i[r],a)}}function oo(s,t,e,i="sum"){return{scopes:[s.id],type:"group-value-processor",matchGroupIds:t,adjust:so({normaliseTo:e,mode:i},Np)}}function wp({normaliseTo:s,zeroDomain:t,rangeMin:e,rangeMax:i}){const n=s[1]-s[0],o=(a,r,l)=>{const c=s[0]+(a-r)/l*n;return 0===l?t:c>=s[1]?s[1]:c<s[0]?s[0]:c};return()=>(a,r)=>{let[l,c]=a.domain.values[r];null!=e&&(l=e),null!=i&&(c=i);const d=c-l;a.domain.values[r]=[s[0],s[1]];for(const u of a.data){let h=u.values;"ungrouped"===a.type&&(h=[h]);for(const f of h)f[r]=o(f[r],l,d)}}}function ma(s,t,e,i,n,o){return{scopes:[s.id],type:"property-value-processor",property:t,adjust:so({normaliseTo:e,rangeMin:n,rangeMax:o,zeroDomain:i},wp)}}function hs(s,t=[]){return{type:"processor",scopes:[s.id],property:"animationValidation",calculate(e){var i;const{keys:n,values:o}=e.defs,{input:a,data:r}=e;let l=!0,c=!0;const d=[];for(let h=0;h<o.length;h++)null!==(i=o[h].scopes)&&void 0!==i&&i.some(f=>f===s.id)&&t.some(f=>o[h].id===f)&&d.push([h,o[h]]);const u=(h,f,g)=>{var m;if("category"===f.valueType)return void(l&&(l=e.domain[g][h].length===a.count));let y=null===(m=r[0])||void 0===m?void 0:m[g][h];for(let x=1;(l||c)&&x<r.length;x++){const A=r[x][g][h];c&&(c=y<=A),l&&(l=y!==A),y=A}};for(let h=0;(l||c)&&h<n.length;h++)u(h,n[h],"keys");for(let h=0;(l||c)&&h<d.length;h++){const[f,g]=d[h];u(f,g,"values")}return{uniqueKeys:l,orderedKeys:c}}}}function Mp({mode:s,separateNegative:t}){return()=>()=>(e,i)=>{const n=[0,0];for(const o of i){const a=e[o],r=is(a)&&t?0:1;"number"!=typeof a||isNaN(a)||("normal"===s&&(n[r]+=a),e[o]=n[r],"trailing"===s&&(n[r]+=a))}}}function Rp({mode:s,sum:t}){return()=>{const e=[];let i=!0;return()=>(n,o)=>{let a=0;for(const r of o){const l=n[r],c=i&&"current"===t?0:e[r];e[r]=l;const d="current"===t?l:c;"number"!=typeof l||isNaN(l)||"number"!=typeof c||isNaN(c)?n[r]=a:("normal"===s&&(a+=d),n[r]=a,"trailing"===s&&(a+=d))}i=!1}}}function Pl(s,t,e,i,n=!1){let o;return o=e.startsWith("window")?so({mode:e.endsWith("-trailing")?"trailing":"normal",sum:i},Rp):so({mode:e,separateNegative:n},Mp),{scopes:[s.id],type:"group-value-processor",matchGroupIds:[t],adjust:o}}function bn(s,t=!0){return{type:"processor",property:"diff",calculate:e=>{const i={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},n=new Map,o=new Map,a=new Map,r=new Map,l=new Map,c=new Map,d=new Map;for(let u=0;u<Math.max(s.data.length,e.data.length);u++){const h=s.data[u],f=e.data[u],g=h?xn(h.keys):"",m=f?xn(f.keys):"";g!==m?(r.has(m)?((t||!Jn(r.get(m).values,f.values))&&(a.set(m,f),c.set(m,u),n.set(m,f)),r.delete(m),d.delete(m)):f&&(o.set(m,f),l.set(m,u)),o.has(g)?((t||!Jn(o.get(g).values,h.values))&&(a.set(g,h),c.set(g,u),n.set(g,h)),o.delete(g),l.delete(g)):h&&(a.delete(g),c.delete(g),r.set(g,h),d.set(g,u))):Jn(h.values,f.values)||(a.set(m,f),c.set(m,u))}return i.added=Array.from(o.keys()),i.updated=Array.from(a.keys()),i.removed=Array.from(r.keys()),i.moved=Array.from(n.keys()),i.addedIndices=Array.from(l.values()),i.updatedIndices=Array.from(c.values()),i.removedIndices=Array.from(d.values()),i.changed=i.added.length>0||i.updated.length>0||i.removed.length>0,i}}}function xn(s){return s.join("___")}class zt{constructor(){this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Oi(this)}}function ao(s){const{parallelFlipRotation:t=0,regularFlipRotation:e=0}=s,i=s.rotation?$t(fe(s.rotation)):0,n=!i&&t>=0&&t<=Math.PI?-1:1,o=!i&&e>=0&&e<=Math.PI?-1:1;let a=0;return s.parallel?a=n*Math.PI/2:-1===o&&(a=Math.PI),{configuredRotation:i,defaultRotation:a,parallelFlipFlag:n,regularFlipFlag:o}}function ya(s,t,e,i,n){const o=t>0&&t<=Math.PI,a=e>0&&e<=Math.PI;if(s){if(!t&&!e)return"center";if(i*(o||a?-1:1)==-1)return"end"}else if(i*n==-1)return"end";return"start"}function Pp(s,t,e,i,n){const{width:o,height:a}=t,r=new H(e,i,0,0);n.transformBBox(r,t);const{x:l=0,y:c=0}=t;return t.width=o,t.height=a,{point:{x:l,y:c,size:0},label:{width:o,height:a,text:s}}}v([_(ot),b("design:type",Object)],zt.prototype,"enabled",void 0),v([_(_e),b("design:type",Object)],zt.prototype,"color",void 0),v([_(_i),b("design:type",String)],zt.prototype,"fontStyle",void 0),v([_(Ai),b("design:type",String)],zt.prototype,"fontWeight",void 0),v([_(I(0)),b("design:type",Object)],zt.prototype,"fontSize",void 0),v([_(Qt),b("design:type",Object)],zt.prototype,"fontFamily",void 0),v([_(ti),b("design:type",Function)],zt.prototype,"formatter",void 0);var ft=function(s){return s[s.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",s[s.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",s[s.AXIS_ZINDEX=20]="AXIS_ZINDEX",s[s.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",s[s.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",s[s.AXIS_FOREGROUND_ZINDEX=750]="AXIS_FOREGROUND_ZINDEX",s[s.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",s[s.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",s[s.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",s[s.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX",s}(ft||{});class Ae extends me{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,n=i/2;return new H(t-n,e-n,i,i)}applyPath(t,e){const{path:i}=this;let{x:n,y:o}=this;i.clear();for(const{x:a,y:r,t:l}of e)n+=a*t,o+=r*t,"move"===l?i.moveTo(n,o):i.lineTo(n,o);i.closePath()}}v([at(),b("design:type",Number)],Ae.prototype,"x",void 0),v([at(),b("design:type",Number)],Ae.prototype,"y",void 0),v([at({convertor:Math.abs}),b("design:type",Number)],Ae.prototype,"size",void 0);let ro=(()=>{class s extends Ae{updatePath(){const{x:e,y:i,path:n,size:o}=this,a=o/2;n.clear(),n.arc(e,i,a,0,2*Math.PI),n.closePath()}}return s.className="Circle",s})();const hi={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Sn={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"};class Fl{constructor(t){this.modules={},this.parent=t}destroy(){for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this.parent[t]}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(t.optionsKey in this.parent)throw new Error(`AG Charts - class already has option key '${t.optionsKey}'`);null==this.moduleContext&&(this.moduleContext=this.parent.createModuleContext());const e=new t.instanceConstructor(Object.assign({},this.moduleContext));this.modules[t.optionsKey]={instance:e},this.parent[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this.parent[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}*[Symbol.iterator](){for(const{instance:t}of Object.values(this.modules))yield t}}class lo{constructor(){this.registeredListeners=new Map}addListener(t,e,i){const n={symbol:Symbol(t),handler:e,meta:i};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(n):this.registeredListeners.set(t,[n]),()=>this.removeListener(n.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const n=i.findIndex(o=>o.symbol===t);if(n>=0){i.splice(n,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){const n=new class i{constructor(){this.results=void 0}push(a){var r;void 0!==a&&(null!==(r=this.results)&&void 0!==r||(this.results=[]),this.results.push(a))}};for(const o of this.getListenersByType(t))try{n.push(o.handler(...e))}catch(a){G.errorOnce(a)}return n.results}dispatchWrapHandlers(t,e,...i){for(const n of this.getListenersByType(t))try{e(n.handler,n.meta,...i)}catch(o){G.errorOnce(o)}}getListenersByType(t){var e;return null!==(e=this.registeredListeners.get(t))&&void 0!==e?e:[]}}class Bl{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null===(i=this.eventListeners.get(t))||void 0===i||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null===(e=this.eventListeners.get(t.type))||void 0===e||e.forEach(i=>i(t))}}function ps(s,t=[1/0,-1/0]){for(const e of s)"number"==typeof e&&(e<t[0]&&(t[0]=e),e>t[1]&&(t[1]=e));return t}function co(s,t=[0,0]){for(const e of s)"number"==typeof e&&(e<0&&(t[0]+=e),e>0&&(t[1]+=e));return t}function va(s,t){return{id:t,scopes:[s.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,i=[0,0])=>{var n,o;return i[0]+=null!==(n=e?.[0])&&void 0!==n?n:0,i[1]+=null!==(o=e?.[1])&&void 0!==o?o:0,i}}}function ba(s,t,e,i){const n={id:t,scopes:[s.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(o,a=[])=>{const r=a[1]-a[0];return e.aggregateFunction(o).map(l=>l/r)}};return e.groupAggregateFunction&&(n.groupAggregateFunction=e.groupAggregateFunction),n}function Ul(s){return()=>{let t=0;return e=>"number"!=typeof e||isNaN(e)?e:(t+=s?Math.max(0,e):e,t)}}var St=function(s){return s[s.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",s[s.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",s[s.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",s[s.NEAREST_NODE=3]="NEAREST_NODE",s}(St||{});function xa(s){return null!=ds(s,!0)}function zl(s){return null!=ds(s,!1)}function re(s,t,e,i={}){return Object.assign({scopes:[s.id],property:t,type:"key",valueType:e?"range":"category",validation:e?xa:zl},i)}function _t(s,t,e,i={}){return Object.assign({scopes:[s.id],property:t,type:"value",valueType:e?"range":"category",validation:e?xa:zl},i)}function Hl(s,t,e,i={}){const{onlyPositive:n}=i,o=pe(i,["onlyPositive"]);return Object.assign(Object.assign({},_t(s,t,e,o)),{processor:Ul(n)})}function Ei(s,t,e,i,n="current",o){return[_t(s,t,e,o),Pl(s,o.groupId,i,n,o.separateNegative)]}class uo{constructor(t,e,{datum:i},n){this.type=t,this.event=e,this.datum=i,this.seriesId=n.id}}class pi{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.lineDashOffset=void 0}}v([_(Ot),b("design:type",String)],pi.prototype,"fill",void 0),v([_(J(0,1)),b("design:type",Number)],pi.prototype,"fillOpacity",void 0),v([_(Ot),b("design:type",String)],pi.prototype,"stroke",void 0),v([_(J(0)),b("design:type",Number)],pi.prototype,"strokeWidth",void 0),v([_(J(0,1)),b("design:type",Number)],pi.prototype,"strokeOpacity",void 0),v([_(ki),b("design:type",Array)],pi.prototype,"lineDash",void 0),v([_(J(0)),b("design:type",Number)],pi.prototype,"lineDashOffset",void 0);class ho{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}v([_(J(0)),b("design:type",Number)],ho.prototype,"strokeWidth",void 0),v([_(J(0,1)),b("design:type",Number)],ho.prototype,"dimOpacity",void 0),v([_(Me),b("design:type",Boolean)],ho.prototype,"enabled",void 0);class Xl{constructor(){this.color="black"}}v([_(Ot),b("design:type",String)],Xl.prototype,"color",void 0);class Sa{constructor(){this.item=new pi,this.series=new ho,this.text=new Xl}}var ei=function(s){return s[s.None=0]="None",s[s.This=1]="This",s[s.Other=2]="Other",s}(ei||{});class Ie extends Bl{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.onDataChange()}get data(){var t;return null!==(t=this._data)&&void 0!==t?t:this._chartData}onDataChange(){this.nodeDataRefresh=!0}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}onSeriesGroupingChange(t,e){const{id:i,type:n,visible:o,rootGroup:a,highlightGroup:r,annotationGroup:l}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:n}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:n,visible:o,seriesGrouping:e}),null!=this.rootGroup.parent&&this.ctx.seriesLayerManager.changeGroup({id:i,type:n,rootGroup:a,highlightGroup:r,annotationGroup:l,getGroupZIndexSubOrder:c=>this.getGroupZIndexSubOrder(c),seriesGrouping:e,oldGrouping:t})}getBandScalePadding(){return{inner:1,outer:0}}constructor(t){super(),this.NodeClickEvent=uo,this.id=ci(this),this.rootGroup=new W({name:"seriesRoot",isVirtual:!0}),this.axes={[P.X]:void 0,[P.Y]:void 0},this.directions=[P.X,P.Y],this.nodeDataRefresh=!0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.seriesGrouping=void 0,this._declarationOrder=-1,this.seriesListeners=new lo,this.highlightStyle=new Sa,this.moduleMap=new Fl(this),this.nodeDataDependencies={},this.ctx=t.moduleCtx;const{useLabelLayer:e=!1,pickModes:i=[St.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:n={},directionNames:o={},contentGroupVirtual:a=!0,canHaveAxes:r=!1}=t;this.directionKeys=n,this.directionNames=o,this.canHaveAxes=r,this.contentGroup=this.rootGroup.appendChild(new W({name:`${this.id}-content`,layer:!a,isVirtual:a,zIndex:ft.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new W({name:`${this.id}-highlight`,layer:!a,isVirtual:a,zIndex:ft.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new W({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new W({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new W({name:`${this.id}-series-labels`,layer:e,zIndex:ft.SERIES_LABEL_ZINDEX})),this.annotationGroup=new W({name:`${this.id}-annotation`,layer:!a,isVirtual:a,zIndex:ft.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}getGroupZIndexSubOrder(t,e=0){let i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){return this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),n=e?.[i],o=[];if(!n)return o;const a=(...r)=>{for(const l of r)Array.isArray(l)?a(...l):"object"==typeof l?a(...Object.values(l)):o.push(l)};return a(...n.map(r=>this[r])),o}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){var e;const i=this.getSeriesDomain(t);return(null!==(e=this.dispatch("data-getDomain",{direction:t}))&&void 0!==e?e:[]).reduce((o,a)=>o.concat(a),i)}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:e=1,enabled:i=!0}=this.highlightStyle.series;if(!i||1===e)return 1;switch(this.isItemIdHighlighted()){case ei.None:case ei.This:return 1;default:return e}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case ei.This:return e;case ei.None:case ei.Other:return t}}isItemIdHighlighted(){var t,e;const{series:i}=null!==(e=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight())&&void 0!==e?e:{};return null==i?ei.None:i!==this?ei.Other:ei.This}getModuleTooltipParams(t){var e;return(null!==(e=this.dispatch("tooltip-getParams",{datum:t}))&&void 0!==e?e:[]).reduce((n,o)=>Object.assign(Object.assign({},o),n),{})}pickNode(t,e){const{pickModes:i,visible:n,rootGroup:o}=this;if(n&&o.visible)for(const a of i){if(e&&!e.includes(a))continue;let r;switch(a){case St.EXACT_SHAPE_MATCH:r=this.pickNodeExactShape(t);break;case St.NEAREST_BY_MAIN_AXIS_FIRST:case St.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:r=this.pickNodeMainAxisFirst(t,a===St.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case St.NEAREST_NODE:r=this.pickNodeClosestDatum(t)}if(r)return{pickMode:a,match:r.datum,distance:r.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",t,e,this))}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return Object.assign(Object.assign({},this.ctx),{series:this})}getLabelText(t,e,i=String){var n;return t.formatter&&null!==(n=this.ctx.callbackCache.call(t.formatter,Object.assign({seriesId:this.id},e)))&&void 0!==n?n:i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){var n,o;const r=oe({size:null!==(o=null===(n=e.datum.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0},i);return t.formatter?oe(this.ctx.callbackCache.call(t.formatter,Object.assign(Object.assign(Object.assign({seriesId:this.id},r),e),{datum:e.datum.datum})),r):r}updateMarkerStyle(t,e,i,n=e.getStyle(),{applyTranslation:o=!0}={}){const{point:a}=i.datum,r=this.getMarkerStyle(e,i,n),l=this.visible&&r.size>0&&a&&!isNaN(a.x)&&!isNaN(a.y);t.setProperties(o?Object.assign(Object.assign({visible:l},r),{translationX:a?.x,translationY:a?.y}):Object.assign({visible:l},r)),"function"==typeof e.shape&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}getMinRect(){}checkResize(t){const e={seriesRectWidth:t?.width,seriesRectHeight:t?.height},i=null!=qe(this.nodeDataDependencies,e);return i&&(this.nodeDataDependencies=e,this.markNodeDataDirty()),i}}function Dt({id:s},t,e,i){di(s,t,e,i,{opacity:0},{opacity:1},rs)}function po({id:s},t,e,i){di(s,t,e,i,{opacity:1},{opacity:0},rs)}function Di(s){return{opacity:1}}Ie.highlightedZIndex=1e12,v([_(Qt),b("design:type",Object)],Ie.prototype,"id",void 0),v([_(ot),b("design:type",Object)],Ie.prototype,"_visible",void 0),v([_(ot),b("design:type",Object)],Ie.prototype,"showInLegend",void 0),v([_(Qt),b("design:type",Object)],Ie.prototype,"cursor",void 0),v([_(na),b("design:type",Object)],Ie.prototype,"nodeClickRange",void 0),v([Zt({changeValue:function(s,t){this.onSeriesGroupingChange(t,s)}}),b("design:type",Object)],Ie.prototype,"seriesGrouping",void 0);const fo={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function _a(s,t=new Date(s.getFullYear(),0,1)){const e=s.getTimezoneOffset()-t.getTimezoneOffset(),i=s.getTime()-t.getTime()+6e4*e;return Math.floor(i/864e5)}function Kl(s,t){const n=(t-new Date(s.getFullYear(),0,1).getDay()+7)%7,o=new Date(s.getFullYear(),0,n+1);return o<=s?Math.floor(_a(s,o)/7)+1:0}function ql(s,t=s.getFullYear()){const i=new Date(t,0,1).getDay(),o=new Date(t,0,(4-i+7)%7-3+1);return o<=s?Math.floor(_a(s,o)/7)+1:ql(s,t-1)}const Vp={a:s=>fo.shortDays[s.getDay()],A:s=>fo.days[s.getDay()],b:s=>fo.shortMonths[s.getMonth()],B:s=>fo.months[s.getMonth()],c:"%x, %X",d:(s,t)=>Wt(s.getDate(),2,t??"0"),e:"%_d",f:(s,t)=>Wt(1e3*s.getMilliseconds(),6,t??"0"),H:(s,t)=>Wt(s.getHours(),2,t??"0"),I:(s,t)=>{const e=s.getHours()%12;return 0===e?"12":Wt(e,2,t??"0")},j:(s,t)=>Wt(_a(s)+1,3,t??"0"),m:(s,t)=>Wt(s.getMonth()+1,2,t??"0"),M:(s,t)=>Wt(s.getMinutes(),2,t??"0"),L:(s,t)=>Wt(s.getMilliseconds(),3,t??"0"),p:s=>s.getHours()<12?"AM":"PM",Q:s=>String(s.getTime()),s:s=>String(Math.floor(s.getTime()/1e3)),S:(s,t)=>Wt(s.getSeconds(),2,t??"0"),u:s=>{let t=s.getDay();return t<1&&(t+=7),String(t%7)},U:(s,t)=>Wt(Kl(s,0),2,t??"0"),V:(s,t)=>Wt(ql(s),2,t??"0"),w:(s,t)=>Wt(s.getDay(),2,t??"0"),W:(s,t)=>Wt(Kl(s,1),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(s,t)=>Wt(s.getFullYear()%100,2,t??"0"),Y:(s,t)=>Wt(s.getFullYear(),4,t??"0"),Z:s=>function Wp(s){const t=s.getTimezoneOffset(),e=Math.abs(t);return`${t>0?"-":"+"}${Wt(Math.floor(e/60),2,"0")}${Wt(Math.floor(e%60),2,"0")}`}(s),"%":()=>"%"},Hp={_:" ",0:"0","-":""};function Wt(s,t,e){const i=String(Math.floor(s));return i.length>=t?i:`${e.repeat(t-i.length)}${i}`}function go(s){const t=[];for(;s.length>0;){let e=s.indexOf("%");if(0!==e){const r=e>0?s.substring(0,e):s;t.push(r)}if(e<0)break;const n=Hp[s[e+1]];null!=n&&e++;const o=s[e+1],a=Vp[o];if("function"==typeof a)t.push([a,n]);else if("string"==typeof a){const r=go(a);t.push([r,n])}else t.push(`${n??""}${o}`);s=s.substring(e+2)}return e=>{const i="number"==typeof e?new Date(e):e;return t.map(n=>"string"==typeof n?n:n[0](i,n[1])).join("")}}const Xp=/(#\{(.*?)\})/g;function Jl(s,t,e){return s.replace(Xp,function(...i){const n=i[2],[o,a]=n.split(":"),r=t[o];if("number"==typeof r){const l=a&&e&&e[a];if(l){const{locales:c,options:d}=l;return r.toLocaleString(c,d)}return String(r)}if(r instanceof Date){const l=a&&e&&e[a];return"string"==typeof l?go(l)(r):r.toDateString()}return"string"==typeof r||r?.toString?String(r):""})}function Aa(s,t){const e=s.createElement("style");e.innerHTML=t,s.head.insertBefore(e,s.head.querySelector("style"))}const Gt="ag-chart-tooltip",Ql="ag-chart-dark-tooltip",Kp=`\n.${Gt} {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.${Gt}-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.${Gt}-no-animation {\n    transition: none !important;\n}\n\n.${Gt}-hidden {\n    visibility: hidden;\n}\n\n.${Gt}-title {\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n}\n\n.${Gt}-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.${Gt}-content {\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n}\n\n.${Gt}-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${Gt}-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${Gt}.${Ql} {\n    color: white;\n    background: #15181c;\n}\n\n.${Gt}.${Ql} .${Gt}-content {\n    border-color: rgba(255, 255, 255, 0.15);\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n`;function fs(s,t){var e,i,n;if("string"==typeof s)return s;const{content:o=(null!==(e=t?.content)&&void 0!==e?e:""),title:a=t?.title,color:r=(null!==(i=t?.color)&&void 0!==i?i:"white"),backgroundColor:l=(null!==(n=t?.backgroundColor)&&void 0!==n?n:"#888")}=s;return`${a?`<div class="${Gt}-title"\n        style="color: ${r}; background-color: ${l}">${a}</div>`:""}${o?`<div class="${Gt}-content">${o}</div>`:""}`}const $p=["pointer","node"],Zp=U(s=>$p.includes(s),"expecting a position type keyword such as 'pointer' or 'node'");class gs{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}v([_(Zp),b("design:type",String)],gs.prototype,"type",void 0),v([_(I()),b("design:type",Number)],gs.prototype,"xOffset",void 0),v([_(I()),b("design:type",Number)],gs.prototype,"yOffset",void 0);class Pe{constructor(t,e,i,n){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.lastVisibilityChange=Date.now(),this.position=new gs,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n,this.window=i;const o=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(o),this.element.classList.add(Gt),this.canvasElement=t,typeof IntersectionObserver<"u"){const a=new IntersectionObserver(r=>{for(const l of r)l.target===this.canvasElement&&0===l.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});a.observe(this.canvasElement),this.observer=a}Pe.tooltipDocuments.indexOf(e)<0&&(Aa(e,Kp),Pe.tooltipDocuments.push(e))}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains(Gt+"-hidden")}updateClass(t,e){const{element:i,class:n,lastClass:o,enableInteraction:a,lastVisibilityChange:r}=this,l=this.isVisible(),c=!!t;let d=1/0;if(l!==c){const m=Date.now();d=m-r,this.lastVisibilityChange=m}const u=(m,y)=>{const x=`${Gt}-${m}`;y?i.classList.add(x):i.classList.remove(x)};d>5&&u("no-animation",!l&&c&&d>100),u("no-interaction",!a),u("hidden",!t),u("arrow",!!e),n!==o&&(o&&i.classList.remove(o),n&&i.classList.add(n),this.lastClass=n)}show(t,e,i=!1){var n,o,a,r,l,c,d;const{element:u,canvasElement:h}=this;if(void 0!==e)u.innerHTML=e;else if(!u.innerHTML)return void this.toggle(!1);const f=(N,L,F)=>Math.max(Math.min(L,F),N),g=null!==(o=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==o?o:0,m=null!==(r=null===(a=t.position)||void 0===a?void 0:a.yOffset)&&void 0!==r?r:0,y=h.getBoundingClientRect(),x=y.left+t.offsetX-u.clientWidth/2+g,A=y.top+t.offsetY-u.clientHeight-8+m,S=this.getWindowBoundingBox(),E=S.y+S.height-u.clientHeight,O=f(S.x,x,S.x+S.width-u.clientWidth-1),D=f(S.y,A,E),C=null!==(c=null!==(l=t.showArrow)&&void 0!==l?l:this.showArrow)&&void 0!==c?c:!(O!==x||D!==A||g||m);if(this.updateShowArrow(C),u.style.transform=`translate(${Math.round(O)}px, ${Math.round(D)}px)`,this.enableInteraction=null!==(d=t.enableInteraction)&&void 0!==d&&d,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=this.window.setTimeout(()=>{this.toggle(!0)},this.delay));this.toggle(!0)}getWindowBoundingBox(){return new H(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(t){t||this.window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,o=!!["","-title","-content"].filter(a=>i?.contains(`${Gt}${a}`));return void 0!==i&&o}updateShowArrow(t){this._showArrow=t}}Pe.tooltipDocuments=[],v([_(ot),b("design:type",Boolean)],Pe.prototype,"enabled",void 0),v([_(Me),b("design:type",Boolean)],Pe.prototype,"showArrow",void 0),v([_(j),b("design:type",String)],Pe.prototype,"class",void 0),v([_(I(0)),b("design:type",Number)],Pe.prototype,"delay",void 0),v([_(na),b("design:type",Object)],Pe.prototype,"range",void 0);class tc{constructor(){this.enabled=!1}}v([_(ot),b("design:type",Object)],tc.prototype,"enabled",void 0);class ke{constructor(){this.enabled=!0,this.showArrow=void 0,this.format=void 0,this.renderer=void 0,this.interaction=new tc,this.position=new gs}toTooltipHtml(t,e,i){var n,o;const a=null!==(n=i?.format)&&void 0!==n?n:this.format,r=null!==(o=i?.renderer)&&void 0!==o?o:this.renderer;return a?fs({content:Jl(a,e)},t):r?fs(r(e),t):fs(t)}}function ka(s,t,e,i){const n=[e.convert(0),e.convert(1)],o=[i.convert(0),i.convert(1)],a=Math.PI/-2+fe(t);return{nodes:{toFn:(h,f,g,{prevLive:m})=>{var y,x;let{startAngle:A,endAngle:S,innerRadius:k,outerRadius:E}=f;const{stroke:O,fill:D}=f.sectorFormat;if("removed"===g&&m?(A=null===(y=m.datum)||void 0===y?void 0:y.endAngle,S=null===(x=m.datum)||void 0===x?void 0:x.endAngle):"removed"===g&&!m&&(A=a,S=a),"removed"===g){const T=(({radius:h})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*h}))(f);k=T.innerRadius,E=T.outerRadius}return{startAngle:A,endAngle:S,outerRadius:E,innerRadius:k,stroke:O,fill:D}},fromFn:(h,f,g,{prevFromProps:m})=>{var y,x,A,S,k,E;let{startAngle:O,endAngle:D,innerRadius:T,outerRadius:w}=h,{fill:C,stroke:N}=f.sectorFormat;if("unknown"===g||"added"===g&&!m?(O=a,D=a,T=f.innerRadius,w=f.outerRadius):"added"===g&&m&&(O=null!==(y=m.endAngle)&&void 0!==y?y:a,D=null!==(x=m.endAngle)&&void 0!==x?x:a,T=null!==(A=m.innerRadius)&&void 0!==A?A:f.innerRadius,w=null!==(S=m.outerRadius)&&void 0!==S?S:f.outerRadius),"added"===g&&!s){const L=(({radius:h})=>({innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*h}))(f);T=L.innerRadius,w=L.outerRadius}return"updated"===g&&(C=null!==(k=h.fill)&&void 0!==k?k:C,N=null!==(E=h.stroke)&&void 0!==E?E:N),{startAngle:O,endAngle:D,innerRadius:T,outerRadius:w,fill:C,stroke:N}}},innerCircle:{fromFn:(h,f)=>{var g,m,y;return{size:null!==(y=null!==(m=null===(g=h.previousDatum)||void 0===g?void 0:g.radius)&&void 0!==m?m:h.size)&&void 0!==y?y:0}},toFn:(h,f)=>{var g;return{size:null!==(g=f.radius)&&void 0!==g?g:0}}}}}function qp(s,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,fill:t.sectorFormat.fill,stroke:t.sectorFormat.stroke}}function It(s,t){const e=eo(s),i=e?s:[],n=e?[]:s;for(const o of n){for(const a of o.nodes()){const r=t(a,a.datum);a.setProperties(r)}o.cleanup()}for(const o of i){const a=t(o,o.datum);o.setProperties(a)}}v([_(ot),b("design:type",Object)],ke.prototype,"enabled",void 0),v([_(Me),b("design:type",Boolean)],ke.prototype,"showArrow",void 0),v([_(j),b("design:type",String)],ke.prototype,"format",void 0),v([_(ti),b("design:type",Function)],ke.prototype,"renderer",void 0);var Jp=Object.freeze({__proto__:null,resetMotion:It});class ms{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=Mt.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,n;const o=this.states[this.state],a=o?.[t];if(!a)return void this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey");let r=this.state;return"string"==typeof a?r=a:"object"==typeof a&&(r=a.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${r}`,"color: green"),null===(i=this.preTransitionCb)||void 0===i||i.call(this,this.state,r),this.state=r,"function"==typeof a?a(e):"object"==typeof a&&(null===(n=a.action)||void 0===n||n.call(a,e)),this.state}}class ec extends Ie{isContinuous(){var t,e;return{isContinuousX:rt.is(null===(t=this.axes[P.X])||void 0===t?void 0:t.scale),isContinuousY:rt.is(null===(e=this.axes[P.Y])||void 0===e?void 0:e.scale)}}requestDataModel(t,e,i){var n;return R(this,void 0,void 0,function*(){const o=i.props,a=null!==(n=this.dispatch("data-prerequest",this.isContinuous()))&&void 0!==n?n:[];for(const c of a)o.push(...c);const{dataModel:r,processedData:l}=yield t.request(this.id,e??[],Object.assign(Object.assign({},i),{props:o}));return this.dataModel=r,this.processedData=l,this.dispatch("data-processed",{dataModel:r,processedData:l}),{dataModel:r,processedData:l}})}isProcessedDataAnimatable(){var t,e;const i=null===(e=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===e?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:n,uniqueKeys:o}=i;return!!n&&!!o}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}}class Oa extends ec{constructor(t){var{useLabelLayer:e=!1,pickModes:i=[St.EXACT_SHAPE_MATCH],canHaveAxes:n=!1,animationResetFns:o}=t,a=pe(t,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(Object.assign(Object.assign({},a),{useLabelLayer:e,pickModes:i,contentGroupVirtual:!1,directionKeys:{[P.X]:["angleKey"],[P.Y]:["radiusKey"]},directionNames:{[P.X]:["angleName"],[P.Y]:["radiusName"]},canHaveAxes:n})),this.sectorGroup=this.contentGroup.appendChild(new W),this.itemSelection=lt.select(this.sectorGroup,()=>this.nodeFactory(),!1),this.labelSelection=lt.select(this.labelGroup,z,!1),this.highlightSelection=lt.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.sectorGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=o,this.animationState=new ms("empty",{empty:{update:{target:"ready",action:r=>this.animateEmptyUpdateReady(r)}},ready:{updateData:"waiting",clear:"clearing",highlight:r=>this.animateReadyHighlight(r),highlightMarkers:r=>this.animateReadyHighlightMarkers(r),resize:r=>this.animateReadyResize(r)},waiting:{update:{target:"ready",action:r=>this.animateWaitingUpdateReady(r)}},clearing:{update:{target:"empty",action:r=>this.animateClearingUpdateEmpty(r)}}},()=>this.checkProcessedDataAnimatable())}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=null!==(t=this.animationResetFns)&&void 0!==t?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&It([this.itemSelection,this.highlightSelection],e),i&&It([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=null!==(e=this.animationResetFns)&&void 0!==e?e:{};i&&It([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}}class Qp extends uo{constructor(t,e,i,n){super(t,e,i,n),this.angleKey=n.angleKey,this.radiusKey=n.radiusKey,this.calloutLabelKey=n.calloutLabelKey,this.sectorLabelKey=n.sectorLabelKey}}var ys=function(s){return s[s.Sector=0]="Sector",s[s.Callout=1]="Callout",s[s.Label=2]="Label",s}(ys||{});class _n extends zt{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}}v([_(I(0)),b("design:type",Object)],_n.prototype,"offset",void 0),v([_(I(0)),b("design:type",Object)],_n.prototype,"minAngle",void 0),v([_(I(0)),b("design:type",Object)],_n.prototype,"minSpacing",void 0),v([_(I(0)),b("design:type",Object)],_n.prototype,"maxCollisionOffset",void 0),v([_(ot),b("design:type",Object)],_n.prototype,"avoidCollisions",void 0);class Ea extends zt{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}}v([_(I()),b("design:type",Object)],Ea.prototype,"positionOffset",void 0),v([_(I(0,1)),b("design:type",Object)],Ea.prototype,"positionRatio",void 0);class mo{constructor(){this.length=10,this.strokeWidth=1}}v([_(ss),b("design:type",Array)],mo.prototype,"colors",void 0),v([_(I(0)),b("design:type",Number)],mo.prototype,"length",void 0),v([_(I(0)),b("design:type",Number)],mo.prototype,"strokeWidth",void 0);class ic extends bt{constructor(){super(...arguments),this.showInLegend=!1}}v([_(ot),b("design:type",Object)],ic.prototype,"showInLegend",void 0);class Da extends zt{constructor(){super(...arguments),this.text="",this.margin=2}}v([_(Qt),b("design:type",Object)],Da.prototype,"text",void 0),v([_(I()),b("design:type",Object)],Da.prototype,"margin",void 0);class Ta{constructor(){this.fill="transparent",this.fillOpacity=1}}v([_(_e),b("design:type",Object)],Ta.prototype,"fill",void 0),v([_(J(0,1)),b("design:type",Object)],Ta.prototype,"fillOpacity",void 0);class ct extends Oa{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:qp,label:Di}}),this.previousRadiusScale=new Wi,this.radiusScale=new Wi,this.backgroundGroup=this.rootGroup.appendChild(new W({name:`${this.id}-background`,layer:!0,zIndex:ft.SERIES_BACKGROUND_ZINDEX})),this.innertCircleGroup=this.backgroundGroup.appendChild(new W({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new _n,this.sectorLabel=new Ea,this.calloutLine=new mo,this.tooltip=new ke,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=Object.values(hi),this.strokes=Object.values(Sn),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new Sa,this.surroundingRadius=void 0,this.NodeClickEvent=Qp,this.angleScale=new Wi,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(o=>o+Math.PI/2);const e=new W({name:"pieCalloutLabels"}),i=new W({name:"pieSectorLabels"}),n=new W({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(n),this.calloutLabelSelection=lt.select(e,W),this.sectorLabelSelection=lt.select(i,z),this.innerLabelsSelection=lt.select(n,z),this.innerCircleSelection=lt.select(this.innertCircleGroup,ro)}addChartEventListeners(){var t;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",e=>this.onLegendItemClick(e))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=e?.map(()=>i))&&void 0!==t?t:[]}nodeFactory(){return new Le}getSeriesDomain(t){return t===P.X?this.angleScale.domain:this.radiusScale.domain}processData(t){var e,i;return R(this,void 0,void 0,function*(){let{data:n}=this;const{angleKey:o,radiusKey:a,calloutLabelKey:r,sectorLabelKey:l,legendItemKey:c,seriesItemEnabled:d}=this;if(null==o||null==n)return;const u=!this.ctx.animationManager.isSkipped(),h=[],f=[];c?h.push(re(this,c,!1,{id:"legendItemKey"})):r?h.push(re(this,r,!1,{id:"calloutLabelKey"})):l&&h.push(re(this,l,!1,{id:"sectorLabelKey"})),a&&f.push(function Wl(s,t,e={}){const{min:i=-1/0,max:n=1/0}=e,o=pe(e,["min","max"]);return Object.assign({scopes:[s.id],type:"value",property:t,valueType:"range",validation:xa,processor:()=>a=>"number"!=typeof a||isNaN(a)?a:Math.min(Math.max(a,i),n)},o)}(this,a,{id:"radiusValue",min:null!==(e=this.radiusMin)&&void 0!==e?e:0,max:this.radiusMax}),_t(this,a,!0,{id:"radiusRaw"}),ma(this,{id:"radiusValue"},[0,1],1,null!==(i=this.radiusMin)&&void 0!==i?i:0,this.radiusMax)),r&&f.push(_t(this,r,!1,{id:"calloutLabelValue"})),l&&f.push(_t(this,l,!1,{id:"sectorLabelValue"})),c&&f.push(_t(this,c,!1,{id:"legendItemValue"})),u&&this.processedData&&h.length>0&&f.push(bn(this.processedData)),f.push(hs(this)),n=n.map((g,m)=>d[m]?g:Object.assign(Object.assign({},g),{[o]:0})),yield this.requestDataModel(t,n,{props:[...h,Hl(this,o,!0,{id:"angleValue",onlyPositive:!0}),_t(this,o,!0,{id:"angleRaw"}),ma(this,{id:"angleValue"},[0,1],0,0),...f]}),this.animationState.transition("updateData")})}maybeRefreshNodeData(){return R(this,void 0,void 0,function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1})}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return R(this,void 0,void 0,function*(){const{id:t,processedData:e,dataModel:i,rotation:n,angleScale:o}=this;if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:a,radiusIdx:r,calloutLabelIdx:l,sectorLabelIdx:c,legendItemIdx:d}=this.getProcessedDataIndexes(i);let u=0;const h=e.data.map((f,g)=>{var m;const{datum:y,values:x}=f,A=x[a],S=o.convert(u)+fe(n);u=A;const k=o.convert(u)+fe(n),E=Math.abs(k-S),O=S+E/2,D=x[a+1],T=r>=0&&null!==(m=x[r])&&void 0!==m?m:1,w=r>=0?x[r+1]:void 0,C=d>=0?x[d]:void 0,N=this.getLabels(y,O,E,!0,x[l],x[c],C),L=this.getSectorFormat(y,g,!1);return Object.assign({itemId:g,series:this,datum:y,index:g,angleValue:D,midAngle:O,midCos:Math.cos(O),midSin:Math.sin(O),startAngle:S,endAngle:k,sectorFormat:L,radiusValue:w,radius:T,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(T),0),legendItemValue:C},N)});return[{itemId:t,nodeData:h,labelData:h}]})}getLabels(t,e,i,n,o,a,r){const{calloutLabel:l,sectorLabel:c,legendItemKey:d}=this,u=!n||l.enabled?this.calloutLabelKey:void 0,h=!n||c.enabled?this.sectorLabelKey:void 0;if(!u&&!h&&!d)return{};const f={datum:t,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName,legendItemKey:this.legendItemKey},g={};return u&&i>fe(l.minAngle)&&(g.calloutLabel=Object.assign(Object.assign({},this.getTextAlignment(e)),{text:this.getLabelText(l,Object.assign(Object.assign({},f),{value:o})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),h&&(g.sectorLabel={text:this.getLabelText(c,Object.assign(Object.assign({},f),{value:a}))}),null!=d&&null!=r&&(g.legendItem={key:d,text:r}),g}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Vs(t),n=-3*Math.PI/4;return e[function Zo(s,t){return s>=0?Math.floor(s%t):Math.floor(s%t+t)}(Math.floor((i-n)/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var n,o,a,r,l;const{angleKey:c,radiusKey:d,fills:u,strokes:h,formatter:f,id:g,ctx:{callbackCache:m,highlightManager:y}}=this,x=y.getActiveHighlight(),A=i&&x?.series===this&&e===x.itemId,{fill:S,fillOpacity:k,stroke:E,strokeWidth:O,strokeOpacity:D}=oe(A&&this.highlightStyle.item,{fill:u[e%u.length],fillOpacity:this.fillOpacity,stroke:h[e%h.length],strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.getOpacity()});let T;return f&&(T=m.call(f,{datum:t,angleKey:c,radiusKey:d,fill:S,stroke:E,fills:u,strokes:h,strokeWidth:O,highlighted:A,seriesId:g})),{fill:null!==(n=T?.fill)&&void 0!==n?n:S,fillOpacity:null!==(o=T?.fillOpacity)&&void 0!==o?o:k,stroke:null!==(a=T?.stroke)&&void 0!==a?a:E,strokeWidth:null!==(r=T?.strokeWidth)&&void 0!==r?r:O,strokeOpacity:null!==(l=T?.strokeOpacity)&&void 0!==l?l:D}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,n=t*e+i;return n===t||n<0?0:n}getOuterRadius(){return Math.max(this.radius*this.outerRadiusRatio+this.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(i=>{var{radius:n}=i,o=pe(i,["radius"]);return Object.assign(Object.assign({},o),{radius:n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);return 0===i?NaN:-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update({seriesRect:t}){return R(this,void 0,void 0,function*(){const{title:e}=this,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},n=null!=qe(this.nodeDataDependencies,i);if(n&&(this.nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const o=this.getTitleTranslationY(),a=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(o)&&!this.bboxIntersectsSurroundingSeries(a,0,o),e.node.translationY=isFinite(o)?o:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)})}updateTitleNodes(){var t,e;const{title:i,oldTitle:n}=this;n!==i&&(n&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(n.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return R(this,void 0,void 0,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return R(this,void 0,void 0,function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:o}=this,a=(r,l)=>{let c=this.nodeData;l&&(c=c.map(d=>Object.assign(Object.assign({},d),{sectorFormat:Object.assign({},d.sectorFormat)}))),r.update(c),this.ctx.animationManager.isSkipped()&&r.cleanup()};a(t,!1),a(e,!0),i.update(this.nodeData,r=>{const l=new jt;l.tag=ys.Callout,l.pointerEvents=te.None,r.appendChild(l);const c=new z;c.tag=ys.Label,c.pointerEvents=te.None,r.appendChild(c)}),n.update(this.nodeData,r=>{r.pointerEvents=te.None}),o.update(this.innerLabels,r=>{r.pointerEvents=te.None})})}updateInnerCircleSelection(){const{innerCircle:t}=this;let e=0;const i=this.getInnerRadius();if(i>0){const o=Math.min(i,this.getOuterRadius());e=Math.ceil(2*o+1)}this.innerCircleSelection.update(t?[{radius:e}]:[])}updateNodes(t){return R(this,void 0,void 0,function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((o,{radius:a})=>{var r,l;o.setProperties({fill:null===(r=this.innerCircle)||void 0===r?void 0:r.fill,opacity:null===(l=this.innerCircle)||void 0===l?void 0:l.fillOpacity,size:a})});const n=(o,a,r,l)=>{const c=this.getSectorFormat(a.datum,a.itemId,l);a.sectorFormat.fill=c.fill,a.sectorFormat.stroke=c.stroke;const d=this.ctx.animationManager.isSkipped();d&&(o.startAngle=a.startAngle,o.endAngle=a.endAngle,o.innerRadius=a.innerRadius,o.outerRadius=a.outerRadius),(l||d)&&(o.fill=c.fill,o.stroke=c.stroke),o.strokeWidth=c.strokeWidth,o.fillOpacity=c.fillOpacity,o.strokeOpacity=this.strokeOpacity,o.lineDash=this.lineDash,o.lineDashOffset=this.lineDashOffset,o.fillShadow=this.shadow,o.lineJoin="round"};this.itemSelection.each((o,a,r)=>n(o,a,0,!1)),this.highlightSelection.each((o,a,r)=>{const l=e?.series===this&&o.datum.itemId===e.itemId;n(o,a,0,l),o.visible=l}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.animationState.transition("update")})}updateCalloutLineNodes(){var t;const{calloutLine:e}=this,i=e.length,n=e.strokeWidth,o=null!==(t=e.colors)&&void 0!==t?t:this.strokes,{offset:a}=this.calloutLabel;this.calloutLabelSelection.selectByTag(ys.Callout).forEach((r,l)=>{const c=r.datum,{calloutLabel:d,outerRadius:u}=c;if(d?.text&&!d.hidden&&0!==u){r.visible=!0,r.strokeWidth=n,r.stroke=o[l%o.length],r.fill=void 0;const h=c.midCos*u,f=c.midSin*u;let g=c.midCos*(u+i),m=c.midSin*(u+i);if((d.collisionTextAlign||0!==d.collisionOffsetY)&&null!=d.box){const x=d.box;let A=g,S=m;g<x.x?A=x.x:g>x.x+x.width&&(A=x.x+x.width),m<x.y?S=x.y:m>x.y+x.height&&(S=x.y+x.height);const k=A-g,E=S-m,O=Math.sqrt(Math.pow(k,2)+Math.pow(E,2)),D=O-a;D>0&&(g+=k*D/O,m+=E*D/O)}r.x1=h,r.y1=f,r.x2=g,r.y2=m}else r.visible=!1})}getLabelOverflow(t,e,i){const n=i.x-this.centerX,o=i.x+i.width-this.centerX;let c=1;e.x+1<n?c=(e.x+e.width-n)/e.width:e.x+e.width-1>o&&(c=(o-e.x)/e.width);const d=e.y+1<i.y-this.centerY||e.y+e.height-1>i.y+i.height-this.centerY;return{textLength:1===c?t.length:Math.floor(t.length*c)-1,hasVerticalOverflow:d,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:n}=this;if(null==n)return!1;const o=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],a=Math.pow(n,2);return o.some(r=>Math.pow(r.x,2)+Math.pow(r.y,2)>a)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:n,minSpacing:o}=e,a=t.convert(0),l=this.nodeData,c=this.nodeData.filter(S=>!(S=>!S.calloutLabel||0===S.outerRadius)(S));if(c.forEach(S=>{const k=S.calloutLabel;null!=k&&(k.hidden=!1,k.collisionTextAlign=void 0,k.collisionOffsetY=0)}),c.length<=1)return;const d=c.filter(S=>S.midCos<0).sort((S,k)=>S.midSin-k.midSin),u=c.filter(S=>S.midCos>=0).sort((S,k)=>S.midSin-k.midSin),h=c.filter(S=>{var k;return S.midSin<0&&"center"===(null===(k=S.calloutLabel)||void 0===k?void 0:k.textAlign)}).sort((S,k)=>S.midCos-k.midCos),f=c.filter(S=>{var k;return S.midSin>=0&&"center"===(null===(k=S.calloutLabel)||void 0===k?void 0:k.textAlign)}).sort((S,k)=>S.midCos-k.midCos),g=new z,m=S=>{var k;const E=S.calloutLabel;if(null==E)return new H(0,0,0,0);const O=S.outerRadius+i.length+n,D=S.midCos*O,T=S.midSin*O+E.collisionOffsetY;return g.text=E.text,g.x=D,g.y=T,g.setFont(this.calloutLabel),g.setAlign({textAlign:null!==(k=E.collisionTextAlign)&&void 0!==k?k:E.textAlign,textBaseline:E.textBaseline}),g.computeBBox()},y=(S,k,E)=>{const O=m(S).grow(o/2),D=m(k).grow(o/2);O.x<D.x+D.width&&O.x+O.width>D.x&&("to-top"===E?O.y<D.y+D.height:O.y+O.height>D.y)&&(k.calloutLabel.collisionOffsetY="to-top"===E?O.y-D.y-D.height:O.y+O.height-D.y)},x=S=>{const k=S.slice().sort((O,D)=>Math.abs(O.midSin)-Math.abs(D.midSin))[0],E=S.indexOf(k);for(let O=E-1;O>=0;O--)y(S[O+1],S[O],"to-top");for(let O=E+1;O<S.length;O++)y(S[O-1],S[O],"to-bottom")},A=S=>{const k=c.some(C=>0!==C.calloutLabel.collisionOffsetY),E=S.map(C=>m(C)),O=E.map(C=>C.clone().grow(o/2));let D=!1;for(let C=0;C<O.length&&!D;C++){const N=O[C];for(let L=C+1;L<S.length;L++)if(N.collidesBBox(O[L])){D=!0;break}}const T=l.map(C=>{const{startAngle:N,endAngle:L,outerRadius:F}=C;return{startAngle:N,endAngle:L,innerRadius:a,outerRadius:F}}),w=E.some(C=>T.some(N=>function Ep(s,t){const n={x:s.x,y:s.y+s.height},o={x:s.x+s.width,y:s.y+s.height};return wl({start:{x:s.x,y:s.y},end:{x:s.x+s.width,y:s.y}},t)||wl({start:n,end:o},t)}(C,N)));!D&&!k&&!w||S.filter(C=>"center"===C.calloutLabel.textAlign).forEach(C=>{C.calloutLabel.collisionTextAlign=C.midCos<0?"right":C.midCos>0?"left":"center"})};x(d),x(u),A(h),A(f)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:n}=this,o=n.length,{offset:a,color:r}=i,l=new z;this.calloutLabelSelection.selectByTag(ys.Label).forEach(c=>{var d;const{datum:u}=c,h=u.calloutLabel,f=e.convert(u.radius),g=Math.max(0,f);if(!h?.text||0===g||h.hidden)return void(c.visible=!1);const m=g+o+a,y=u.midCos*m,x=u.midSin*m+h.collisionOffsetY,A={textAlign:null!==(d=h.collisionTextAlign)&&void 0!==d?d:h.textAlign,textBaseline:h.textBaseline};l.text=h.text,l.x=y,l.y=x,l.setFont(this.calloutLabel),l.setAlign(A);const S=l.computeBBox();let k=h.text,E=!0;if(i.avoidCollisions){const{textLength:O,hasVerticalOverflow:D}=this.getLabelOverflow(h.text,S,t);k=h.text.length===O?h.text:`${h.text.substring(0,O)}\u2026`,E=!D}c.text=k,c.x=y,c.y=x,c.setFont(this.calloutLabel),c.setAlign(A),c.fill=r,c.visible=E})}computeLabelsBBox(t,e){var i;return R(this,void 0,void 0,function*(){const{calloutLabel:n,calloutLine:o}=this,a=o.length,{offset:r,maxCollisionOffset:l,minSpacing:c}=n;if(!n.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const d=[],u=new z;let h;if(null!==(i=this.title)&&void 0!==i&&i.text&&this.title.enabled){const f=this.getTitleTranslationY();isFinite(f)&&(u.text=this.title.text,u.x=0,u.y=f,u.setFont(this.title),u.setAlign({textBaseline:"bottom",textAlign:"center"}),h=u.computeBBox(),d.push(h))}return this.nodeData.forEach(f=>{var g;const m=f.calloutLabel;if(!m||0===f.outerRadius)return null;const y=f.outerRadius+a+r,x=f.midCos*y,A=f.midSin*y+m.collisionOffsetY;u.text=m.text,u.x=x,u.y=A,u.setFont(this.calloutLabel),u.setAlign({textAlign:null!==(g=m.collisionTextAlign)&&void 0!==g?g:m.textAlign,textBaseline:m.textBaseline});const S=u.computeBBox();if(m.box=S,Math.abs(m.collisionOffsetY)>l)m.hidden=!0;else{if(h){const k=e.y-this.centerY,E=new H(h.x-c,k,h.width+2*c,h.y+h.height+c-k);if(S.collidesBBox(E))return void(m.hidden=!0)}if(t.hideWhenNecessary){const{textLength:k,hasVerticalOverflow:E,hasSurroundingSeriesOverflow:O}=this.getLabelOverflow(m.text,S,e);if(E||m.text.length>2&&k<2||O)return void(m.hidden=!0)}m.hidden=!1,d.push(S)}}),0===d.length?null:H.merge(d)})}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:o,fontFamily:a,positionOffset:r,positionRatio:l,color:c}=this.sectorLabel,d=e>0,u=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((h,f)=>{const{sectorLabel:g,outerRadius:m}=f;let y=!1;if(g&&0!==m){const x=e*(1-l)+m*l+r;h.fill=c,h.fontStyle=n,h.fontWeight=o,h.fontSize=i,h.fontFamily=a,h.text=g.text,!d&&u?(h.x=0,h.y=0):(h.x=f.midCos*x,h.y=f.midSin*x),h.textAlign="center",h.textBaseline="middle";const S=h.computeBBox(),k=[[S.x,S.y],[S.x+S.width,S.y],[S.x+S.width,S.y+S.height],[S.x,S.y+S.height]],{startAngle:E,endAngle:O}=f,D={startAngle:E,endAngle:O,innerRadius:e,outerRadius:m};k.every(([T,w])=>Nl(T,w,D))&&(y=!0)}h.visible=y})}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((u,h)=>{const{fontStyle:f,fontWeight:g,fontSize:m,fontFamily:y,color:x}=h;u.fontStyle=f,u.fontWeight=g,u.fontSize=m,u.fontFamily=y,u.text=h.text,u.x=0,u.y=0,u.fill=x,u.textAlign="center",u.textBaseline="alphabetic",t.push(u.computeBBox()),e.push(h.margin)});const i=u=>0===u?0:e[u],n=u=>u===e.length-1?0:e[u],o=t.reduce((u,h,f)=>u+h.height+i(f)+n(f),0),a=Math.max(...t.map(u=>u.width)),r=this.getInnerRadius(),c=Math.sqrt(Math.pow(a/2,2)+Math.pow(o/2,2))<=(r>0?r:this.getOuterRadius()),d=[];for(let u=0,h=-o/2;u<t.length;u++){const g=t[u].height+h+i(u);d.push(g),h=g+n(u)}this.innerLabelsSelection.each((u,h,f)=>{u.y=d[f],u.visible=c})}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:n,legendItemKey:o}=this,{sectorLabel:a,calloutLabel:r,legendItem:l}=t;return o&&void 0!==l?l.text:i&&i!==e&&void 0!==r?.text?r.text:n&&n!==e&&void 0!==a?.text?a.text:void 0}getTooltipHtml(t){var e;if(!this.angleKey)return"";const{datum:i,angleValue:n,sectorFormat:{fill:o}}=t,a=xt(null===(e=this.title)||void 0===e?void 0:e.text),r=ae(n)?function $o(s,t=2){const e=Math.floor(Math.log(Math.abs(s))/Math.LN10);return e>=0||!isFinite(e)?s.toFixed(t):s.toFixed(Math.abs(e)-1+t)}(n):String(n),l=this.getDatumLegendName(t);return this.tooltip.toTooltipHtml({title:a??l,content:a&&l?`${l}: ${r}`:r,backgroundColor:o},{datum:i,title:a,color:o,seriesId:this.id,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName})}getLegendData(t){var e,i,n,o,a;const{processedData:r,angleKey:l,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:u,id:h,dataModel:f}=this;if(!f||!r||0===r.data.length||"category"!==t)return[];if(!(u||c&&c!==l||d&&d!==l))return[];const{calloutLabelIdx:g,sectorLabelIdx:m,legendItemIdx:y}=this.getProcessedDataIndexes(f),x=(null===(e=this.title)||void 0===e?void 0:e.showInLegend)&&this.title.text,A=[];for(let S=0;S<r.data.length;S++){const{datum:k,values:E}=r.data[S],O=[];x&&O.push(x);const D=this.getLabels(k,2*Math.PI,2*Math.PI,!1,E[g],E[m],E[y]);if(u&&void 0!==D.legendItem?O.push(D.legendItem.text):c&&c!==l&&void 0!==(null===(i=D.calloutLabel)||void 0===i?void 0:i.text)?O.push(null===(n=D.calloutLabel)||void 0===n?void 0:n.text):d&&d!==l&&void 0!==(null===(o=D.sectorLabel)||void 0===o?void 0:o.text)&&O.push(null===(a=D.sectorLabel)||void 0===a?void 0:a.text),0===O.length)continue;const T=this.getSectorFormat(k,S,!1);A.push({legendType:"category",id:h,itemId:S,seriesId:h,enabled:this.seriesItemEnabled[S],label:{text:O.join(" - ")},marker:{fill:T.fill,stroke:T.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity,strokeWidth:this.strokeWidth}})}return A}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id?this.toggleSeriesItem(i,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var n,o;const{legendItemKey:a,dataModel:r}=this;if(!a||!r)return;const l=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((d,u)=>u===e)[t.legendItemKey]);if(!l)return;const c=r.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(o=this.processedData)||void 0===o||o.data.forEach(({values:d},u)=>{d[c]===l&&this.toggleSeriesItem(u,i)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=ka(!0,this.rotation,this.radiusScale,this.previousRadiusScale);Ct(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Ct(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),Dt(this,"callout",e,[this.calloutLabelSelection]),Dt(this,"sector",e,[this.sectorLabelSelection]),Dt(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,n,o,a;const{itemSelection:r,highlightSelection:l,processedData:c,radiusScale:d,previousRadiusScale:u}=this,{animationManager:h}=this.ctx,f=null===(t=c?.reduced)||void 0===t?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const g=0===(null!==(e=f?.moved.length)&&void 0!==e?e:0)&&f?.addedIndices.every(A=>!f.removedIndices.includes(A)),m=(null!==(i=c?.defs.keys.length)&&void 0!==i?i:0)>0,y=null===(a=null===(o=null===(n=c?.reduced)||void 0===n?void 0:n.animationValidation)||void 0===o?void 0:o.uniqueKeys)||void 0===a||a;(!g||!m||!y)&&this.ctx.animationManager.skipCurrentBatch();const x=ka(!1,this.rotation,d,u);Ct(this.id,"nodes",h,[r,l],x.nodes,(A,S)=>this.getDatumId(S),f),Ct(this.id,"innerCircle",h,[this.innerCircleSelection],x.innerCircle),Dt(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Dt(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Dt(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,a=ka(!1,this.rotation,i,n);Ct(this.id,"nodes",o,[t,e],a.nodes),Ct(this.id,"innerCircle",o,[this.innerCircleSelection],a.innerCircle),po(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),po(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),po(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,n;const{calloutLabelKey:o,sectorLabelKey:a,legendItemKey:r}=this;if(null!==(n=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.animationValidation)&&void 0!==n&&n.uniqueKeys){if(r)return t[r];if(o)return t[o];if(a)return t[a]}}getDatumId(t){var e;const{index:i}=t;return null!==(e=this.getDatumIdFromData(t.datum))&&void 0!==e?e:`${i}`}onDataChange(){this.processSeriesItemEnabled()}}ct.className="PieSeries",ct.type="pie",v([_(Qt),b("design:type",Object)],ct.prototype,"angleKey",void 0),v([_(Qt),b("design:type",Object)],ct.prototype,"angleName",void 0),v([_(j),b("design:type",String)],ct.prototype,"radiusKey",void 0),v([_(j),b("design:type",String)],ct.prototype,"radiusName",void 0),v([_(J(0)),b("design:type",Number)],ct.prototype,"radiusMin",void 0),v([_(J(0)),b("design:type",Number)],ct.prototype,"radiusMax",void 0),v([_(j),b("design:type",String)],ct.prototype,"calloutLabelKey",void 0),v([_(j),b("design:type",String)],ct.prototype,"calloutLabelName",void 0),v([_(j),b("design:type",String)],ct.prototype,"sectorLabelKey",void 0),v([_(j),b("design:type",String)],ct.prototype,"sectorLabelName",void 0),v([_(j),b("design:type",String)],ct.prototype,"legendItemKey",void 0),v([_(fn),b("design:type",Array)],ct.prototype,"fills",void 0),v([_(fn),b("design:type",Array)],ct.prototype,"strokes",void 0),v([_(I(0,1)),b("design:type",Object)],ct.prototype,"fillOpacity",void 0),v([_(I(0,1)),b("design:type",Object)],ct.prototype,"strokeOpacity",void 0),v([_(ki),b("design:type",Array)],ct.prototype,"lineDash",void 0),v([_(I(0)),b("design:type",Number)],ct.prototype,"lineDashOffset",void 0),v([_(ti),b("design:type",Function)],ct.prototype,"formatter",void 0),v([_(I(-360,360)),b("design:type",Object)],ct.prototype,"rotation",void 0),v([_(I()),b("design:type",Object)],ct.prototype,"outerRadiusOffset",void 0),v([_(I(0)),b("design:type",Object)],ct.prototype,"outerRadiusRatio",void 0),v([_(I()),b("design:type",Object)],ct.prototype,"innerRadiusOffset",void 0),v([_(I(0)),b("design:type",Object)],ct.prototype,"innerRadiusRatio",void 0),v([_(I(0)),b("design:type",Object)],ct.prototype,"strokeWidth",void 0);const vs={constructors:{},constructedArrays:new WeakMap};const sc={constructors:{title:bt,subtitle:bt,footnote:bt,shadow:zi,innerCircle:Ta,"axes[].title":Re,"series[].innerLabels[]":Da},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function oc(){return{constructors:Object.assign(Object.assign({},sc.constructors),vs.constructors),constructedArrays:vs.constructedArrays,allowedTypes:Object.assign({},sc.allowedTypes)}}class ii extends Q{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new H(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===M.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:a,y1:r,x2:l,y2:c}=this;a=this.align(a),r=this.align(r),l=this.align(l),c=this.align(c);const{fill:d,opacity:u,isRange:h}=this;if(h&&d){const{fillOpacity:S}=this;i.fillStyle=d,i.globalAlpha=u*S,i.beginPath(),i.moveTo(a,r),i.lineTo(l,r),i.lineTo(l,c),i.lineTo(a,c),i.closePath(),i.fill()}const{stroke:g,strokeWidth:m,startLine:y,endLine:x}=this;if((y||x)&&g&&m){const{strokeOpacity:S,lineDash:k,lineDashOffset:E,lineCap:O,lineJoin:D}=this;i.strokeStyle=g,i.globalAlpha=u*S,i.lineWidth=m,k&&i.setLineDash(k),E&&(i.lineDashOffset=E),O&&(i.lineCap=O),D&&(i.lineJoin=D),i.beginPath(),y&&(i.moveTo(a,r),i.lineTo(l,r)),x&&(i.moveTo(l,c),i.lineTo(a,c)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}ii.className="Range",ii.defaultStyles=Object.assign(Object.assign({},Q.defaultStyles),{strokeWidth:1}),v([B({redraw:M.MINOR}),b("design:type",Number)],ii.prototype,"x1",void 0),v([B({redraw:M.MINOR}),b("design:type",Number)],ii.prototype,"y1",void 0),v([B({redraw:M.MINOR}),b("design:type",Number)],ii.prototype,"x2",void 0),v([B({redraw:M.MINOR}),b("design:type",Number)],ii.prototype,"y2",void 0),v([B({redraw:M.MINOR}),b("design:type",Boolean)],ii.prototype,"startLine",void 0),v([B({redraw:M.MINOR}),b("design:type",Boolean)],ii.prototype,"endLine",void 0),v([B({redraw:M.MINOR}),b("design:type",Boolean)],ii.prototype,"isRange",void 0);const tf={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},ef={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function ac({yDirection:s,padding:t=0,position:e="top",bbox:i}){const n=s?tf:ef,{xTranslationDirection:o,yTranslationDirection:a}=n[e];return{xTranslation:o*(t+(s?i.width:i.height)/2),yTranslation:a*(t+(s?i.height:i.width)/2)}}const Ca=({yDirection:s,xEnd:t,yStart:e,yEnd:i})=>s?{x:t/2,y:e}:{x:t,y:isNaN(i)?e:(e+i)/2},rc=({yDirection:s,xStart:t,xEnd:e,yStart:i,yEnd:n})=>s?{x:t,y:isNaN(n)?i:(i+n)/2}:{x:e/2,y:i},lc=({yDirection:s,xEnd:t,yStart:e,yEnd:i})=>s?{x:t,y:isNaN(i)?e:(e+i)/2}:{x:t/2,y:isNaN(i)?e:i},cc=({yDirection:s,xStart:t,xEnd:e,yStart:i,yEnd:n})=>s?{x:e/2,y:isNaN(n)?i:n}:{x:t,y:isNaN(n)?i:(i+n)/2},dc=({yDirection:s,xStart:t,xEnd:e,yStart:i})=>s?{x:t/2,y:i}:{x:e,y:i},uc=({yDirection:s,xStart:t,yStart:e,yEnd:i})=>s?{x:t,y:isNaN(i)?e:i}:{x:t,y:e},hc=({yDirection:s,xEnd:t,yStart:e,yEnd:i})=>s?{x:t,y:e}:{x:t,y:isNaN(i)?e:i},pc=({yDirection:s,xStart:t,xEnd:e,yStart:i,yEnd:n})=>s?{x:e,y:isNaN(n)?i:n}:{x:t,y:isNaN(n)?i:n},of={top:{c:Ca},bottom:{c:cc},left:{c:rc},right:{c:lc},topLeft:{c:dc},topRight:{c:hc},bottomLeft:{c:uc},bottomRight:{c:pc},inside:{c:({xEnd:s,yStart:t,yEnd:e})=>({x:s/2,y:isNaN(e)?t:(t+e)/2})},insideLeft:{c:rc},insideRight:{c:lc},insideTop:{c:Ca},insideBottom:{c:cc},insideTopLeft:{c:dc},insideBottomLeft:{c:uc},insideTopRight:{c:hc},insideBottomRight:{c:pc}},af=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],rf=U((s,t)=>vt(s,t,e=>af.includes(e)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),lf=U((s,t)=>vt(s,t,e=>"range"===e||"line"===e),"expecting a crossLine type keyword such as 'range' or 'line'");class Oe{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}v([_(Me),b("design:type",Boolean)],Oe.prototype,"enabled",void 0),v([_(j),b("design:type",String)],Oe.prototype,"text",void 0),v([_(_i),b("design:type",String)],Oe.prototype,"fontStyle",void 0),v([_(Ai),b("design:type",String)],Oe.prototype,"fontWeight",void 0),v([_(I(0)),b("design:type",Number)],Oe.prototype,"fontSize",void 0),v([_(Qt),b("design:type",String)],Oe.prototype,"fontFamily",void 0),v([_(I()),b("design:type",Number)],Oe.prototype,"padding",void 0),v([_(Ot),b("design:type",String)],Oe.prototype,"color",void 0),v([_(rf),b("design:type",String)],Oe.prototype,"position",void 0),v([_(J(-360,360)),b("design:type",Number)],Oe.prototype,"rotation",void 0),v([_(Me),b("design:type",Boolean)],Oe.prototype,"parallel",void 0);class Pt{constructor(){this.id=ci(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Oe,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=P.X,this.group=new W({name:`${this.id}`,layer:!0,zIndex:Pt.LINE_LAYER_ZINDEX}),this.crossLineRange=new ii,this.crossLineLabel=new z,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=te.None}update(t){this.enabled&&t&&0!==this.data.length?(this.group.visible=!0,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()):this.group.visible=!1}calculateLayout(t){if(!t||!this.createNodeData())return;const{sideFlag:i,gridLength:n,data:o}=this,a=[],l=i*n,c=o[0],d=o[1],u=new H(Math.min(0,l),Math.min(c,d),Math.abs(0-l),Math.abs(c-d));a.push(u);const h=this.computeLabelBBox();return h&&a.push(h),H.merge(a)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:n,sideFlag:o,direction:a,label:{position:r="top"},clippedRange:l,strokeWidth:c=0}=this;if(this.data=[],!i)return!1;const d=null!==(t=i.bandwidth)&&void 0!==t?t:0,u=S=>Math.max(Math.min(...l),Math.min(Math.max(...l),S)),[h,f]=[0,o*n];let[g,m]=this.getRange(),[y,x]=[Number(i.convert(g,{clampMode:"clamped"})),i.convert(m,{clampMode:"clamped"})+d];y=u(y),x=u(x),[g,m]=[Number(i.convert(g)),i.convert(m)+d];const A=!isNaN(y)&&!isNaN(x)&&(g===y||m===x||y!==x)&&Math.abs(x-y)>0;if(A&&y!==Math.min(y,x)&&([y,x]=[Math.min(y,x),Math.max(y,x)],[g,m]=[m,g]),this.isRange=A,this.startLine=!isNaN(g)&&c>0&&g===y,this.endLine=!isNaN(m)&&c>0&&m===x,!A&&!this.startLine&&!this.endLine)return!1;if(this.data=[y,x],this.label.enabled){const S=a===P.Y,{c:k=Ca}=null!==(e=of[r])&&void 0!==e?e:{},{x:E,y:O}=k({yDirection:S,xStart:h,xEnd:f,yStart:y,yEnd:x});this.labelPoint={x:E,y:O}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:n,data:o,startLine:a,endLine:r,isRange:l,fill:c,fillOpacity:d,stroke:u,strokeWidth:h,lineDash:f}=this;e.x1=0,e.x2=i*n,e.y1=o[0],e.y2=o[1],e.startLine=a,e.endLine=r,e.isRange=l,e.fill=c,e.fillOpacity=d??1,e.stroke=u,e.strokeWidth=h??1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=f}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:n,rotation:o,position:a="top",padding:r=0},direction:l,parallelFlipRotation:c,regularFlipRotation:d}=this;if(void 0===e||void 0===i)return;const{defaultRotation:u,configuredRotation:h}=ao({rotation:o,parallel:n,regularFlipRotation:d,parallelFlipRotation:c});t.rotation=u+h,t.textBaseline="middle",t.textAlign="center";const f=t.computeTransformedBBox();if(!f)return;const g=l===P.Y,{xTranslation:m,yTranslation:y}=ac({yDirection:g,padding:r,position:a,bbox:f});t.translationX=e+m,t.translationY=i+y}getZIndex(t=!1){return t?Pt.RANGE_LAYER_ZINDEX:Pt.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,n=rt.is(i);let[o,a]=e??[t,void 0];return!n&&void 0===a&&(a=o),o=null!=ds(o,n)?o:void 0,a=null!=ds(a,n)?a:void 0,n&&o===a&&(a=void 0),void 0===o&&void 0!==a&&(o=a,a=void 0),[o,a]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new z;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:n}={},label:{parallel:o,rotation:a,position:r="top",padding:l=0},direction:c,parallelFlipRotation:d,regularFlipRotation:u}=this;if(void 0===i||void 0===n)return;const{configuredRotation:h}=ao({rotation:a,parallel:o,regularFlipRotation:u,parallelFlipRotation:d});e.rotation=h,e.textBaseline="middle",e.textAlign="center";const f=e.computeTransformedBBox();if(!f)return;const g=c===P.Y,{xTranslation:m,yTranslation:y}=ac({yDirection:g,padding:l,position:r,bbox:f});return e.translationX=i+m,e.translationY=n+y,e.computeTransformedBBox()}calculatePadding(t){var e,i,n,o,a,r,l,c;const{isRange:d,startLine:u,endLine:h,direction:f,label:{padding:g=0,position:m="top"}}=this;if(!d&&!u&&!h)return;const y=this.computeLabelBBox(),x=y?.x,A=y?.y;if(!y||null==x||null==A)return;const S=function nf({yDirection:s,bbox:t,padding:e=0,position:i="top"}){const n={};return i.startsWith("inside")||("top"!==i||s?"bottom"!==i||s?"left"===i&&s?n.left=e+t.width:"right"===i&&s&&(n.right=e+t.width):n.bottom=e+t.height:n.top=e+t.height),n}({yDirection:f===P.Y,padding:g,position:m,bbox:y});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=S.left)&&void 0!==i?i:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(o=S.right)&&void 0!==o?o:0),t.top=Math.max(null!==(a=t.top)&&void 0!==a?a:0,null!==(r=S.top)&&void 0!==r?r:0),t.bottom=Math.max(null!==(l=t.bottom)&&void 0!==l?l:0,null!==(c=S.bottom)&&void 0!==c?c:0)}}Pt.LINE_LAYER_ZINDEX=ft.SERIES_CROSSLINE_LINE_ZINDEX,Pt.RANGE_LAYER_ZINDEX=ft.SERIES_CROSSLINE_RANGE_ZINDEX,Pt.className="CrossLine",v([_(Me),b("design:type",Boolean)],Pt.prototype,"enabled",void 0),v([_(lf),b("design:type",String)],Pt.prototype,"type",void 0),v([_(Xs(2)),b("design:type",Array)],Pt.prototype,"range",void 0),v([_(Ot),b("design:type",String)],Pt.prototype,"fill",void 0),v([_(J(0,1)),b("design:type",Number)],Pt.prototype,"fillOpacity",void 0),v([_(Ot),b("design:type",String)],Pt.prototype,"stroke",void 0),v([_(J()),b("design:type",Number)],Pt.prototype,"strokeWidth",void 0),v([_(J(0,1)),b("design:type",Number)],Pt.prototype,"strokeOpacity",void 0),v([_(ki),b("design:type",Array)],Pt.prototype,"lineDash",void 0);const fc=s=>s;class An extends rt{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=fc,this.basePow=fc,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=n=>Math.log(n)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?An.pow10:t===Math.E?Math.exp:i=>Math.pow(t,i),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),n=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,n]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[n,o]=this.getDomain();let a=this.log(n),r=this.log(o);if(this.interval){const y=Math.abs(this.interval),x=Math.abs(r-a),A=ls(a,r,Math.min(x,y)).map(S=>this.pow(S)).filter(S=>S>=n&&S<=o);if(!this.isDenseInterval({start:n,stop:o,interval:y,count:A.length}))return A}if(i%1!=0||r-a>=e)return no(a,r,Math.min(r-a,e)).map(y=>this.pow(y));const d=[],u=n>0;a=Math.floor(a)-1,r=Math.round(r)+1;const h=Math.min(...this.range),g=(Math.max(...this.range)-h)/e;let m=1/0;for(let y=a;y<=r;y++){const x=this.convert(this.pow(y+1));for(let A=1;A<i;A++){const S=u?A:i-A+1,k=this.pow(y)*S,E=this.convert(k),O=Math.abs(m-E),D=Math.abs(E-x);k>=n&&k<=o&&(1===A||O>=g&&D>=g)&&(d.push(k),m=E)}}return d}tickFormat({count:t,ticks:e,specifier:i}){const{base:n}=this;return null==i&&(i=10===n?".0e":","),"string"==typeof i&&(i=xl(i)),t===1/0?i:(null==e&&this.ticks(),o=>i(o))}}v([_(I(0)),b("design:type",Object)],An.prototype,"base",void 0);var st=function(s){return s[s.MILLISECOND=0]="MILLISECOND",s[s.SECOND=1]="SECOND",s[s.MINUTE=2]="MINUTE",s[s.HOUR=3]="HOUR",s[s.WEEK_DAY=4]="WEEK_DAY",s[s.SHORT_MONTH=5]="SHORT_MONTH",s[s.MONTH=6]="MONTH",s[s.SHORT_YEAR=7]="SHORT_YEAR",s[s.YEAR=8]="YEAR",s}(st||{});const Hi={[st.MILLISECOND]:".%L",[st.SECOND]:":%S",[st.MINUTE]:"%I:%M",[st.HOUR]:"%I %p",[st.WEEK_DAY]:"%a",[st.SHORT_MONTH]:"%b %d",[st.MONTH]:"%B",[st.SHORT_YEAR]:"%y",[st.YEAR]:"%Y"};function Fe(s){return s instanceof Date?s.getTime():s}class Na extends rt{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=Ir,this.month=Lr,this.week=Rr,this.day=Mr,this.hour=wr,this.minute=Cr,this.second=Dr,this.millisecond=Or,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,he],[this.minute,5,5*he],[this.minute,15,15*he],[this.minute,30,30*he],[this.hour,1,Ke],[this.hour,3,3*Ke],[this.hour,6,6*Ke],[this.hour,12,12*Ke],[this.day,1,Si],[this.day,2,2*Si],[this.week,1,$n],[this.week,2,2*$n],[this.week,3,3*$n],[this.month,1,Zn],[this.month,2,2*Zn],[this.month,3,3*Zn],[this.month,4,4*Zn],[this.month,6,6*Zn],[this.year,1,js]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=st.YEAR;const i=c=>{c<e&&(e=c)};for(const c of t)i(this.getLowestGranularityFormat(c));const n=Fe(t[0]),o=Fe(t[t.length-1]),a=new Date(n).getFullYear(),l=new Date(o).getFullYear()-a>0;return this.buildFormatString(e,l)}buildFormatString(t,e){let i=[Hi[t]],n=0;const o=this.getDomain(),a=Math.min(...o.map(Fe)),l=Math.max(...o.map(Fe))-a;switch(t){case st.SECOND:l/he>1&&i.push(Hi[st.MINUTE]);case st.MINUTE:l/Ke>1&&i.push(Hi[st.HOUR]);case st.HOUR:n=i.length,l/Si>1&&i.push(Hi[st.WEEK_DAY]);case st.WEEK_DAY:if(l/$n>1||e){const c=i.indexOf(Hi[st.WEEK_DAY]);c>-1&&i.splice(c,1,Hi[st.SHORT_MONTH])}case st.SHORT_MONTH:case st.MONTH:(l/js>1||e)&&i.push(Hi[st.YEAR])}return n<i.length&&(i=[...i.slice(0,n),i.slice(n).join(" ")]),n>0&&(i=[...i.slice(0,n).reverse(),...i.slice(n)],n<i.length&&i.splice(n,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?st.MILLISECOND:this.minute.floor(t)<t?st.SECOND:this.hour.floor(t)<t?st.MINUTE:this.day.floor(t)<t?st.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?st.WEEK_DAY:st.SHORT_MONTH:this.year.floor(t)<t?st.MONTH:st.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return i=>go(e)(i)}getTickInterval({start:t,stop:e,count:i,minCount:n,maxCount:o}){const{tickIntervals:a}=this;let r,l;const c=i??rt.defaultTickCount,d=Math.abs(e-t)/Math.max(c,1);let u=0;for(;u<a.length&&d>a[u][2];)u++;if(0===u)l=Math.max(yn(t,e,c,n,o),1),r=this.millisecond;else if(u===a.length)l=yn(t/js,e/js,c,n,o),r=this.year;else{const g=d-a[u-1][2]<a[u][2]-d?u-1:u;[r,l]=a[g]}return r.every(l)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(Fe);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:i}=this;if(2===i)return this.niceDomain;if(1===i)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:i,tickIntervals:n}=this;if(!i)return[];if(i instanceof Kn){const u=i.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:i,count:u.length})?this.getDefaultTicks({start:t,stop:e}):u}const o=Math.abs(i);if(this.isDenseInterval({start:t,stop:e,interval:o}))return this.getDefaultTicks({start:t,stop:e});const a=[...n];a.reverse();const r=a.find(u=>o%u[2]==0);if(r)return r[0].every(o/(r[2]/r[1])).range(new Date(t),new Date(e));let l=new Date(t);const c=new Date(e),d=[];for(;l<=c;)d.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+o);return d}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):go(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[e,i]=this.domain;for(let n=0;n<4;n++){this.updateNiceDomainIteration(e,i);const[o,a]=this.niceDomain;if(Fe(e)===Fe(o)&&Fe(i)===Fe(a))break;e=o,i=a}}updateNiceDomainIteration(t,e){const i=Fe(t),n=Fe(e),{interval:o}=this;let a;if(o instanceof Kn)a=o;else{const r="number"==typeof o?(n-i)/Math.max(o,1):this.tickCount;a=this.getTickInterval({start:i,stop:n,count:r,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(a){const r=a.range(t,e,!0);this.niceDomain=[r[0],r[r.length-1]]}}}class Ti{constructor(t=0,e=t,i=t,n=e){this.top=t,this.right=e,this.bottom=i,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}}function cf(s,t){return s.length===t.length&&s.every((e,i)=>Number(e)===Number(t[i]))}function df(s,t,e,i,n){let o=s.x;s.x<t?o=t:s.x>t+i&&(o=t+i);let a=s.y;s.y<e?a=e:s.y>e+n&&(a=e+n);const r=s.x-o,l=s.y-a;return Math.sqrt(r*r+l*l)<=.5*s.size}function gc(s,t,e,i,n){return s.x+s.width>t&&s.x<t+i&&s.y+s.height>e&&s.y<e+n}function uf(s,t,e,i,n){return t+i<s.x+s.width&&t>s.x&&e>s.y&&e+n<s.y+s.height}v([_(I(0)),b("design:type",Number)],Ti.prototype,"top",void 0),v([_(I(0)),b("design:type",Number)],Ti.prototype,"right",void 0),v([_(I(0)),b("design:type",Number)],Ti.prototype,"bottom",void 0),v([_(I(0)),b("design:type",Number)],Ti.prototype,"left",void 0);const gf=["stroke","lineDash"],mf=U(ri(void 0,s=>{for(const t in s)if(!gf.includes(t))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");class yo{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}}function fi(s,t=[void 0]){return ts((e,i,n)=>t.includes(n)?s:n)}v([_(ot),b("design:type",Object)],yo.prototype,"enabled",void 0),v([_(I(0)),b("design:type",Number)],yo.prototype,"width",void 0),v([_(mf),b("design:type",Array)],yo.prototype,"style",void 0);class Lt{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return Oi(this)}}v([_(ot),b("design:type",Object)],Lt.prototype,"enabled",void 0),v([_(Me),b("design:type",Boolean)],Lt.prototype,"autoWrap",void 0),v([_(J(0)),b("design:type",Number)],Lt.prototype,"maxWidth",void 0),v([_(J(0)),b("design:type",Number)],Lt.prototype,"maxHeight",void 0),v([_(_i),b("design:type",String)],Lt.prototype,"fontStyle",void 0),v([_(Ai),b("design:type",String)],Lt.prototype,"fontWeight",void 0),v([_(I(1)),b("design:type",Number)],Lt.prototype,"fontSize",void 0),v([_(Qt),b("design:type",String)],Lt.prototype,"fontFamily",void 0),v([_(I(0)),b("design:type",Number)],Lt.prototype,"padding",void 0),v([_(li()),fi(NaN),b("design:type",Number)],Lt.prototype,"minSpacing",void 0),v([_(Ot),b("design:type",String)],Lt.prototype,"color",void 0),v([_(J(-360,360)),b("design:type",Number)],Lt.prototype,"rotation",void 0),v([_(ot),b("design:type",Boolean)],Lt.prototype,"avoidCollisions",void 0),v([_(ot),b("design:type",Boolean)],Lt.prototype,"mirrored",void 0),v([_(ot),b("design:type",Boolean)],Lt.prototype,"parallel",void 0),v([_(j),b("design:type",String)],Lt.prototype,"format",void 0);class bs{constructor(){this.enabled=!0,this.width=1,this.color=void 0}}v([_(ot),b("design:type",Object)],bs.prototype,"enabled",void 0),v([_(I(0)),b("design:type",Number)],bs.prototype,"width",void 0),v([_(Ot),b("design:type",String)],bs.prototype,"color",void 0);const yf=U((s,t)=>vt(s,t,(e,i)=>0!==e&&I(0)(e,i)||e instanceof Kn),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");class Be{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}function wa(s){const t=Math.min(...s.range),e=Math.max(...s.range),i=Math.floor(t),n=Math.ceil(e);return{min:i,max:n,visible:i!==n}}v([_(ot),b("design:type",Object)],Be.prototype,"enabled",void 0),v([_(I(0)),b("design:type",Number)],Be.prototype,"width",void 0),v([_(I(0)),b("design:type",Number)],Be.prototype,"size",void 0),v([_(Ot),b("design:type",String)],Be.prototype,"color",void 0),v([_(yf),b("design:type",Object)],Be.prototype,"interval",void 0),v([_(Xs()),b("design:type",Array)],Be.prototype,"values",void 0),v([_(Qe(li(1),ns("maxSpacing"))),fi(NaN),b("design:type",Number)],Be.prototype,"minSpacing",void 0);const Ma=2*Math.PI,vf=Ma/2;var xs=function(s){return s[s.TickLine=0]="TickLine",s[s.TickLabel=1]="TickLabel",s[s.GridLine=2]="GridLine",s[s.GridArc=3]="GridArc",s[s.AxisLine=4]="AxisLine",s}(xs||{}),ni=function(s){return s[s.CREATE=0]="CREATE",s[s.CREATE_SECONDARY=1]="CREATE_SECONDARY",s[s.FILTER=2]="FILTER",s[s.VALUES=3]="VALUES",s}(ni||{});class Ci{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach(n=>this.detachCrossLine(n)),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach(n=>{this.attachCrossLine(n),this.initCrossLine(n)})}get crossLines(){return this._crossLines}constructor(t,e){let i;this.moduleCtx=t,this.scale=e,this.id=ci(this),this.nice=!0,this.dataDomain={domain:[],clipped:!1},this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new W({name:`${this.id}-axis`,zIndex:ft.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new jt),this.tickLineGroup=this.axisGroup.appendChild(new W({name:`${this.id}-Axis-tick-lines`,zIndex:ft.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new W({name:`${this.id}-Axis-tick-labels`,zIndex:ft.AXIS_ZINDEX})),this.crossLineGroup=new W({name:`${this.id}-CrossLines`}),this.gridGroup=new W({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new W({name:`${this.id}-gridLines`,zIndex:ft.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=lt.select(this.tickLineGroup,jt,!1),this.tickLabelGroupSelection=lt.select(this.tickLabelGroup,z,!1),this.gridLineGroupSelection=lt.select(this.gridLineGroup,jt,!1),this.line=new bs,this.tick=this.createTick(),this.gridLine=new yo,this.label=this.createLabel(),this.defaultTickMinSpacing=Ci.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new bt,this._gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new Fl(this),this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(t.interactionManager.addListener("hover",n=>this.checkAxisHover(n))),this.animationManager=t.animationManager,this.animationState=new ms("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()}},ready:{update:n=>this.animateReadyUpdate(n),resize:()=>this.resetSelectionNodes()}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines),this.destroyFns.push(t.layoutService.addListener("layout-complete",n=>{null!=i&&null!=qe(n.chart,i)&&this.animationState.transition("resize"),i=Object.assign({},n.chart)})),this.destroyFns.push(t.updateService.addListener("update-complete",n=>{this.minRect=n.minRect}))}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach(e=>{this.initCrossLine(e)})}updateRange(){var t;const{range:e,visibleRange:i,scale:n}=this,o=(e[1]-e[0])/(i[1]-i[0]),r=e[0]-o*i[0];n.range=[r,r+o],null===(t=this.crossLines)||void 0===t||t.forEach(l=>{l.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){const n=Math.min(...this.range),o=Math.max(...this.range);return t+e>=n-i&&t<=o+i}onLabelFormatChange(t,e){const{scale:i,fractionDigits:n}=this,a=!(i instanceof An)&&n>0?r=>"number"==typeof r?r.toFixed(n):String(r):r=>String(r);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch{this.labelFormatter=a,G.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=a}setDomain(){var t;const{scale:e,dataDomain:{domain:i},tick:{values:n}}=this;if(n&&rt.is(e)){const[o,a]=null!==(t=Ne(n))&&void 0!==t?t:[1/0,-1/0],r=Math.min(e.fromDomain(i[0]),o),l=Math.max(e.fromDomain(i[1]),a);e.domain=[e.toDomain(r),e.toDomain(l)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:n}=this;if(t&&rt.is(n)){if("number"==typeof t)return n.tickCount=t,n.minTickCount=e??0,void(n.maxTickCount=i??1/0);n instanceof Na&&this.setTickInterval(t)}}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&this.gridLineGroupSelection.clear(),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach(i=>{this.initCrossLine(i)})}get gridLength(){return this._gridLength}createTick(){return new Be}createLabel(){return new Lt}checkAxisHover(t){this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t){if(!this.tickGenerationResult)return;const{rotation:e,parallelFlipRotation:i,regularFlipRotation:n}=this.calculateRotations(),o=this.label.getSideFlag();this.updatePosition();const a=this.getAxisLineCoordinates(),r=this.tickGenerationResult,{tickData:l,combinedRotation:c,textBaseline:d,textAlign:u}=r,h=pe(r,["tickData","combinedRotation","textBaseline","textAlign"]),f=this.tickLabelGroupSelection.nodes().map(g=>g.datum.tickId);if(this.updateSelections(a,l.ticks,{combinedRotation:c,textAlign:u,textBaseline:d,range:this.scale.range}),this.animationManager.isSkipped())this.resetSelectionNodes();else{const g=this.calculateUpdateDiff(f,l);this.animationState.transition("update",g)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(o),this.updateTickLines(),this.updateTitle({anyTickVisible:l.ticks.length>0}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:n}),this.updateLayoutState(),h.primaryTickCount}getAxisLineCoordinates(){const{range:[t,e]}=this;return{x:0,y1:Math.min(t,e),y2:Math.max(t,e)}}getTickLineCoordinates(t){const{tick:e,label:i}=this,o=i.getSideFlag()*e.size,a=Math.min(0,o);return{x1:a,x2:a+Math.abs(o),y:Math.round(t.translationY)}}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:n,textBaseline:o,textAlign:a,range:r}=e,l=t.tickLabel,u=i.getSideFlag()*(this.tick.size+i.padding+this.seriesAreaPadding);return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:n,rotationCenterX:u,text:l,textAlign:a,textBaseline:o,visible:""!==l&&null!=l,x:u,y:0,range:r}}setTitleProps(t,e){var i;const{title:n}=this;if(n){if(t.color=n.color,t.fontFamily=n.fontFamily,t.fontSize=n.fontSize,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.enabled=n.enabled,t.wrapping=n.wrapping,n.enabled){const o=t.node,{tickSpace:a}=e,r=(null!==(i=n.spacing)&&void 0!==i?i:0)+a,l=this.label.getSideFlag(),c=$t(this.rotation),d=-1===l&&c>Math.PI&&c<2*Math.PI?-1:1,u=d*l*Math.PI/2,h=1===d?"bottom":"top",{range:f}=this,g=Math.floor(d*l*(f[0]+f[1])/2),m=Math.floor(-1===l?d*-r:-r),{callbackCache:y}=this.moduleCtx,{formatter:x=(S=>S.defaultValue)}=n,A=y.call(x,this.getTitleFormatterParams());o.setProperties({rotation:u,text:A,textBaseline:h,visible:!0,x:g,y:m})}}else t.enabled=!1}calculateLayout(t){var e;const{rotation:i,parallelFlipRotation:n,regularFlipRotation:o}=this.calculateRotations(),a=this.label.getSideFlag(),r=a*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:n,regularFlipRotation:o,labelX:r,sideFlag:a});const l=this.tickGenerationResult,{tickData:c,combinedRotation:d,textBaseline:u,textAlign:h}=l,f=pe(l,["tickData","combinedRotation","textBaseline","textAlign"]),g=[],{x:m,y1:y,y2:x}=this.getAxisLineCoordinates(),A=new H(m,y,0,x-y);g.push(A);const{tick:S}=this;S.enabled&&c.ticks.forEach(C=>{const{x1:N,x2:L,y:F}=this.getTickLineCoordinates(C),V=new H(N,F,L-N,0);g.push(V)});const{label:k}=this;if(k.enabled){const C=new z;c.ticks.forEach(N=>{const L=this.getTickLabelProps(N,{combinedRotation:d,textAlign:h,textBaseline:u,range:this.scale.range});if(!L.visible)return;C.setProperties(Object.assign(Object.assign({},L),{translationY:Math.round(N.translationY)}));const F=C.computeTransformedBBox();F&&g.push(F)})}const{title:O}=this;if(O?.enabled){const C=new bt;let N=0;if(c.ticks.length>0){const Z=H.merge(g).width;isFinite(Z)&&(N+=Z)}this.setTitleProps(C,{tickSpace:N});const F=C.node.computeTransformedBBox();F&&g.push(F)}const T=(C=>{const N=new Bt,{rotation:L,translationX:F,translationY:V,rotationCenterX:Z,rotationCenterY:q}=this.getAxisTransform();return Bt.updateTransformMatrix(N,1,1,L,F,V,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:Z,rotationCenterY:q}),N.transformBBox(C)})(H.merge(g)),w=this.isAnySeriesActive();return null===(e=this.crossLines)||void 0===e||e.forEach(C=>{var N;C.sideFlag=-a,C.direction=i===-Math.PI/2?P.X:P.Y,C instanceof Pt&&(C.label.parallel=null!==(N=C.label.parallel)&&void 0!==N?N:this.label.parallel),C.parallelFlipRotation=n,C.regularFlipRotation=o,C.calculateLayout(w)}),this.updateLayoutState(),{primaryTickCount:t=f.primaryTickCount,bbox:T}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;rt.is(t)&&(t.nice=e,t.update())}calculateRotations(){const t=fe(this.rotation);return{rotation:t,parallelFlipRotation:$t(t),regularFlipRotation:$t(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:n,sideFlag:o}){var a;const{scale:r,tick:l,label:{parallel:c,rotation:d,fontFamily:u,fontSize:h,fontStyle:f,fontWeight:g}}=this,m=void 0!==t,{defaultRotation:y,configuredRotation:x,parallelFlipFlag:A,regularFlipFlag:S}=ao({rotation:d,parallel:c,regularFlipRotation:i,parallelFlipRotation:e}),k=x+y,E=new Bt,{maxTickCount:O}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:null!==(a=l.maxSpacing)&&void 0!==a?a:NaN}),T=!rt.is(r)||isNaN(O)?10:O;let w=ya(c,x,0,o,S);const C=function Ip(s,t,e,i){return s&&!t?e*i==-1?"hanging":"bottom":"middle"}(c,x,o,A),N={fontFamily:u,fontSize:h,fontStyle:f,fontWeight:g,textBaseline:C,textAlign:w};let L={rawTicks:[],ticks:[],labelCount:0},F=0,V=0,Z=!0,q=!1;for(;Z&&F<=T&&!q;){V=0,w=ya(c,x,0,o,S);const nt=this.getTickStrategies({secondaryAxis:m,index:F});for(const tt of nt){({tickData:L,index:F,autoRotation:V,terminate:q}=tt({index:F,tickData:L,textProps:N,labelOverlap:Z,terminate:q,primaryTickCount:t}));const dt=0!==x||0!==V,ht=k+V;w=ya(c,x,V,o,S),Z=this.checkLabelOverlap(ht,dt,E,L.ticks,n,Object.assign(Object.assign({},N),{textAlign:w}))}}return!m&&L.rawTicks.length>0&&(t=L.rawTicks.length),{tickData:L,primaryTickCount:t,combinedRotation:y+x+V,textBaseline:C,textAlign:w}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:n,tick:o}=this,a=rt.is(i),r=n.enabled&&n.avoidCollisions,c=!0===n.autoRotate&&void 0===n.rotation,d=[];let u;return u=this.tick.values?ni.VALUES:e?ni.CREATE_SECONDARY:!a&&0!==t&&r?ni.FILTER:ni.CREATE,d.push(({index:f,tickData:g,primaryTickCount:m,terminate:y})=>this.createTickData(u,f,g,y,m)),a||isNaN(o.minSpacing)||d.push(({index:g,tickData:m,primaryTickCount:y,terminate:x})=>this.createTickData(ni.FILTER,g,m,x,y)),r?(n.autoWrap?d.push(({index:g,tickData:m,textProps:y})=>this.wrapLabels(m,g,y)):c&&d.push(({index:g,tickData:m,labelOverlap:y,terminate:x})=>({index:g,tickData:m,autoRotation:this.getAutoRotation(y),terminate:x})),d):d}createTickData(t,e,i,n,o){var a;const{scale:r,tick:l}=this,{maxTickCount:c,minTickCount:d,defaultTickCount:u}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:null!==(a=l.maxSpacing)&&void 0!==a?a:NaN}),h=rt.is(r),f=!h||isNaN(c)?10:c;let g=h?Math.max(u-e,d):c;const m=void 0===l.interval&&void 0===l.values&&g>d&&(h||t===ni.FILTER);let y=!0;for(;y&&e<=f;){const A=i.rawTicks;g=h?Math.max(u-e,d):c;const{rawTicks:S,ticks:k,labelCount:E}=this.getTicks({tickGenerationType:t,previousTicks:A,tickCount:g,minTickCount:d,maxTickCount:c,primaryTickCount:o});i.rawTicks=S,i.ticks=k,i.labelCount=E,y=!!m&&cf(S,A),e++}return n||(n=void 0!==l.interval||void 0!==l.values),{tickData:i,index:e,autoRotation:0,terminate:n}}checkLabelOverlap(t,e,i,n,o,a){Bt.updateTransformMatrix(i,1,1,t,0,0);const r=this.createLabelData(n,o,a,i),l=function Lp(s,t){return isNaN(s)?t?0:10:s}(this.label.minSpacing,e);return function ff(s,t){const e=[];for(let i=0;i<s.length;i++){const n=s[i],{point:{x:o,y:a},label:{text:r}}=n;let{label:{width:l,height:c}}=n;if(l+=t??0,c+=t??0,e.some(u=>gc(u,o,a,l,c)))return!0;e.push({index:i,text:r,x:o,y:a,width:l,height:c,datum:n})}return!1}(r,l)}createLabelData(t,e,i,n){const o=[];for(const a of t){const{tickLabel:r,translationY:l}=a;if(""===r||null==r)continue;const c=ll(r),{width:d,height:u}=ap(c,e,l,i),f=Pp(r,new H(e,l,d,u),e,l,n);o.push(f)}return o}getAutoRotation(t){var e;return t?$t(fe(null!==(e=this.label.autoRotateAngle)&&void 0!==e?e:0)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:n,maxTickCount:o,primaryTickCount:a}){var r;const{range:l,scale:c,visibleRange:d}=this;let u=[];switch(t){case ni.VALUES:u=this.tick.values;break;case ni.CREATE_SECONDARY:u=this.updateSecondaryAxisTicks(a);break;case ni.FILTER:u=this.filterTicks(e,i);break;default:u=this.createTicks(i,n,o)}this.onLabelFormatChange(u,this.label.format),this.fractionDigits=u.fractionDigits>=0?u.fractionDigits:0;const h=(null!==(r=c.bandwidth)&&void 0!==r?r:0)/2,f=[];let g=0;const m=new Map,y=Math.max(0,Math.floor(d[0]*u.length)),x=Math.min(u.length,Math.ceil(d[1]*u.length));for(let A=y;A<x;A++){const S=u[A],k=c.convert(S)+h;if(l.length>0&&!this.inRange(k,0,.001))continue;const E=this.formatTick(S,A);let O=E;if(m.has(O)){const D=m.get(O);m.set(O,D+1),O=`${O}_${D}`}else m.set(O,1);f.push({tick:S,tickId:O,tickLabel:E,translationY:k}),""!==E&&null!=E&&g++}return{rawTicks:u,ticks:f,labelCount:g}}filterTicks(t,e){var i;const o=isNaN(this.tick.minSpacing)&&isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?2:Math.ceil(t.length/e);return t.filter((a,r)=>r%o==0)}createTicks(t,e,i){var n,o,a;return this.setTickCount(t,e,i),null!==(a=null===(o=(n=this.scale).ticks)||void 0===o?void 0:o.call(n))&&void 0!==a?a:[]}estimateTickCount({minSpacing:t,maxSpacing:e}){const{minRect:i}=this,n=this.calculateRangeWithBleed(),o=Math.max(this.defaultTickMinSpacing,n/rt.defaultMaxTickCount);let a=!isNaN(e);isNaN(t)&&(t=o),isNaN(e)&&(e=n),t>e&&(t===o?t=e:e=t);const r=i?this.direction===P.X?i.width:i.height:1;a&&(a=r<o);const l=we(1,Math.floor(n/t),a?Math.floor(n/r):1/0),c=Math.min(l,Math.ceil(n/e));return{minTickCount:c,maxTickCount:l,defaultTickCount:we(c,rt.defaultTickCount,l)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i}){var n;const o=this.label.getSideFlag(),a=this.isAnySeriesActive();null===(n=this.crossLines)||void 0===n||n.forEach(r=>{var l;r.sideFlag=-o,r.direction=t===-Math.PI/2?P.X:P.Y,r instanceof Pt&&(r.label.parallel=null!==(l=r.label.parallel)&&void 0!==l?l:this.label.parallel),r.parallelFlipRotation=e,r.regularFlipRotation=i,r.update(a)})}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each(n=>{n.strokeWidth=t.width,n.stroke=t.color,n.x1=i*t.size,n.x2=0,n.y1=0,n.y2=0})}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateRangeWithBleed(){const{visibleRange:t}=this,e=1/(t[1]-t[0]);return function Ko(s,t=2){const e=Math.pow(10,t);return Math.round(s*e)/e}(this.calculateAvailableRange()*e,2)}calculateDomain(){if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const e=this.boundSeries.filter(i=>this.includeInvisibleDomains||i.isEnabled()).flatMap(i=>i.getDomain(this.direction));this.dataDomain=this.normaliseDataDomain(e)}}getAxisTransform(){return{rotation:fe(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:this.translation.x,translationY:this.translation.y}}updatePosition(){const{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:n,gridLineGroupSelection:o,gridPadding:a,gridLength:r}=this,{rotation:l}=this.calculateRotations(),c=this.label.getSideFlag(),d=Math.floor(n.x),u=Math.floor(n.y);t.setProperties({rotation:l,translationX:d,translationY:u}),e.datum=this.getAxisTransform(),i.setProperties({rotation:l,translationX:d,translationY:u}),o.each(h=>{h.x1=a,h.x2=-c*r+a,h.y=0})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],n=>n.append(new jt({tag:xs.GridLine})),n=>n.tickId),this.tickLineGroupSelection.update(e,n=>n.appendChild(new jt({tag:xs.TickLine})),n=>n.tickId),this.tickLabelGroupSelection.update(e.map(n=>this.getTickLabelProps(n,i)),n=>n.appendChild(new z({tag:xs.TickLabel})),n=>n.tickId)}updateAxisLine(){const{line:t}=this;this.lineNode.setProperties({stroke:t.color,strokeWidth:t.enabled?t.width:0})}updateGridLines(t){const{gridLine:{style:e,width:i},gridPadding:n,gridLength:o}=this;0===o||0===e.length||this.gridLineGroupSelection.each((a,r,l)=>{const{stroke:c,lineDash:d}=e[l%e.length];a.setProperties({x1:n,x2:-t*o+n,y:0,fill:void 0,stroke:c,strokeWidth:i,lineDash:d})})}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each((e,i)=>{e.setProperties(i,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(t,e,i){const{parallel:n,maxWidth:o,maxHeight:a}=this.label;let r=this.maxThickness,l=Math.round(this.calculateAvailableRange()/t.labelCount);return n&&([r,l]=[l,r]),t.ticks.forEach(c=>{c.tickLabel=z.wrap(c.tickLabel,o??r,a??l,i,"hyphenate")}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:e,title:i,_titleCaption:n,lineNode:o,tickLineGroup:a,tickLabelGroup:r}=this;if(!i)return void(n.enabled=!1);let l=0;const{anyTickVisible:c}=t;if(i.enabled&&c){const d=W.computeBBox([a,r,o]),u=0===e?d.width:d.height;Math.abs(u)<1/0&&(l+=u)}this.setTitleProps(n,{tickSpace:l})}formatTick(t,e){var i,n;const{label:o,labelFormatter:a,fractionDigits:r,moduleCtx:{callbackCache:l}}=this;if(o.formatter){const c=r>0?t:String(t);return null!==(i=l.call(o.formatter,{value:c,index:e,fractionDigits:r,formatter:a}))&&void 0!==i?i:c}return a&&null!==(n=l.call(a,t))&&void 0!==n?n:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,e,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new H(t,e,i,n))}clipGrid(t,e,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new H(t,e,i,n))}calculatePadding(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((i,n)=>{const o=n.getKeys(this.direction),a=n.getNames(this.direction);for(let r=0;r<o.length;r++)i.push({key:o[r],name:a[r]});return i},[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}normaliseDataDomain(t){return{domain:t,clipped:!1}}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var t;return null!==(t=this.axisContext)&&void 0!==t||(this.axisContext=this.createAxisContext()),Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:rt.is(this.scale),keys:()=>this.boundSeries.flatMap(t=>t.getKeys(this.direction)),scaleValueFormatter:t=>{var e,i;return null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t})},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i;return null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t)}}}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,n=function mc(s){const t=c=>{var d,u;const h=Math.min(...null!==(d=c.range)&&void 0!==d?d:[s.min]),f=Math.max(...null!==(u=c.range)&&void 0!==u?u:[s.max]),g=Math.round(c.translationY);return g<h||g>f},i=(c,d,u)=>{const h={translationY:Math.round(c.translationY),opacity:c.opacity};return u=((c,d,u)=>"removed"!==u&&t(c)?"removed":"added"!==u&&t(d)?"added":u)(d,c.datum,u),"added"===u&&(h.translationY=Math.round(d.translationY),h.opacity=0),Object.assign(Object.assign({},h),ee[u])},n=(c,d,u)=>{const h={translationY:Math.round(d.translationY),opacity:1};return"removed"===u&&(h.opacity=0),h};return{tick:{fromFn:i,toFn:n,intermediateFn:(c,d,u)=>({visible:!t(c)})},line:{fromFn:(c,d)=>{var u,h;return Object.assign(Object.assign({},null!==(h=null!==(u=c.previousDatum)&&void 0!==u?u:d)&&void 0!==h?h:{y:c.y,x1:c.x1,x2:c.x2}),ee.updated)},toFn:(c,d)=>Object.assign({},d)},label:{fromFn:(c,d,u)=>{var h;const f=null!==(h=c.previousDatum)&&void 0!==h?h:d;let g=f.rotation;return("added"===u||"removed"===u)&&(g=d.rotation),Object.assign(Object.assign({},i(c,d,u)),{x:f.x,y:f.y,rotation:g,rotationCenterX:f.rotationCenterX})},toFn:(c,d,u)=>{var h,f;let g;return g="added"===u||"removed"===u?d.rotation:function bf(s,t){return Math.abs(t-s)<vf?t:s>t?t+Ma:t-Ma}(null!==(f=null===(h=c.previousDatum)||void 0===h?void 0:h.rotation)&&void 0!==f?f:d.rotation,d.rotation),Object.assign(Object.assign({},n(0,d,u)),{x:d.x,y:d.y,rotation:g,rotationCenterX:d.rotationCenterX,finish:{rotation:d.rotation}})}},group:{fromFn:(c,d)=>{const{rotation:u,translationX:h,translationY:f}=c;return Object.assign({rotation:u,translationX:h,translationY:f},ee.updated)},toFn:(c,d)=>{const{rotation:u,translationX:h,translationY:f}=d;return{rotation:u,translationX:h,translationY:f}}}}}(wa(this));Ct(this.id,"axis-group",e,[this.axisGroup],n.group),Ct(this.id,"line",e,[this.lineNode],n.line),Ct(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],n.tick,(o,a)=>a.tickId,t),Ct(this.id,"tick-labels",e,[this.tickLabelGroupSelection],n.label,(o,a)=>a.tickId,t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:n}=this,o=wa(this);It([this.axisGroup],(s,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY})),It([t,e],function vc(s){const{visible:t,min:e,max:i}=s;return(n,o)=>{const a=Math.round(o.translationY);return{translationY:a,opacity:1,visible:t&&a>=e&&a<=i}}}(o)),It([i],(s,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX})),It([n],function xc(){return(s,t)=>Object.assign({},t)}())}calculateUpdateDiff(t,e){const i=new Set,n=new Set,o=Math.max(t.length,e.ticks.length);for(let a=0;a<o;a++){const r=e.ticks[a],l=t[a],c=r?.tickId;l!==c&&(n.has(c)?n.delete(c):c&&i.add(c),i.has(l)?i.delete(l):l&&n.add(l))}return{changed:i.size>0||n.size>0,added:[...i.values()],removed:[...n.values()]}}}Ci.defaultTickMinSpacing=50,v([_(ot),b("design:type",Boolean)],Ci.prototype,"nice",void 0),v([_(ta),b("design:type",Array)],Ci.prototype,"keys",void 0);class Ra extends Lt{constructor(){super(...arguments),this.autoRotateAngle=335}}v([_(Me),b("design:type",Boolean)],Ra.prototype,"autoRotate",void 0),v([_(I(-360,360)),b("design:type",Number)],Ra.prototype,"autoRotateAngle",void 0);class kn extends Ci{constructor(){super(...arguments),this.thickness=0,this.position="left"}get direction(){return["top","bottom"].includes(this.position)?P.X:P.Y}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t){return this.updateDirection(),super.update(t)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return Object.assign(Object.assign({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){!function nc(s,t){var e;null===(e=vs.constructedArrays)||void 0===e||e.set(s,t)}(t,Pt)}createLabel(){return new Ra}}v([_(I(0)),b("design:type",Number)],kn.prototype,"thickness",void 0),v([_(ia),b("design:type",String)],kn.prototype,"position",void 0);class gi extends kn{constructor(t){super(t,new hn),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=[],i=new Set;for(const n of t){const o=n instanceof Date?n.getTime():n;i.has(o)||(i.add(o),e.push(n))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map(e=>{var i;return null===(i=e.getBandScalePadding)||void 0===i?void 0:i.call(e)}).filter(e=>null!=e);t.length>0&&(this.scale.paddingInner=Math.min(...t.map(e=>e.inner)),this.scale.paddingOuter=Math.max(...t.map(e=>e.outer)))}return super.calculateDomain()}}gi.className="CategoryAxis",gi.type="category",v([_(I(0,1)),b("design:type",Number)],gi.prototype,"groupPaddingInner",void 0);class Sc{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}}function _f(s,t,e){const n=e/(t.number-s.number);t.change-=n,t.shift+=e,s.change+=n,t.prelim+=e,t.mod+=e}function Af(s,t,e){return t.getSiblings().indexOf(s.ancestor)>=0?s.ancestor:e}function _c(s,t){const e=s.children;if(e.length){let i=e[0];e.forEach(a=>{_c(a,t),i=function Of(s,t,e){const i=s.getLeftSibling();if(i){let n=s,o=s,a=i,r=o.getLeftmostSibling(),l=o.mod,c=n.mod,d=a.mod,u=r.mod;for(;a.nextRight()&&o.nextLeft();){a=a.nextRight(),o=o.nextLeft(),r=r.nextLeft(),n=n.nextRight(),n.ancestor=s;const h=a.prelim+d-(o.prelim+l)+e;h>0&&(_f(Af(a,s,t),s,h),l+=h,c+=h),d+=a.mod,l+=o.mod,u+=r.mod,c+=n.mod}a.nextRight()&&!n.nextRight()?(n.thread=a.nextRight(),n.mod+=d-c):(o.nextLeft()&&!r.nextLeft()&&(r.thread=o.nextLeft(),r.mod+=l-u),t=s)}return t}(a,i,t)}),function kf(s){const t=s.children;if(t){let e=0,i=0;for(let n=t.length-1;n>=0;n--){const o=t[n];o.prelim+=e,o.mod+=e,i+=o.change,e+=o.shift+i}}}(s);const n=(e[0].prelim+e[e.length-1].prelim)/2,o=s.getLeftSibling();o?(s.prelim=o.prelim+t,s.mod=s.prelim-n):s.prelim=n}else{const i=s.getLeftSibling();s.prelim=i?i.prelim+t:0}}class Ac{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:n}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}}function kc(s,t,e){s.x=s.prelim+t,s.y=s.depth,e.update(s),s.children.forEach(i=>kc(i,t+s.mod,e))}function Oc(s){const t=s.children;let e=0;t.forEach(i=>{Oc(i),i.children.length?e+=i.leafCount:e++}),s.leafCount=e,t.length?(s.subtreeLeft=t[0].subtreeLeft,s.subtreeRight=t[s.children.length-1].subtreeRight,s.x=(s.subtreeLeft+s.subtreeRight)/2):(s.subtreeLeft=s.x,s.subtreeRight=s.x)}function Ef(s){const t=new Df;return _c(s,1),kc(s,-s.prelim,t),Oc(s),t}class Df{constructor(){this.dimensions=new Ac,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,e=>({x:e.x,y:e.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,n=0,o=!1){const a=this.leafCount-1,r=this.depth,l=this.dimensions;let c=1,d=1;t>0&&a&&(c=t/a/((l.right-l.left)/a),o&&(c=-c)),e>0&&r&&(d=e/r/((l.bottom-l.top)/r));const u=new Ac;this.nodes.forEach(g=>{g.screenX=g.x*c,g.screenY=g.y*d,u.update(g,m=>({x:m.screenX,y:m.screenY}))});const h=-u.left,f=-u.top;this.nodes.forEach(g=>{g.screenX+=h+i,g.screenY+=f+n})}}class Ec extends Lt{constructor(){super(...arguments),this.grid=!1}}v([_(ot),b("design:type",Boolean)],Ec.prototype,"grid",void 0);class Xi extends kn{constructor(t){super(t,new hn),this.tickScale=new hn,this.line=new bs,this.label=new Ec,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:n,tickScale:o,scale:a}=this;a.paddingOuter=.1,a.paddingInner=2*a.paddingOuter,this.range=a.range.slice(),this.refreshScale(),o.paddingInner=1,o.paddingOuter=0,this.gridLineSelection=lt.select(n,jt),this.axisLineSelection=lt.select(e,jt),this.separatorSelection=lt.select(e,jt),this.labelSelection=lt.select(i,z)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),a=t[0]-n*e[0];this.tickScale.range=i.range=[a,a+n],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,o=this.lineHeight;n&&n.resize(Math.abs(i[1]-i[0]),n.depth*o,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*o,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e}=this,i=[];let n;this.boundSeries.filter(r=>r.visible).forEach(r=>{if(e===P.X)if(void 0===n){const l=r.getDomain(e);i.push(l),n="number"==typeof l[0]}else n&&i.push(r.getDomain(e));else i.push(r.getDomain(e))});const o=(new Array).concat(...i),a=null!==(t=Ne(o))&&void 0!==t?t:o;this.dataDomain=this.normaliseDataDomain(a),this.scale.domain=this.dataDomain.domain}normaliseDataDomain(t){const e=t.filter((o,a,r)=>r.indexOf(o)===a),i=function xf(s,t=!0){const e=new Sc;let i=0;return t&&s.forEach(n=>i=Math.max(i,n.labels.length)),s.forEach(n=>{if(t)for(;n.labels.length<i;)n.labels.unshift("");!function Sf(s,t){const e=t.labels.slice().reverse(),i=e.length-1;e.forEach((n,o)=>{const a=s.children,r=a.find(c=>c.label===n),l=o!==i;if(r&&l)s=r;else{const c=new Sc(n,s);c.number=a.length,a.push(c),l&&(s=c)}})}(e,n)}),e}(e);this.tickTreeLayout=Ef(i);const n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),{domain:e,clipped:!1}}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each((i,n)=>{i.setProperties(n)})}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each((o,a)=>{o.x1=a.x1,o.x2=a.x2,o.y1=a.y,o.y2=a.y,o.visible=a.y>=e[0]-1e-7&&a.y<=e[1]+1e-7,o.stroke=this.tick.color,o.fill=void 0,o.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each((i,n)=>{i.setProperties(Object.assign(Object.assign({},n),{stroke:this.line.color,strokeWidth:this.line.width})),i.x1=n.x,i.x2=n.x,i.y1=n.y1,i.y2=n.y2,i.strokeWidth=this.line.width,i.stroke=this.line.color})}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:n,tickScale:o}=this,a=o.ticks(),r=i.getSideFlag(),l=this.gridLineSelection.update(t?a:[]);if(t){const{width:c,style:d}=e,u=d.length;l.each((h,f,g)=>{const m=Math.round(o.convert(f));h.x1=0,h.x2=-r*t,h.y1=m,h.y2=m,h.visible=m>=n[0]&&m<=n[1];const{stroke:y,lineDash:x}=d[g%u];h.stroke=y,h.strokeWidth=c,h.lineDash=x,h.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:n},range:o,title:a,title:{formatter:r=(Y=>Y.defaultValue)}={}}=this,l=t.range[0],c=t.range[1],u=Math.abs(c-l)/t.domain.length||0,h=fe(this.rotation),f=Math.abs(Math.cos(h))<1e-8,g=e.getSideFlag(),m=this.lineHeight,y=this.tickTreeLayout,x=t.ticks(),A=y?y.nodes:[],S=!!y&&y.depth>1,{defaultRotation:k,configuredRotation:E,parallelFlipFlag:O}=ao({rotation:e.rotation,parallel:i,regularFlipRotation:$t(h-Math.PI/2),parallelFlipRotation:$t(h)}),D=[],w=new Map;let C=0;const N=new z,L=(Y,mt)=>{var At;if(N.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===O?"bottom":"hanging",translationX:Y.screenY-.25*e.fontSize,translationY:Y.screenX}),0===mt){if(!(a?.enabled&&x.length>0))return!1;const be=n.call(r,this.getTitleFormatterParams());N.setProperties({fill:a.color,fontFamily:a.fontFamily,fontSize:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight,text:be,textBaseline:"hanging",translationX:Y.screenY-.25*e.fontSize,translationY:Y.screenX})}else{if(!(Y.screenX>=o[0]&&Y.screenX<=o[1]))return!1;N.text=e.formatter&&null!==(At=n.call(e.formatter,{value:String(Y.label),index:mt}))&&void 0!==At?At:String(Y.label)}return!0};A.forEach((Y,mt)=>{if(L(Y,mt)){const pt=N.computeTransformedBBox();pt&&(w.set(mt,pt),pt.width>C&&(C=pt.width))}});const F=g*e.padding,V=this.label.grid,Z=[];A.forEach((Y,mt)=>{let At=L(Y,mt);const pt=mt;N.x=F,N.rotationCenterX=F;const be=!Y.children.length;if(be){N.rotation=E,N.textAlign="end",N.textBaseline="middle";const Ut=w.get(pt);Ut&&Ut.height>u&&(At=!1,w.delete(pt))}else{N.translationX-=C-m+this.label.padding;const Ut=Y.leafCount*u,Kt=w.get(pt);Kt&&Kt.width>Ut?(At=!1,w.delete(pt)):N.rotation=f?k:-Math.PI/2}if(Y.parent&&S){const Ut=be?Y.screenX-u/2:Y.screenX-Y.leafCount*u/2;if(be)(Y.number!==Y.children.length-1||V)&&Z.push({y:Ut,x1:0,x2:-C-2*this.label.padding});else{const Kt=-C-2*this.label.padding+Y.screenY;Z.push({y:Ut,x1:Kt+m,x2:Kt})}}let Xt;if(At){const Ut=N.computeTransformedBBox();Ut&&w.set(mt,Ut),Xt=Object.assign(Object.assign({},(Y=>({fill:Y.fill,fontFamily:Y.fontFamily,fontSize:Y.fontSize,fontStyle:Y.fontStyle,fontWeight:Y.fontWeight,rotation:Y.rotation,rotationCenterX:Y.rotationCenterX,rotationCenterY:Y.rotationCenterY,text:Y.text,textAlign:Y.textAlign,textBaseline:Y.textBaseline,translationX:Y.translationX,translationY:Y.translationY,visible:Y.visible,x:Y.x,y:Y.y}))(N)),{visible:At})}else w.delete(mt),Xt={visible:At};D.push(Xt)});let q=0;Z.forEach(Y=>q=Math.min(q,Y.x2)),Z.push({y:Math.max(l,c),x1:0,x2:q});const it=[],nt=[];Z.forEach(Y=>{if(Y.y>=o[0]-1e-7&&Y.y<=o[1]+1e-7){const{x1:mt,x2:At,y:pt}=Y,be=new H(Math.min(mt,At),pt,Math.abs(mt-At),0);nt.push(be),it.push({x1:mt,x2:At,y:pt})}});const dt=[],ht=[],wt=y?y.depth+1:1;for(let Y=0;Y<wt;Y++){const mt=x.length>0&&(0===Y||V&&S),At=Y>0?-C-2*this.label.padding-(Y-1)*m:0,pt=new H(At,Math.min(...o),0,Math.abs(o[1]-o[0]));ht.push(pt),dt.push({x:At,y1:o[0],y2:o[1],visible:mt})}return{bbox:(Y=>{const mt=new Bt,{rotation:At,translationX:pt,translationY:be,rotationCenterX:Xt,rotationCenterY:Ut}=this.getAxisTransform();return Bt.updateTransformMatrix(mt,1,1,At,pt,be,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:Xt,rotationCenterY:Ut}),mt.transformBBox(Y)})(H.merge([...w.values(),...nt,...ht])),tickLabelLayout:D,separatorLayout:it,axisLineLayout:dt}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:n}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:n,primaryTickCount:void 0}}}Xi.className="GroupedCategoryAxis",Xi.type="grouped-category",v([_(Ot),b("design:type",String)],Xi.prototype,"labelColor",void 0);class Dc{static isSupported(){return typeof OffscreenCanvas<"u"&&null!=OffscreenCanvas.prototype.transferToImageBitmap}constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(i),this.resize(t,e)}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=t??window.devicePixelRatio;return sl()||(e=1),this._pixelRatio=e,ut.overrideScale(this.realContext,e)}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),n.resetTransform(),this._width=t,this._height=e}}var Ni=function(s){return s.SCENE="scene",s.SCENE_STATS="scene:stats",s.SCENE_STATS_VERBOSE="scene:stats:verbose",s.SCENE_DIRTY_TREE="scene:dirtyTree",s}(Ni||{});const La="adv-composite",Ia="dom-composite";let Tc=(()=>{class s{constructor(e){var i;this.id=ci(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=Mt.create(!0,Ni.SCENE);const{document:n,window:o,mode:a=(null!==(i=zo("agChartsSceneRenderModel"))&&void 0!==i?i:La),width:r,height:l,overrideDevicePixelRatio:c}=e;this.overrideDevicePixelRatio=c,this.opts={document:n,window:o,mode:a},this.canvas=new ut({document:n,window:o,width:r,height:l,overrideDevicePixelRatio:c})}set container(e){this.canvas.container=e}get container(){return this.canvas.container}download(e,i){this.canvas.download(e,i)}getDataURL(e){return this.canvas.getDataURL(e)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(e,i){e=Math.round(e),i=Math.round(i);const n=e<=0||i<=0,o=isNaN(e)||isNaN(i);return!(e===this.width&&i===this.height||o||n||(this.pendingSize=[e,i],this.markDirty(),0))}addLayer(e){var i;const{mode:n}=this.opts;if(!["composite",Ia,La].includes(n))return;const{zIndex:a=this._nextZIndex++,name:r,zIndexSubOrder:l,getComputedOpacity:c,getVisibility:d}=e,{width:u,height:h,overrideDevicePixelRatio:f}=this,g=n===Ia,y=n===La&&Dc.isSupported()?new Dc({width:u,height:h,overrideDevicePixelRatio:f}):new ut({document:this.opts.document,window:this.opts.window,width:u,height:h,domLayer:g,zIndex:a,name:r,overrideDevicePixelRatio:f}),x={id:this._nextLayerId++,name:r,zIndex:a,zIndexSubOrder:l,canvas:y,getComputedOpacity:c,getVisibility:d};if(a>=this._nextZIndex&&(this._nextZIndex=a+1),this.layers.push(x),this.sortLayers(),g){const A=this.layers.map(E=>E.canvas).filter(E=>E instanceof ut),S=A.findIndex(E=>E===y);(null!==(i=A[S-1])&&void 0!==i?i:this.canvas).element.insertAdjacentElement("afterend",y.element)}return this.debug("Scene.addLayer() - layers",this.layers),x.canvas}removeLayer(e){const i=this.layers.findIndex(n=>n.canvas===e);i>=0&&(this.layers.splice(i,1),e.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(e,i,n){const o=this.layers.find(a=>a.canvas===e);o&&(o.zIndex=i,o.zIndexSubOrder=n,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((e,i)=>{var n,o;return Dl([e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.id],[i.zIndex,...null!==(o=i.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],i.id],El)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(e){var i;e!==this._root&&(null===(i=this._root)||void 0===i||i._setLayerManager(),this._root=e,e&&e._setLayerManager({addLayer:n=>this.addLayer(n),moveLayer:(...n)=>this.moveLayer(...n),removeLayer:(...n)=>this.removeLayer(...n),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:Mt.create(Ni.SCENE)}),this.markDirty())}get root(){return this._root}strip(){const{layers:e}=this;for(const i of e)i.canvas.destroy(),delete i.canvas;e.splice(0,e.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(e){var i,n;return R(this,void 0,void 0,function*(){const{debugSplitTimes:o={start:performance.now()},extraDebugStats:a={}}=e??{},{canvas:r,canvas:{context:l},root:c,layers:d,pendingSize:u,opts:{mode:h}}=this;if(u&&(this.canvas.resize(...u),this.layers.forEach(m=>m.canvas.resize(...u)),this.pendingSize=void 0),c&&!c.visible)return void(this._dirty=!1);if(c&&!this.dirty)return this.debug("Scene.render() - no-op",{redrawType:M[c.dirty],tree:this.buildTree(c)}),void this.debugStats(o,l,void 0,a);const f={ctx:l,devicePixelRatio:null!==(i=this.canvas.pixelRatio)&&void 0!==i?i:1,forceRender:!0,resized:!!u,debugNodes:{}};Mt.check(Ni.SCENE_STATS_VERBOSE)&&(f.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let g=!1;if((!c||c.dirty>=M.TRIVIAL)&&(g=!0,r.clear()),c){const{dirtyTree:m,paths:y}=this.buildDirtyTree(c);Mt.create(Ni.SCENE_DIRTY_TREE)("Scene.render() - dirtyTree",{dirtyTree:m,paths:y})}c&&g&&(this.debug("Scene.render() - before",{redrawType:M[c.dirty],canvasCleared:g,tree:this.buildTree(c)}),c.visible&&(l.save(),c.render(f),l.restore())),o["\u270d\ufe0f"]=performance.now(),h!==Ia&&d.length>0&&g&&(this.sortLayers(),l.save(),l.setTransform(1/r.pixelRatio,0,0,1/r.pixelRatio,0,0),d.forEach(({canvas:{imageSource:m,enabled:y},getComputedOpacity:x,getVisibility:A})=>{!y||!A()||(l.globalAlpha=x(),l.drawImage(m,0,0))}),l.restore(),o["\u26d9"]=performance.now()),null===(n=l.verifyDepthZero)||void 0===n||n.call(l),this._dirty=!1,this.debugStats(o,l,f.stats,a),this.debugSceneNodeHighlight(l,f.debugNodes),c&&this.debug("Scene.render() - after",{redrawType:M[c.dirty],canvasCleared:g,tree:this.buildTree(c)})})}debugStats(e,i,n,o={}){if(Mt.check(Ni.SCENE_STATS,Ni.SCENE_STATS_VERBOSE)){const a=performance.now(),r=e.start;e.end=performance.now();const l=(D,T)=>{const w=D+T;return`${D} / ${w} (${Math.round(100*D/w)}%)`},c=(D,T,w)=>`${D}: ${Math.round(100*(w-T))/100}ms`,{layersRendered:d=0,layersSkipped:u=0,nodesRendered:h=0,nodesSkipped:f=0}=n??{};let g=0;const m=Object.entries(e).filter(([D])=>"end"!==D).map(([D,T],w)=>{const C=w>0?c(D,g,T):null;return g=T,C}).filter(D=>null!=D).join(" + "),y=Object.entries(o).map(([D,T])=>`${D}: ${T}`).join(" ; "),x=Mt.check(Ni.SCENE_STATS_VERBOSE),S=[`${c("\u23f1\ufe0f",r,a)} (${m})`,`${y}`,`Layers: ${x?l(d,u):this.layers.length}`,x?`Nodes: ${l(h,f)}`:null].filter(D=>null!=D).map(D=>[D,ut.getTextSize(D,i.font)]),k=Math.max(...S.map(([,{width:D}])=>D)),E=S.reduce((D,[,{height:T}])=>D+T,0);i.save(),i.fillStyle="white",i.fillRect(0,0,k,E),i.fillStyle="black";let O=0;for(const[D,T]of S)O+=T.height,i.fillText(D,2,O);i.restore()}}debugSceneNodeHighlight(e,i){var n;const o=l=>c=>!!l.test(c.id)||c instanceof W&&null!=c.name&&l.test(c.name),a=l=>c=>l===c.id||c instanceof W&&null!=c.name&&l===c.name,r=Ws(zo("agChartsSceneDebug")).flatMap(l=>"layout"===l?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:l);for(const l of r){if("string"==typeof l&&null!=i[l])continue;const c="string"==typeof l?a(l):o(l),d=null===(n=this.root)||void 0===n?void 0:n.findNodes(c);if(d&&0!==d.length)for(const u of d)u instanceof W&&u.name?i[u.name]=u:i[u.id]=u;else G.log(`Scene.render() - no debugging node with id [${l}] in scene graph.`)}e.save();for(const[l,c]of Object.entries(i)){const d=c.computeTransformedBBox();d?(e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(d.x,d.y,d.width,d.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(l,d.x,d.y,d.width),e.fillText(l,d.x,d.y,d.width)):G.log(`Scene.render() - no bbox for debugged node [${l}].`)}e.restore()}buildTree(e){var i,n;const o=null!==(i=e instanceof W?e.name:null)&&void 0!==i?i:e.id;return Object.assign(Object.assign({name:o,node:e,dirty:M[e.dirty]},null!==(n=e.parent)&&void 0!==n&&n.isVirtual?{virtualParentDirty:M[e.parent.dirty],virtualParent:e.parent}:{}),e.children.map(a=>this.buildTree(a)).reduce((a,r)=>{let{name:l}=r;const{node:{visible:c,opacity:d,zIndex:u,zIndexSubOrder:h},node:f,virtualParent:g}=r;(!c||d<=0)&&(l=`(${l})`),f instanceof W&&f.isLayer()&&(l=`*${l}*`);const m=[`${l??"<unknown>"}`,`z: ${u}`,h&&`zo: ${h.map(A=>"function"==typeof A?`${A()} (fn)`:A).join(" / ")}`,g&&"(virtual parent)"].filter(A=>!!A).join(" ");let y=m,x=1;for(;null!=a[y]&&x<100;)y=`${m} (${x++})`;return a[y]=r,a},{}))}buildDirtyTree(e){var i;if(e.dirty===M.NONE)return{dirtyTree:{},paths:[]};const n=e.children.map(r=>this.buildDirtyTree(r)).filter(r=>r.paths.length>0),o=null!==(i=e instanceof W?e.name:null)&&void 0!==i?i:e.id,a=0===n.length?[o]:n.map(r=>r.paths).reduce((r,l)=>r.concat(l),[]).map(r=>`${o}.${r}`);return{dirtyTree:Object.assign({name:o,node:e,dirty:M[e.dirty]},n.map(r=>r.dirtyTree).filter(r=>void 0!==r.dirty).reduce((r,l)=>{var c;return r[null!==(c=l.name)&&void 0!==c?c:"<unknown>"]=l,r},{})),paths:a}}}return s.className="Scene",s})();function Tf(s){return new Promise(t=>{setTimeout(()=>t(void 0),s)})}class Cf{constructor(){this.cache=new WeakMap}call(t,...e){let i,n=this.cache.get(t);const o=()=>{try{const a=t(...e);return n&&null!=i&&n.set(i,a),a}catch(a){return void G.warnOnce("User callback errored, ignoring",a)}};try{i=JSON.stringify(e)}catch{return o()}return null==n&&(n=new Map,this.cache.set(t,n)),n.has(i)?n.get(i):o()}invalidateCache(){this.cache=new WeakMap}}class Nf{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext()})}acquireImmediately(t){return R(this,void 0,void 0,function*(){return!!this.available&&(yield this.acquire(t),!0)})}waitForClearAcquireQueue(){return R(this,void 0,void 0,function*(){return this.acquire(()=>R(this,void 0,void 0,function*(){}))})}dispatchNext(){var t,e;return R(this,void 0,void 0,function*(){this.available=!1;let[i,n]=null!==(t=this.acquireQueue.shift())&&void 0!==t?t:[];for(;i;){try{yield i(),n?.()}catch(o){G.error("mutex callback error",o),n?.()}[i,n]=null!==(e=this.acquireQueue.shift())&&void 0!==e?e:[]}this.available=!0})}}function Cc(s,t){let n,o,e=0,i=!1;const a=()=>i,r=()=>{i=!1,o?.(),o=void 0,n=void 0,e>0&&s(l)},l=()=>{const c=e;e=0,i=!0;const d=t({count:c});d?d.then(r).catch(r):r()};return{schedule(c){0===e&&!a()&&s(l,c),e++},await(){return R(this,void 0,void 0,function*(){if(a())for(null==n&&(n=new Promise(c=>{o=c}));a();)yield n})}}}class On{static init(t){typeof ResizeObserver<"u"?this.resizeObserver=new ResizeObserver(e=>{for(const i of e){const{width:n,height:o}=i.contentRect;this.checkSize(this.elements.get(i.target),i.target,n,o)}}):this.pollerHandler=window.setInterval(()=>{this.elements.forEach((i,n)=>{this.checkClientSize(n,i)})},100),this.ready=!0,this.documentReady="loading"!==t.readyState,!this.documentReady&&(this.readyEventFn=()=>{const e="loading"!==t.readyState,i=this.documentReady;if(this.documentReady=e,e&&e!==i){for(const[n,o]of this.queuedObserveRequests)this.observe(n,o);this.queuedObserveRequests.length=0}},t.addEventListener("DOMContentLoaded",this.readyEventFn))}static destroy(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),this.readyEventFn&&(document.removeEventListener("DOMContentLoaded",this.readyEventFn),this.readyEventFn=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1}static checkSize(t,e,i,n){t&&(!t.size||i!==t.size.width||n!==t.size.height)&&(t.size={width:i,height:n},t.cb(t.size,e))}static observe(t,e){this.ready||this.init(t.ownerDocument),this.documentReady?(this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e})):this.queuedObserveRequests.push([t,e])}static unobserve(t,e=!0){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),this.queuedObserveRequests=this.queuedObserveRequests.filter(([i])=>i===t),e&&0===this.elements.size&&this.destroy()}static checkClientSize(t,e){this.checkSize(e,t,t.clientWidth?t.clientWidth:0,t.clientHeight?t.clientHeight:0)}}On.elements=new Map,On.ready=!1,On.documentReady=!1,On.queuedObserveRequests=[];class Nc{constructor(){this.range="tooltip"}}v([_(qs("tooltip","node")),b("design:type",String)],Nc.prototype,"range",void 0);var $=function(s){return s[s.FULL=0]="FULL",s[s.PROCESS_DATA=1]="PROCESS_DATA",s[s.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",s[s.SERIES_UPDATE=3]="SERIES_UPDATE",s[s.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",s[s.SCENE_RENDER=5]="SCENE_RENDER",s[s.NONE=6]="NONE",s}($||{});class Pa{constructor(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}}function ie(s,t){var e;const i=function If(s){if(void 0===s)return[];let[t,e]=s;return t=+t,e=+e,0===t&&0===e?[0,1]:t===1/0&&e===-1/0?[]:(t===1/0&&(t=0),e===-1/0&&(e=0),ae(t)&&ae(e)?[t,e]:[])}(s);if(0===i.length)return i;let[n,o]=i;if(n===o){const[a,r]=null!==(e=t?.calculatePadding(n,o))&&void 0!==e?e:[1,1];n-=a,o+=r}return[n,o]}const En=Symbol("invalid");class wc{constructor(t){const{props:e,mode:i="standalone"}=t;this.mode=i;let n=!0;for(const r of e){if("key"===r.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===r.type&&n&&(n=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=e.filter(r=>"key"===r.type).map((r,l)=>Object.assign(Object.assign({},r),{index:l,missing:0})),this.values=e.filter(r=>"value"===r.type).map((r,l)=>Object.assign(Object.assign({},r),{index:l,missing:0})),this.aggregates=e.filter(r=>"aggregate"===r.type).map((r,l)=>Object.assign(Object.assign({},r),{index:l})),this.groupProcessors=e.filter(r=>"group-value-processor"===r.type).map((r,l)=>Object.assign(Object.assign({},r),{index:l})),this.propertyProcessors=e.filter(r=>"property-value-processor"===r.type).map((r,l)=>Object.assign(Object.assign({},r),{index:l})),this.reducers=e.filter(r=>"reducer"===r.type).map((r,l)=>Object.assign(Object.assign({},r),{index:l})),this.processors=e.filter(r=>"processor"===r.type).map((r,l)=>Object.assign(Object.assign({},r),{index:l}));for(const r of this.values)if(null==r.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(r)}`);const o=({matchGroupIds:r})=>{for(const l of r??[])if(!this.values.some(c=>c.groupId===l))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${l}).`)},a=({matchIds:r})=>{for(const l of r??[])if(!this.values.some(c=>{var d;return null===(d=c.ids)||void 0===d?void 0:d.some(([u,h])=>u===l[0]&&h===l[1])}))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${l}).`)};for(const r of[...this.groupProcessors,...this.aggregates])a(r),o(r)}resolveProcessedDataIndexById(t,e){var i;const{index:n,def:o}=null!==(i=this.resolveProcessedDataDefById(t,e))&&void 0!==i?i:{};return{index:n,def:o}}resolveProcessedDataIndicesById(t,e){return this.resolveProcessedDataDefsById(t,e).map(({index:i,def:n})=>({index:i,def:n}))}resolveProcessedDataDefById(t,e){return this.resolveProcessedDataDefsById(t,e)[0]}resolveProcessedDataDefsByIds(t,e){const i=[];for(const n of e)i.push([n,this.resolveProcessedDataDefsById(t,n)]);return i}resolveProcessedDataDefsValues(t,{keys:e,values:i}){const n={};for(const[o,[{index:a,def:r}]]of t)n[o]=("key"===r.type?e:i)[a];return n}resolveProcessedDataDefsById(t,e){const{keys:i,values:n,aggregates:o,groupProcessors:a,reducers:r}=this,l=u=>{const{ids:h,scopes:f}=u;return!(null==h||null!=t&&!f?.some(g=>g===t.id))&&h.some(([g,m])=>g===t.id&&("string"==typeof e?m===e:e.test(m)))},c=[i,n,o,a,r],d=[];for(const u of c)d.push(...u.filter(l).map(h=>({index:h.index,def:h})));if(d.length>0)return d;throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`)}getDomain(t,e,i="value",n){var o,a,r,l;let c,d;try{c=this.resolveProcessedDataIndicesById(t,e)}catch(f){if("string"!=typeof e&&/didn't find property definition/.test(f.message))return[];throw f}switch(i){case"key":d="keys";break;case"value":d="values";break;case"aggregate":d="aggValues";break;case"group-value-processor":d="groups";break;default:return[]}const u=null!==(a=null===(o=n.domain[d])||void 0===o?void 0:o[c[0].index])&&void 0!==a?a:[];if(1===c.length)return u;const h=[...u];for(const f of c.slice(1))ps(null!==(l=null===(r=n.domain[d])||void 0===r?void 0:r[f.index])&&void 0!==l?l:[],h);return h}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:n,groupProcessors:o,reducers:a,processors:r,propertyProcessors:l}=this,c=performance.now();for(const h of[...this.keys,...this.values])h.missing=0;if(e&&0===this.keys.length)return;let d=this.extractData(t);e?d=this.groupData(d):i&&(d=this.groupData(d,i(d))),o.length>0&&this.postProcessGroups(d),n.length>0&&this.aggregateData(d),l.length>0&&this.postProcessProperties(d),a.length>0&&this.reduceData(d),r.length>0&&this.postProcessData(d);for(const h of[...this.keys,...this.values])t.length>0&&h.missing>=t.length&&G.warnOnce(`the key '${h.property}' was not found in any data element.`);const u=performance.now();return d.time=u-c,Mt.check(!0,"data-model")&&function Pf(s){var t,e;const i=(n,o)=>{o.length>0&&(G.log(`DataModel.processData() - ${n}`),G.table(o))};if(G.log("DataModel.processData() - processedData",s),i("Key Domains",s.domain.keys),i("Group Domains",null!==(t=s.domain.groups)&&void 0!==t?t:[]),i("Value Domains",s.domain.values),i("Aggregate Domains",null!==(e=s.domain.aggValues)&&void 0!==e?e:[]),"grouped"===s.type){const n=s.data.reduce((o,a)=>{var r,l;const c=null!==(r=a.keys)&&void 0!==r?r:[],d=null!==(l=a.aggValues)&&void 0!==l?l:[],u=a.keys.map(()=>{}),h=d?.map(()=>{});return o.push(...a.values.map((f,g)=>[...0===g?c:u,...f??[],...0==g?d:h])),o},[]);i("Values",n)}else{const n=s.data.reduce((o,a)=>{var r;const l=null!==(r=a.aggValues)&&void 0!==r?r:[];return o.push([...a.keys,...a.values,...l]),o},[]);i("Values",n)}}(d),d}valueGroupIdxLookup({matchGroupIds:t,matchIds:e}){return this.values.map((i,n)=>({def:i,index:n})).filter(({def:i})=>!(t&&(null==i.groupId||!t.includes(i.groupId)))&&(!e||null!=i.ids&&e.some(([n,o])=>{var a;return null===(a=i.ids)||void 0===a?void 0:a.some(([r,l])=>r===n&&l===o)}))).map(({index:i})=>i)}valueIdxLookup(t,e){const i=null==t||0===t.length,n=l=>null==l||(i===(null==l||0===l.length)||l?.some(u=>t.includes(u))),o="string"==typeof e?e:e.id,r=this.values.findIndex(l=>{var c;return n(l.scopes)&&((null===(c=l.ids)||void 0===c?void 0:c.some(d=>(([l,c])=>n([l])&&c===o)(d)))||l.property===o||l.id===o)});if(r>=0)return r;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`)}extractData(t){var e;const{keys:i,values:n,opts:{dataVisible:o}}=this,{dataDomain:a,processValue:r,scopes:l,allScopesHaveSameDefs:c}=this.initDataDomainProcessor(),d=new Array(o?t.length:0);let u=0,h=0;for(const g of t){const m=l.size>0?new Set(l):void 0,y=o?new Array(i.length):void 0;let A,x=0;for(const O of i){if(A=r(O,g,A),A===En)break;y&&(y[x++]=A)}if(A===En)continue;const S=o&&n.length>0?new Array(n.length):void 0;let E,k=0;for(const O of n)if(E=r(O,g,E),E===En){if(c)break;for(const D of null!==(e=O.scopes)&&void 0!==e?e:l)m?.delete(D);if(k++,0===m?.size)break}else S&&(S[k++]=E);if((E!==En||!c)&&0!==m?.size&&o){const O={datum:g,keys:y,values:S};!c&&m&&m.size<l.size&&(h++,O.validScopes=[...m]),d[u++]=O}}d.length=u;const f=g=>{const m=a.get(g).getDomain();return Array.isArray(m)&&m[0]>m[1]?[]:[...m]};return{type:"ungrouped",input:{count:t.length},data:d,domain:{keys:i.map(g=>f(g)),values:n.map(g=>f(g))},defs:{allScopesHaveSameDefs:c,keys:i,values:n},partialValidDataCount:h,time:0}}groupData(t,e){var i,n,o,a;const r=new Map;for(const u of t.data){const{keys:h,values:f,datum:g,validScopes:m}=u,y=e?e(u):h,x=y.map(t=>null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t).join("-");if(r.has(x)){const A=r.get(x);if(A.values.push(f),A.datum.push(g),null!=m)for(let S=0;S<(null!==(n=null===(i=A.validScopes)||void 0===i?void 0:i.length)&&void 0!==n?n:0);S++){const k=null===(o=A.validScopes)||void 0===o?void 0:o[S];m.some(E=>E===k)||null===(a=A.validScopes)||void 0===a||a.splice(S,1)}}else r.set(x,{keys:y,values:[f],datum:[g],validScopes:m})}const l=new Array(r.size),c=new Array(r.size);let d=0;for(const[,{keys:u,values:h,datum:f,validScopes:g}]of r.entries())0!==g?.length&&(c[d]=u,l[d++]={keys:u,values:h,datum:f,validScopes:g});return Object.assign(Object.assign({},t),{type:"grouped",data:l,domain:Object.assign(Object.assign({},t.domain),{groups:c})})}aggregateData(t){var e,i,n,o,a,r,l,c;const{aggregates:d}=this;if(!d)return;const u=d.map(()=>[1/0,-1/0]),h=d.map(y=>this.valueGroupIdxLookup(y)),f=d.map(y=>y.aggregateFunction),g=d.map(y=>y.groupAggregateFunction),m=d.map(y=>y.finalFunction);for(const y of t.data){let{values:x}=y;const{validScopes:A}=y;null!==(e=y.aggValues)&&void 0!==e||(y.aggValues=new Array(h.length)),"ungrouped"===t.type&&(x=[x]);let S=0;for(const k of h){if(null!==(i=A?.some(T=>{var w;return null===(w=d[S].matchScopes)||void 0===w?void 0:w.some(C=>T===C)}))&&void 0!==i&&!i){S++;continue}let O=null!==(o=null===(n=g[S])||void 0===n?void 0:n.call(g))&&void 0!==o?o:ps([]);for(const T of x){const w=k.map(N=>T[N]),C=f[S](w,y.keys);C&&(O=null!==(r=null===(a=g[S])||void 0===a?void 0:a.call(g,C,O))&&void 0!==r?r:ps(C,O))}const D=(null!==(c=null===(l=m[S])||void 0===l?void 0:l.call(m,O))&&void 0!==c?c:O).map(T=>{return s=T,Number.isInteger(s)?s:Math.abs(s)>1e4?Math.trunc(s):Math.round(1e4*s)/1e4;var s});ps(D,u[S]),y.aggValues[S++]=D}}t.domain.aggValues=u}postProcessGroups(t){var e,i,n,o,a;const{groupProcessors:r}=this;if(!r)return;const l=new Set,c=new Map,d=new Map,u=new Map;for(const f of r){const g=this.valueGroupIdxLookup(f);d.set(f,g),u.set(f,f.adjust());for(const m of g){const y=this.values[m];l.add(m),c.set(m,new Pa("category"===y.valueType?"discrete":"continuous"))}}const h=f=>{var g;for(const m of l)null===(g=c.get(m))||void 0===g||g.extend(f[m])};for(const f of t.data){for(const g of r){if(null!==(i=null===(e=f.validScopes)||void 0===e?void 0:e.some(A=>{var S;return null===(S=g.matchScopes)||void 0===S?void 0:S.some(k=>A===k)}))&&void 0!==i&&!i)continue;const y=null!==(n=d.get(g))&&void 0!==n?n:[],x=null!==(a=null===(o=u.get(g))||void 0===o?void 0:o())&&void 0!==a?a:()=>{};if("grouped"!==t.type)f.values&&x(f.values,y);else for(const A of f.values)A&&x(A,y)}if("grouped"===t.type)for(const g of f.values)h(g);else h(f.values)}for(const[f,g]of c)t.domain.values[f]=[...g.getDomain()]}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:n,scopes:o}of e)i()(t,this.valueIdxLookup(o??[],n))}reduceData(t){var e,i,n;const{reducers:o}=this,a=o.map(c=>c.scopes),r=o.map(c=>c.reducer()),l=o.map(c=>c.initialValue);for(const c of t.data){let d=0;for(const u of r)null===(i=null===(e=c.validScopes)||void 0===e?void 0:e.some(f=>{var g;return null===(g=a[d])||void 0===g?void 0:g.some(m=>f===m)}))||void 0===i||i?(l[d]=u(l[d],c),d++):d++}for(let c=0;c<l.length;c++)null!==(n=t.reduced)&&void 0!==n||(t.reduced={}),t.reduced[o[c].property]=l[c]}postProcessData(t){var e;const{processors:i}=this;for(const n of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[n.property]=n.calculate(t)}initDataDomainProcessor(){var t;const{keys:e,values:i}=this,n=new Set;for(const f of i)for(const g of null!==(t=f.scopes)&&void 0!==t?t:[])n.add(g);const o=n.size,a=new Map,r=new Map;let l=!0;const c=(f,g,m=a)=>{var y;"category"===g?m.set(f,new Pa("discrete")):(m.set(f,new Pa("continuous")),l&&(l=(null!==(y=f.scopes)&&void 0!==y?y:[]).length===o))},d=()=>{e.forEach(f=>c(f,f.valueType)),i.forEach(f=>c(f,f.valueType))};d();const u=this.buildAccessors(...e,...i);return{dataDomain:a,processValue:(f,g,m)=>{var y,x,A,S;let O,E=!1;if(f.property in u){try{O=u[f.property](g)}catch{}E=void 0!==O}else E=f.property in g,O=E?g[f.property]:f.missingValue;if(null!=f.forceValue&&(O=E&&is(O)?-1*f.forceValue:f.forceValue,E=!0),!E&&!("missingValue"in f)&&f.missing++,a.has(f)||d(),E&&null!==(x=null===(y=f.validation)||void 0===y?void 0:y.call(f,O,g))&&void 0!==x&&!x){if(!("invalidValue"in f))return En;O=f.invalidValue}return f.processor&&(r.has(f)||r.set(f,f.processor()),O=null===(A=r.get(f))||void 0===A?void 0:A(O,m!==En?m:void 0)),null===(S=a.get(f))||void 0===S||S.extend(O),O},initDataDomain:d,scopes:n,allScopesHaveSameDefs:l}}buildAccessors(...t){const e={};if("integrated"===this.mode)return e;for(const i of t){if(!(i.property.indexOf(".")>=0||i.property.indexOf("[")>=0))continue;let o;o=i.property.startsWith("[")?`return datum${i.property};`:`return datum.${i.property};`,e[i.property]=new Function("datum",o)}return e}}class Mc{constructor(t){this.mode=t,this.debug=Mt.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,e,i){return R(this,void 0,void 0,function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise((n,o)=>{this.requested.push({id:t,opts:i,data:e,resultCb:n,reject:o})})})}execute(){return R(this,void 0,void 0,function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.mergeRequested();this.debug("DataController.execute() - merged",t);const e=Mt.check(!0,"data-model");e&&(window.processedData=[]);for(const{opts:i,data:n,resultCbs:o,rejects:a,ids:r}of t)try{const l=new wc(Object.assign(Object.assign({},i),{mode:this.mode})),c=l.processData(n);e&&window.processedData.push(c),c&&0===c.partialValidDataCount?o.forEach(d=>d({dataModel:l,processedData:c})):c?this.splitResult(l,c,r,o):a.forEach(d=>d(new Error("AG Charts - no processed data generated")))}catch(l){a.forEach(c=>c(l))}})}mergeRequested(){const t=[],e=r=>r.filter(l=>"key"===l.type).map(l=>l.property).join(";"),i=({opts:r,data:l})=>c=>c[0].data===l&&c[0].opts.groupByKeys===r.groupByKeys&&c[0].opts.dataVisible===r.dataVisible&&c[0].opts.groupByFn===r.groupByFn&&e(c[0].opts.props)===e(r.props),n=r=>l=>{var c;if(l.type!==r.type)return!1;const d=null!==(c=qe(l,r))&&void 0!==c?c:{};return delete d.scopes,delete d.id,delete d.ids,0===Object.keys(d).length},o=r=>Object.assign(Object.assign({},r[0]),{props:r.reduce((l,c)=>{var d,u,h,f,g,m;for(const y of c.props){null!=y.id&&(null!==(d=y.ids)&&void 0!==d||(y.ids=[]),null===(u=y.scopes)||void 0===u||u.forEach(A=>{var S;return null===(S=y.ids)||void 0===S?void 0:S.push([A,y.id])}));const x=l.find(n(y));x?(null!==(h=x.scopes)&&void 0!==h||(x.scopes=[]),x.scopes.push(...null!==(f=y.scopes)&&void 0!==f?f:[]),("key"===x.type||"value"===x.type)&&(null===(g=x.ids)||void 0===g||g.push(...null!==(m=y.ids)&&void 0!==m?m:[]))):l.push(y)}return l},[])});for(const r of this.requested){const l=t.find(i(r));l?l.push(r):t.push([r])}return t.map(r=>({ids:r.map(({id:l})=>l),resultCbs:r.map(({resultCb:l})=>l),rejects:r.map(({reject:l})=>l),data:r[0].data,opts:o(r.map(({opts:l})=>l))}))}splitResult(t,e,i,n){for(let o=0;o<i.length;o++){const a=i[o];(0,n[o])({dataModel:t,processedData:Object.assign(Object.assign({},e),{data:e.data.filter(({validScopes:l})=>null==l||l.some(c=>c===a))})})}}}class Ff{constructor(t){this.getSeries=t}}class Ss{constructor(){this.listeners=new lo}addListener(t,e,i){return this.listeners.addListener(t,e,i)}removeListener(t){this.listeners.removeListener(t)}}const Rc=[!0,"animation"];class Lc extends Ss{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new Ic,this.debug=Mt.create(...Rc),this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e,i,{disableInteractions:n=!0,immutable:o=!0}=t,a=pe(t,["disableInteractions","immutable"]);const{batch:r}=this;try{if(null!=a.id&&r.controllers.has(a.id)){if(!o)return r.controllers.get(a.id).reset(a);r.controllers.get(a.id).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${a.id}`),this.batch.skip()}}catch(d){return void this.failsafeOnError(d)}const l=null!==(e=a.id)&&void 0!==e?e:Math.random().toString(),c=this.isSkipped();return c&&this.debug("AnimationManager - skipping animation"),new ml(Object.assign(Object.assign({},a),{id:l,skip:c,autoplay:!!this.isPlaying&&a.autoplay,duration:null!==(i=a.duration)&&void 0!==i?i:this.defaultDuration,onPlay:d=>{var u;r.controllers.set(l,d),this.requestAnimation(),n&&this.interactionManager.pause("animation"),null===(u=a.onPlay)||void 0===u||u.call(d,d)},onStop:d=>{var u;r.controllers.delete(l),n&&this.interactionManager.resume("animation"),null===(u=a.onStop)||void 0===u||u.call(d,d)}}))}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");for(const t of this.batch.controllers.values())try{t.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");for(const t of this.batch.controllers.values())try{t.pause()}catch(e){this.failsafeOnError(e)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()");for(const t of this.batch.controllers.values())try{t.stop()}catch(e){this.failsafeOnError(e,!1)}}stopByAnimationId(t){var e;try{null!=t&&this.batch.controllers.has(t)&&(null===(e=this.batch.controllers.get(t))||void 0===e||e.stop())}catch(i){return void this.failsafeOnError(i)}}stopByAnimationGroupId(t){for(const e of this.batch.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){Mt.check(...Rc)&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}requestAnimation(){if(!this.batch.isActive()||null!==this.requestId)return;let t;const e=i=>R(this,void 0,void 0,function*(){const n=()=>R(this,void 0,void 0,function*(){const o=i-(t??i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.controllers.size});for(const a of this.batch.controllers.values())try{a.update(o)}catch(r){this.failsafeOnError(r)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:o})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(n):yield this.chartUpdateMutex.acquire(n),this.batch.isActive()&&this.scheduleAnimationFrame(e)});this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){G.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new Ic,!0===t&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.controllers.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1)}}class Ic{constructor(){this.controllers=new Map,this.skipAnimations=!1}isActive(){return this.controllers.size>0}skip(t=!0){if(!1===this.skipAnimations&&!0===t){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=t}isSkipped(){return this.skipAnimations}destroy(){}}class Pc extends Ss{legendItemClick(t,e,i,n){this.listeners.dispatch("legend-item-click",{type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:n})}legendItemDoubleClick(t,e,i,n,o){this.listeners.dispatch("legend-item-double-click",{type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:o,numVisibleItems:n})}axisHover(t,e){this.listeners.dispatch("axis-hover",{type:"axis-hover",axisId:t,direction:e})}}class Fc{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}getCursor(){return this.element.style.cursor}}class Bc extends Ss{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(t,e){this.highlightStates.delete(t),null!=e&&this.highlightStates.set(t,e),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.delete(t),null!=e&&this.pickedStates.set(t,e),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){const{activeHighlight:t}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,t)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:t})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(t,e){return t===e||t?.series===e?.series&&t?.itemId===e?.itemId&&t?.datum===e?.datum}}const Gc=["pagehide","mousemove","mouseup"],Yc=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"];class mi extends Ss{constructor(t,e,i){super(),this.eventHandler=n=>this.processEvent(n),this.mouseDown=!1,this.touchDown=!1,this.pausers={animation:0,"context-menu":0},this.rootElement=e.body,this.element=t,this.window=i;for(const n of Yc)n.startsWith("touch")?t.addEventListener(n,this.eventHandler,{passive:!0}):"wheel"===n?t.addEventListener(n,this.eventHandler,{passive:!1}):t.addEventListener(n,this.eventHandler);for(const n of Gc)this.window.addEventListener(n,this.eventHandler);mi.interactionDocuments.includes(e)||(Aa(e,"\n.ag-chart-wrapper {\n    touch-action: none;\n}\n"),mi.interactionDocuments.push(e))}destroy(){for(const t of Gc)this.window.removeEventListener(t,this.eventHandler);for(const t of Yc)this.element.removeEventListener(t,this.eventHandler)}resume(t){this.pausers[t]--}pause(t){this.pausers[t]++}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.dispatchEvent(t,e).catch(i=>G.errorOnce(i))}dispatchEvent(t,e){return R(this,void 0,void 0,function*(){const i=this.calculateCoordinates(t);if(null==i)return;const n=Object.entries(this.pausers).filter(([,o])=>o>0).map(([o])=>o);for(const o of e)this.listeners.dispatchWrapHandlers(o,(a,r,l)=>{var c;n.length>0&&(null===(c=r?.bypassPause)||void 0===c||!c.some(d=>n.includes(d)))||l.consumed||a(l)},this.buildEvent(Object.assign({type:o,event:t,pauses:n},i)))})}decideInteractionEventTypes(t){const e="drag-start";switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,[e];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,[e];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const i=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==i?(this.mouseDown=i,[i?e:"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:i,clientY:n,pageX:o,pageY:a,offsetX:r,offsetY:l}=t;return this.fixOffsets(t,{clientX:i,clientY:n,pageX:o,pageY:a,offsetX:r,offsetY:l})}if(typeof TouchEvent<"u"&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:n,clientY:o,pageX:a,pageY:r}=i;return Object.assign(Object.assign({},mi.NULL_COORDS),{clientX:n,clientY:o,pageX:a,pageY:r})}if(t instanceof PageTransitionEvent)return t.persisted?void 0:mi.NULL_COORDS}fixOffsets(t,e){const i=n=>{let o=0,a=0;for(;n;)o+=n.offsetLeft,a+=n.offsetTop,n=n.offsetParent;return{x:o,y:a}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const n=i(this.dragStartElement),o=i(t.target);e.offsetX-=n.x-o.x,e.offsetY-=n.y-o.y}return e}buildEvent(t){const{type:e,event:i,clientX:n,clientY:o,pauses:a}=t;let{offsetX:r,offsetY:l,pageX:c,pageY:d}=t;if(!ae(r)||!ae(l)){const h=this.element.getBoundingClientRect();r=n-h.left,l=o-h.top}if(!ae(c)||!ae(d)){const h=this.rootElement.getBoundingClientRect();c=n-h.left,d=o-h.top}const u={type:e,offsetX:r,offsetY:l,pageX:c,pageY:d,sourceEvent:i,consumed:!1,pauses:a,consume(){u.consumed=!0}};return u}}mi.interactionDocuments=[],mi.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class Fa{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t,this.destroyFns.push(e.addListener("hover",i=>this.checkExclusiveRects(i)))}getRange(){return this.tooltip.range}updateTooltip(t,e,i){var n;null==i&&(i=null===(n=this.states[t])||void 0===n?void 0:n.content),this.states[t]={content:i,meta:e},this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,n]of Object.entries(this.exclusiveAreas))if(n.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,n;if(e.reverse(),e.slice(0,1).forEach(o=>{var a;const{content:r,meta:l}=null!==(a=this.states[o])&&void 0!==a?a:{};i=r,n=l}),void 0===n||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const o=this.tooltip.isVisible();this.tooltip.show(n,void 0,o)}else this.tooltip.show(n,i);this.appliedState={content:i,meta:n}}static makeTooltipMeta(t,e,i,n){var o,a,r,l;const{pageX:c,pageY:d,offsetX:u,offsetY:h}=t,g={pageX:c,pageY:d,offsetX:u,offsetY:h,event:t,showArrow:i.series.tooltip.showArrow,position:{xOffset:i.series.tooltip.position.xOffset,yOffset:i.series.tooltip.position.yOffset}},m=null!==(a=null===(o=i.yBar)||void 0===o?void 0:o.upperPoint)&&void 0!==a?a:i.midPoint;if("node"===i.series.tooltip.position.type&&m){const{x:y,y:x}=m,A=i.series.contentGroup.inverseTransformPoint(y,x),S=e.element.getBoundingClientRect();return Object.assign(Object.assign({},g),{pageX:Math.round(S.left+n.scrollX+A.x),pageY:Math.round(S.top+n.scrollY+A.y),offsetX:Math.round(A.x),offsetY:Math.round(A.y)})}return g.enableInteraction=null!==(l=null===(r=i.series.tooltip.interaction)||void 0===r?void 0:r.enabled)&&void 0!==l&&l,g}}class Uc extends Ss{constructor(){super(...arguments),this.axes={}}updateAxes(t){var e;const i=new Set(Object.keys(this.axes));t.forEach(n=>{var o,a,r;i.delete(n.id),null!==(o=(a=this.axes)[r=n.id])&&void 0!==o||(a[r]=new Gf(n))}),i.forEach(n=>{delete this.axes[n]}),!(null===(e=this.initialZoom)||void 0===e)&&e.newZoom&&this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0}updateZoom(t,e){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach(i=>{i.updateZoom(t,e?.[i.getDirection()])}),this.applyStates()):this.initialZoom={callerId:t,newZoom:e}}updateAxisZoom(t,e,i){var n;null===(n=this.axes[e])||void 0===n||n.updateZoom(t,i),this.applyStates()}getZoom(){let t,e;if(Object.values(this.axes).forEach(i=>{i.getDirection()===P.X?t=i.getZoom():i.getDirection()===P.Y&&(e=i.getZoom())}),t||e)return{x:t,y:e}}getAxisZoom(t){var e;return null===(e=this.axes[t])||void 0===e?void 0:e.getZoom()}getAxisZooms(){const t={};for(const[e,i]of Object.entries(this.axes))t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyStates(){if(!Object.values(this.axes).map(n=>n.applyStates()).some(Boolean))return;const e=this.getZoom(),i={};for(const[n,o]of Object.entries(this.axes))i[n]=o.getZoom();this.listeners.dispatch("zoom-change",Object.assign(Object.assign({type:"zoom-change"},e??{}),{axes:i}))}}class Gf{constructor(t){this.states={},this.axis=t;const[e=0,i=1]=t.visibleRange;this.currentZoom={min:e,max:i},this.states.__initial__=this.currentZoom}getDirection(){return this.axis.direction}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e))}getZoom(){return this.currentZoom}applyStates(){var t,e;const i=this.currentZoom,n=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Object.assign({},this.states[n]),i?.min!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||i?.max!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max)}}class jc extends lo{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error(`AG Charts - unsupported listener type: ${t}`)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce((i,n)=>{try{return n.handler(i)}catch(o){return G.errorOnce(o),i}},e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}}function Yf({orientation:s,bboxes:t,maxHeight:e,maxWidth:i,itemPaddingY:n=0,itemPaddingX:o=0,forceResult:a=!1}){const r="horizontal"===s,l={max:r?i:e,fn:r?h=>h.width:h=>h.height,padding:r?o:n},c={max:r?e:i,fn:r?h=>h.height:h=>h.width,padding:r?n:o};let d=0;const u=[];for(;d<t.length;){const f=Uf(t.slice(d),d,l,c,a);if(!f)return;d+=f.processedBBoxCount,u.push(f.pageIndices)}return function zf(s,t,e,i,n){let o=0,a=0;return{pages:s.map(l=>{"horizontal"===t&&(l=function Wf(s){const t=[];for(const e of s[0])t.push([]);return s.forEach((e,i)=>{e.forEach((n,o)=>{t[o][i]=n})}),t}(l));let c=0;const d=l.map(f=>{const g=f.map(x=>(c=Math.max(x,c),e[x]));let m=0,y=0;return g.forEach(x=>{m+=x.height+i,y=Math.max(y,x.width+n)}),{indices:f,bboxes:g,columnHeight:Math.ceil(m),columnWidth:Math.ceil(y)}});let u=0,h=0;return d.forEach(f=>{u+=f.columnWidth,h=Math.max(h,f.columnHeight)}),o=Math.max(u,o),a=Math.max(h,a),{columns:d,startIndex:l[0][0],endIndex:c,pageWidth:u,pageHeight:h}}),maxPageWidth:o,maxPageHeight:a}}(u,s,t,n,o)}function Uf(s,t,e,i,n){let a=function Vf(s,t){const e=s.length;let i=0;for(let n=0;n<e;n++)if(i+=t.fn(s[n])+t.padding,i>t.max)return e/n<2?Math.ceil(e/2):n;return e}(s,e);if(a<1){if(!n)return;a=1}for(let r=a;r>=1;r--){const l=jf(s,t,r,e,i,n);if(null==l&&r<=1)return;if(null!=l){if("number"!=typeof l)return{processedBBoxCount:l.length*l[0].length,pageIndices:l};if(l<=1)return;r=l<r&&l>1?l:r}}}function jf(s,t,e,i,n,o){var a;const r=[];let l=0,c=0,d=[];const u=[];for(let h=0;h<s.length;h++){const f=(h+e)%e;0===f&&(l+=c,c=0,d.length>0&&r.push(d),d=[]);const g=i.fn(s[h])+i.padding;if(u[f]=Math.max(null!==(a=u[f])&&void 0!==a?a:0,g),c=Math.max(c,n.fn(s[h])+n.padding),l+c>n.max&&(!o||r.length>0)){d=[];break}if(u.reduce((A,S)=>A+S,0)>i.max&&!o)return u.length<e?u.length:void 0;d.push(h+t)}return d.length>0&&r.push(d),r.length>0?r:void 0}let Hf=(()=>{class s extends Ae{updatePath(){super.applyPath(this.size/4.2,s.moves)}}return s.className="Cross",s.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],s})(),zc=(()=>{class s extends Ae{updatePath(){super.applyPath(this.size/2,s.moves)}}return s.className="Diamond",s.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],s})(),Xf=(()=>{class s extends Ae{rad(e){return e/180*Math.PI}updatePath(){const{x:e,path:i,size:n,rad:o}=this,a=n/4,r=this.y+a/2;i.clear(),i.arc(e-a,r-a,a,o(130),o(330)),i.arc(e+a,r-a,a,o(220),o(50)),i.lineTo(e,r+a),i.closePath()}}return s.className="Heart",s})(),Kf=(()=>{class s extends Ae{updatePath(){super.applyPath(this.size/3,s.moves)}}return s.className="Plus",s.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],s})(),_s=(()=>{class s extends Ae{updatePath(){const{path:e,x:i,y:n}=this,o=this.size/2;e.clear(),e.moveTo(this.align(i-o),this.align(n-o)),e.lineTo(this.align(i+o),this.align(n-o)),e.lineTo(this.align(i+o),this.align(n+o)),e.lineTo(this.align(i-o),this.align(n+o)),e.closePath()}}return s.className="Square",s})(),Dn=(()=>{class s extends Ae{updatePath(){super.applyPath(1.1*this.size,s.moves)}}return s.className="Triangle",s.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],s})();const Wc={circle:ro,cross:Hf,diamond:zc,heart:Xf,plus:Kf,square:_s,triangle:Dn},$f=Object.keys(Wc);function Vc(s){return $f.includes(s)}function wi(s=_s){return Vc(s)?Wc[s]:"function"==typeof s?s:_s}class le extends W{constructor(){super({name:"markerLabelGroup"}),this.label=new z,this._marker=new _s,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=ut.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const e=this.markerSize;this.marker.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}le.className="MarkerLabel",v([Rt("label"),b("design:type",String)],le.prototype,"text",void 0),v([Rt("label"),b("design:type",String)],le.prototype,"fontStyle",void 0),v([Rt("label"),b("design:type",String)],le.prototype,"fontWeight",void 0),v([Rt("label"),b("design:type",Number)],le.prototype,"fontSize",void 0),v([Rt("label"),b("design:type",String)],le.prototype,"fontFamily",void 0),v([Rt("label","fill"),b("design:type",String)],le.prototype,"color",void 0),v([Rt("marker","fill"),b("design:type",String)],le.prototype,"markerFill",void 0),v([Rt("marker","stroke"),b("design:type",String)],le.prototype,"markerStroke",void 0),v([Rt("marker","strokeWidth"),b("design:type",Number)],le.prototype,"markerStrokeWidth",void 0),v([Rt("marker","fillOpacity"),b("design:type",Number)],le.prototype,"markerFillOpacity",void 0),v([Rt("marker","strokeOpacity"),b("design:type",Number)],le.prototype,"markerStrokeOpacity",void 0);class Tn{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}v([_(_e),b("design:type",String)],Tn.prototype,"color",void 0),v([_(_i),b("design:type",String)],Tn.prototype,"fontStyle",void 0),v([_(Ai),b("design:type",String)],Tn.prototype,"fontWeight",void 0),v([_(I(0)),b("design:type",Number)],Tn.prototype,"fontSize",void 0),v([_(Qt),b("design:type",String)],Tn.prototype,"fontFamily",void 0);class yi{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}v([_(I(0)),b("design:type",Object)],yi.prototype,"size",void 0),v([_(Ot),b("design:type",String)],yi.prototype,"fill",void 0),v([_(J(0,1)),b("design:type",Number)],yi.prototype,"fillOpacity",void 0),v([_(Ot),b("design:type",String)],yi.prototype,"stroke",void 0),v([_(I(0)),b("design:type",Number)],yi.prototype,"strokeWidth",void 0),v([_(I(0,1)),b("design:type",Number)],yi.prototype,"strokeOpacity",void 0);class vo{constructor(t){this.parent=t,this.shape=Dn,this.size=15,this.padding=8}}v([Zt({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}}),b("design:type",Object)],vo.prototype,"shape",void 0),v([_(I(0)),b("design:type",Object)],vo.prototype,"size",void 0),v([_(I(0)),b("design:type",Number)],vo.prototype,"padding",void 0);let Zf=(()=>{class s{constructor(e,i,n,o){this.chartUpdateCallback=e,this.pageUpdateCallback=i,this.interactionManager=n,this.cursorManager=o,this.id=ci(this),this.group=new W({name:"pagination"}),this.labelNode=new z,this.marker=new vo(this),this.activeStyle=new yi,this.inactiveStyle=new yi,this.highlightStyle=new yi,this.label=new Tn,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new Dn,this._previousButton=new Dn;const{labelNode:a}=this;a.textBaseline="middle",a.fontSize=12,a.fontFamily="Verdana, sans-serif",a.fill="black",a.y=ut.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,a]),this.interactionManager.addListener("click",r=>this.onPaginationClick(r)),this.interactionManager.addListener("hover",r=>this.onPaginationMouseMove(r)),this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){"horizontal"===(this._orientation=e,e)?(this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2):(this.previousButton.rotation=0,this.nextButton.rotation=Math.PI)}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:i}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+i}updateNextButtonPosition(){const e=this.labelNode.computeBBox();this.nextButton.translationX=e.x+e.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:e,totalPages:i,labelNode:n,label:{color:o,fontStyle:a,fontWeight:r,fontSize:l,fontFamily:c}}=this;n.text=`${e+1} / ${i}`,n.fill=o,n.fontStyle=a,n.fontWeight=r,n.fontSize=l,n.fontFamily=c}updateMarkers(){const{nextButton:e,previousButton:i,nextButtonDisabled:n,previousButtonDisabled:o,activeStyle:a,inactiveStyle:r,highlightStyle:l,highlightActive:c}=this,d=(u,h)=>h?r:u===c?l:a;this.updateMarker(e,d("next",n)),this.updateMarker(i,d("previous",o))}updateMarker(e,i){var n;const{size:o}=this.marker;e.size=o,e.fill=i.fill,e.fillOpacity=null!==(n=i.fillOpacity)&&void 0!==n?n:1,e.stroke=i.stroke,e.strokeWidth=i.strokeWidth,e.strokeOpacity=i.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:i}=this,n=0===i,a=0===e;this.nextButtonDisabled=e===i-1||n,this.previousButtonDisabled=a||n}nextButtonContainsPoint(e,i){return!this.nextButtonDisabled&&this.nextButton.containsPoint(e,i)}previousButtonContainsPoint(e,i){return!this.previousButtonDisabled&&this.previousButton.containsPoint(e,i)}onPaginationClick(e){const{offsetX:i,offsetY:n}=e;this.nextButtonContainsPoint(i,n)?(this.incrementPage(),this.onPaginationChanged(),e.consume()):this.previousButtonContainsPoint(i,n)&&(this.decrementPage(),this.onPaginationChanged(),e.consume())}onPaginationMouseMove(e){const{offsetX:i,offsetY:n}=e;this.nextButtonContainsPoint(i,n)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(i,n)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback($.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const e=wi(this.marker.shape||Dn);this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback($.SCENE_RENDER)}attachPagination(e){e.append(this.group)}computeBBox(){return this.group.computeBBox()}}return s.className="Pagination",s})();const qf=["horizontal","vertical"],Jf=U((s,t)=>vt(s,t,e=>qf.includes(e)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class Mi{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}v([_(J(0)),b("design:type",Number)],Mi.prototype,"maxLength",void 0),v([_(_e),b("design:type",String)],Mi.prototype,"color",void 0),v([_(_i),b("design:type",String)],Mi.prototype,"fontStyle",void 0),v([_(Ai),b("design:type",String)],Mi.prototype,"fontWeight",void 0),v([_(I(0)),b("design:type",Number)],Mi.prototype,"fontSize",void 0),v([_(Qt),b("design:type",String)],Mi.prototype,"fontFamily",void 0),v([_(ti),b("design:type",Function)],Mi.prototype,"formatter",void 0);class bo{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=void 0}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}v([_(I(0)),b("design:type",Object)],bo.prototype,"size",void 0),v([_(I(0)),b("design:type",Number)],bo.prototype,"padding",void 0),v([_(J(0)),b("design:type",Object)],bo.prototype,"strokeWidth",void 0);class As{constructor(){this.marker=new bo,this.label=new Mi,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}v([_(J(0)),b("design:type",Number)],As.prototype,"maxWidth",void 0),v([_(I(0)),b("design:type",Object)],As.prototype,"paddingX",void 0),v([_(I(0)),b("design:type",Object)],As.prototype,"paddingY",void 0),v([_(ot),b("design:type",Boolean)],As.prototype,"toggleSeriesVisible",void 0);class Hc{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}v([_(ti),b("design:type",Function)],Hc.prototype,"legendItemClick",void 0);class vi{set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}constructor(t){this.ctx=t,this.id=ci(this),this.group=new W({name:"legend",layer:!0,zIndex:ft.LEGEND_ZINDEX}),this.itemSelection=lt.select(this.group,le),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new As,this.listeners=new Hc,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Zf(i=>t.updateService.update(i),i=>this.updatePageNumber(i),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("click",i=>this.checkLegendClick(i),e),t.interactionManager.addListener("dblclick",i=>this.checkLegendDoubleClick(i),e),t.interactionManager.addListener("hover",i=>this.handleLegendMouseMove(i)),t.layoutService.addListener("start-layout",i=>this.positionLegend(i.shrinkRect)),()=>this.detachLegend())}destroy(){this.destroyFns.forEach(t=>t())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,M.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":ut.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:n,label:o,maxWidth:a,marker:{size:r,padding:l,shape:c},label:{maxLength:d=1/0,fontStyle:u,fontWeight:h,fontSize:f,fontFamily:g}}=this.item,m=[...this.data];this.reverseOrder&&m.reverse(),this.itemSelection.update(m);const y=[],x=Oi(o),S=a??.8*t,k=r+l+i;if(this.itemSelection.each((L,F)=>{var V;const Z=wi(c??F.marker.shape);L.marker&&L.marker instanceof Z||(L.marker=new Z),L.markerSize=r,L.spacing=l,L.fontStyle=u,L.fontWeight=h,L.fontSize=f,L.fontFamily=g;const q=null!==(V=F.itemId)&&void 0!==V?V:F.id,nt=(this.getItemLabel(F)??"<unknown>").replace(/\r?\n/g," ");L.text=this.truncate(nt,d,S,k,x,q),y.push(L.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const E=this.size,O=this.oldSize;E[0]=t,E[1]=e,(E[0]!==O[0]||E[1]!==O[1])&&(O[0]=E[0],O[1]=E[1]);const{pages:D,maxPageHeight:T,maxPageWidth:w}=this.updatePagination(y,t,e);this.pages=D,this.maxPageSize=[w-i,T-n];const C=this.pagination.currentPage;this.pages.length<1||!this.pages[C]?this.visible=!1:(this.visible=!0,this.updatePositions(C),this.update())}truncate(t,e,i,n,o,a){const l=t.split("");let c=!1;if(t.length>e&&(t=`${t.substring(0,e)}`,c=!0),Math.floor(n+ut.getTextSize(t,o).width)>i){let u="";const h=this.getCharacterWidths(o);let f=n+h["..."];for(const g of l){if(h[g]||(h[g]=ut.getTextSize(g,o).width),f+=h[g],f>i)break;u+=g}t=u,c=!0}return c?(t+="...",this.truncatedItems.add(a)):this.truncatedItems.delete(a),t}updatePagination(t,e,i){const n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:a,maxPageHeight:r,maxPageWidth:l,paginationBBox:c,paginationVertical:d}=this.calculatePagination(t,e,i),u=a.findIndex(S=>S.endIndex>=o);this.pagination.currentPage=Math.min(Math.max(u,0),a.length-1);const{paddingX:h,paddingY:f}=this.item,y=r-f;let x=0,A=-c.y-this.item.marker.size/2;return d?A+=y+8:(x+=l-h-c.x+8,A+=(y-c.height)/2),this.pagination.translationX=x,this.pagination.translationY=A,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:r,maxPageWidth:l,pages:a}}calculatePagination(t,e,i){var n,o,a;const{paddingX:r,paddingY:l}=this.item,c=this.getOrientation(),d=["left","right"].includes(this.position);let u=this.pagination.computeBBox(),h=new H(0,0,0,0),f=[],g=0,m=0,y=0;const x=S=>{const{width:k,height:E}=S;return k===u.width&&E===u.height},A=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(y++>10){G.warn("unable to find stable legend layout.");break}u=h;const E=Yf({orientation:c,bboxes:t,maxHeight:i-(d?u.height:0),maxWidth:e-(d?0:u.width),itemPaddingY:l,itemPaddingX:r,forceResult:A});f=null!==(n=E?.pages)&&void 0!==n?n:[],g=null!==(o=E?.maxPageWidth)&&void 0!==o?o:0,m=null!==(a=E?.maxPageHeight)&&void 0!==a?a:0;const O=f.length;if(this.pagination.visible=O>1,this.pagination.totalPages=O,this.pagination.update(),h=this.pagination.computeBBox(),!this.pagination.visible)break}while(!x(h));return{maxPageWidth:g,maxPageHeight:m,pages:f,paginationBBox:u,paginationVertical:d}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:n}=this;if(n.length<1||!n[t])return;const{columns:o,startIndex:a,endIndex:r}=n[t];let l=0,c=0;const d=o.length,u=o[0].indices.length,h="horizontal"===this.getOrientation(),f=o[0].bboxes[0].height+e,g=[];i.each((m,y,x)=>{var A,S;if(x<a||x>r)return void(m.visible=!1);const k=x-a;let E=0,O=0;h?(E=k%d,O=Math.floor(k/d)):(E=Math.floor(k/u),O=k%u),m.visible=!0;const D=o[E];D&&(c=f*O,l=null!==(A=g[O])&&void 0!==A?A:0,g[O]=(null!==(S=g[O])&&void 0!==S?S:0)+D.columnWidth,m.translationX=Math.floor(l),m.translationY=Math.floor(c))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:n}=e[t];this.paginationTrackingIndex=0===i?0:t===e.length-1?n:Math.floor((i+n)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update($.SCENE_RENDER)}update(){const{label:{color:t},marker:e}=this.item;this.itemSelection.each((i,n)=>{var o;const a=n.marker;i.markerFill=a.fill,i.markerStroke=a.stroke,i.markerStrokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:Math.min(2,a.strokeWidth),i.markerFillOpacity=a.fillOpacity,i.markerStrokeOpacity=a.strokeOpacity,i.opacity=n.enabled?1:.5,i.color=t})}getDatumForPoint(t,e){const i=[],n={dist:1/0,datum:void 0};for(const a of this.group.children){if(!(a.visible&&a instanceof le))continue;const r=a.computeBBox();if(r.grow(this.item.paddingX/2,"horizontal"),r.grow(this.item.paddingY/2,"vertical"),r.containsPoint(t,e))return a.datum;const l=t-r.x-this.item.paddingX/2,c=e-r.y-this.item.paddingY/2,d=Math.pow(l,2)+Math.pow(c,2);l>=0&&c>=0&&d<n.dist&&(n.dist=d,n.datum=a.datum),i.push(r)}if(H.merge(i).containsPoint(t,e))return n.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:n},item:{toggleSeriesVisible:o}}=this,{offsetX:a,offsetY:r}=t,l=this.computeBBox(),c=this.group.visible&&l.containsPoint(a,r),d=this.getDatumForPoint(a,r);if(!c||!d)return;const{id:u,itemId:h,enabled:f}=d,m=i.getSeries().find(x=>x.id===u);if(!m)return;t.consume();let y=f;o&&(y=!f,this.ctx.chartEventManager.legendItemClick(m,h,y,d.legendItemName)),y?n.updateHighlight(this.id,{series:m,itemId:h,datum:void 0}):n.updateHighlight(this.id),this.ctx.updateService.update($.PROCESS_DATA,{forceNodeDataRefresh:!0}),e?.({type:"click",enabled:y,itemId:h,seriesId:m.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:n},item:{toggleSeriesVisible:o}}=this,{offsetX:a,offsetY:r}=t;if("integrated"===this.ctx.mode)return;const l=this.computeBBox(),c=this.group.visible&&l.containsPoint(a,r),d=this.getDatumForPoint(a,r);if(!c||!d)return;const{id:u,itemId:h,seriesId:f}=d,g=n.getSeries(),m=g.find(y=>y.id===u);if(m){if(t.consume(),o){const y={},x=g.flatMap(S=>S.getLegendData("category"));x.forEach(S=>{var k,E;null!==(k=y[E=S.seriesId])&&void 0!==k||(y[E]=0),S.enabled&&y[S.seriesId]++});const A=x.find(S=>S.itemId===h&&S.seriesId===f);this.ctx.chartEventManager.legendItemDoubleClick(m,h,null!==(e=A?.enabled)&&void 0!==e&&e,y,A?.legendItemName)}this.ctx.updateService.update($.PROCESS_DATA,{forceNodeDataRefresh:!0}),i?.({type:"dblclick",enabled:!0,itemId:h,seriesId:m.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:n},listeners:o}=this;if(!i)return;const a=this.computeBBox(),{pageX:r,pageY:l,offsetX:c,offsetY:d}=t,u=this.group.visible&&a.containsPoint(c,d);if(!u)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const h=this.getDatumForPoint(c,d);if(!u||void 0===h)return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const g=h?this.ctx.dataService.getSeries().find(m=>m.id===h?.id):void 0;h&&this.truncatedItems.has(null!==(e=h.itemId)&&void 0!==e?e:h.id)?this.ctx.tooltipManager.updateTooltip(this.id,{pageX:r,pageY:l,offsetX:c,offsetY:d,event:t,showArrow:!1},fs({content:this.getItemLabel(h)})):this.ctx.tooltipManager.removeTooltip(this.id),(n||null!=o.legendItemClick||null!=o.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),h?.enabled&&g?this.ctx.highlightManager.updateHighlight(this.id,{series:g,itemId:h?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,n]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,n);const o=this.computePagedBBox(),a=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-o.height;default:return t.width-o.width}};if(this.visible){let r,l;switch(this.position){case"top":case"bottom":r=(t.width-o.width)/2,l=a(),e.shrink(o.height,this.position);break;default:r=a(),l=(t.height-o.height)/2,e.shrink(o.width,this.position)}this.group.translationX=Math.floor(-o.x+t.x+r),this.group.translationY=Math.floor(-o.y+t.y+l)}if(this.visible&&this.enabled&&this.data.length){e.shrink(this.spacing,this.position);const l=o.clone();l.x+=this.group.translationX,l.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,l)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,n=e/i;let l,c;switch(this.position){case"top":case"bottom":const d=n<1?Math.min(.5,1/n*.2):.2;l=this.maxWidth?Math.min(this.maxWidth,e):e,c=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*d);break;default:const u=n>1?Math.min(.5,.25*n):.25;l=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*u),c=this.maxHeight?Math.min(this.maxHeight,i):i}return[l,c]}}vi.className="Legend",v([_(ot),b("design:type",Object)],vi.prototype,"_enabled",void 0),v([_(ia),b("design:type",String)],vi.prototype,"position",void 0),v([_(J(0)),b("design:type",Number)],vi.prototype,"maxWidth",void 0),v([_(J(0)),b("design:type",Number)],vi.prototype,"maxHeight",void 0),v([_(Me),b("design:type",Boolean)],vi.prototype,"reverseOrder",void 0),v([_(Jf),b("design:type",String)],vi.prototype,"orientation",void 0),v([_(I(0)),b("design:type",Object)],vi.prototype,"spacing",void 0);class Ba{constructor(t,e,i){this.text=void 0,this.className=t,this.parentElement=e,this.document=i}show(t){var e,i;let n=this.element;if(n||(n=this.document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=`${t.x}px`,n.style.top=`${t.y}px`,n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,this.renderer)n.innerHTML=this.renderer();else{const o=this.document.createElement("div");o.style.alignItems="center",o.style.boxSizing="border-box",o.style.display="flex",o.style.justifyContent="center",o.style.margin="8px",o.style.height="100%",o.style.font="12px Verdana, sans-serif",o.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(o)}null===(i=this.parentElement)||void 0===i||i.append(n)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}v([_(ti),b("design:type",Function)],Ba.prototype,"renderer",void 0),v([_(j),b("design:type",String)],Ba.prototype,"text",void 0);class Qf{constructor(t){this.noData=new Ba("ag-chart-no-data-overlay",t,t.ownerDocument)}}class tg{constructor(t){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=t}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,n,o;const{id:a,type:r,rootGroup:l,highlightGroup:c,annotationGroup:d,seriesGrouping:u}=t,{groupIndex:h=a}=u??{};if(null!=this.series[a])throw new Error(`AG Charts - series already has an allocated layer: ${this.series[a]}`);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!==(e=(n=this.groups)[r])&&void 0!==e||(n[r]={});const f=this.lookupIdx(h);let g=this.groups[r][f];return g||(g=null!==(i=(o=this.groups[r])[f])&&void 0!==i?i:o[f]={seriesIds:[],group:this.rootGroup.appendChild(new W({name:`${r}-content`,layer:!0,zIndex:ft.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new W({name:`${r}-highlight`,layer:!0,zIndex:ft.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new W({name:`${r}-annotation`,layer:!0,zIndex:ft.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[a]={layerState:g,seriesConfig:t},g.seriesIds.push(a),g.group.appendChild(l),g.highlight.appendChild(c),g.annotation.appendChild(d),g.group}changeGroup(t){var e,i;const{id:n,seriesGrouping:o,type:a,rootGroup:r,highlightGroup:l,annotationGroup:c,oldGrouping:d}=t,{groupIndex:u=n}=o??{};null!==(i=null===(e=this.groups[a])||void 0===e?void 0:e[u])&&void 0!==i&&i.seriesIds.includes(n)||(null!=this.series[n]&&this.releaseGroup({id:n,seriesGrouping:d,type:a,rootGroup:r,highlightGroup:l,annotationGroup:c}),this.requestGroup(t))}releaseGroup(t){var e,i,n,o,a;const{id:r,seriesGrouping:l,rootGroup:c,highlightGroup:d,annotationGroup:u,type:h}=t,{groupIndex:f=r}=l??{};if(null==this.series[r])throw new Error(`AG Charts - series doesn't have an allocated layer: ${r}`);const g=this.lookupIdx(f),m=null!==(i=null===(e=this.groups[h])||void 0===e?void 0:e[g])&&void 0!==i?i:null===(n=this.series[r])||void 0===n?void 0:n.layerState;if(m&&(m.seriesIds=m.seriesIds.filter(y=>y!==r),m.group.removeChild(c),m.highlight.removeChild(d),m.annotation.removeChild(u)),0===m?.seriesIds.length)this.rootGroup.removeChild(m.group),this.rootGroup.removeChild(m.highlight),this.rootGroup.removeChild(m.annotation),delete this.groups[h][g],delete this.groups[h][r];else if(m?.seriesIds.length>0){const y=null===(a=this.series[null===(o=m?.seriesIds)||void 0===o?void 0:o[0]])||void 0===a?void 0:a.seriesConfig;m.group.zIndexSubOrder=y?.getGroupZIndexSubOrder("data"),m.highlight.zIndexSubOrder=y?.getGroupZIndexSubOrder("highlight"),m.annotation.zIndexSubOrder=y?.getGroupZIndexSubOrder("annotation")}delete this.series[r]}lookupIdx(t){return"normal"===this.mode?t:"string"!=typeof t||(t=Number(t.split("-").slice(-1)[0]))?Math.floor(30*Math.max(Math.min(t/this.expectedSeriesCount,1),0)):0}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}}class eg{constructor(){this.groups={}}registerSeries({id:t,seriesGrouping:e,visible:i,type:n}){var o,a;e&&(null!==(o=(a=this.groups)[n])&&void 0!==o||(a[n]={}),this.groups[n][t]={grouping:e,visible:i})}deregisterSeries({id:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&0===Object.keys(this.groups[e]).length&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e}){var i;if(!e)return{visibleGroupCount:1,index:0};const n=[...Object.entries(null!==(i=this.groups[t])&&void 0!==i?i:{}).filter(([o,a])=>a.visible).reduce((o,[a,r])=>(r.visible&&o.add(r.grouping.groupIndex),o),new Set).values()];return n.sort((o,a)=>o-a),{visibleGroupCount:n.length,index:n.indexOf(e.groupIndex)}}}class ig{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",i=>this.layoutComplete(i)),this.layoutService.addListener("start-layout",i=>this.positionPadding(i.shrinkRect)),this.layoutService.addListener("start-layout",i=>this.positionCaptions(i.shrinkRect)))}destroy(){this.destroyFns.forEach(t=>t())}layoutComplete({clipSeries:t,series:{paddedRect:e}}){const{seriesArea:i,seriesRoot:n}=this.chartLike;i.clip||t?n.setClipRectInGroupCoordinateSpace(e):n.setClipRectInGroupCoordinateSpace()}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i,n,o;const{title:a,subtitle:r,footnote:l}=this.chartLike,c=t.clone(),d=f=>{var g;const y=null!==(g=f.lineHeight)&&void 0!==g?g:f.fontSize*z.defaultLineHeightRatio,x=t.width,A=Math.max(y,t.height/10);f.computeTextWrap(x,A)},u=(f,g)=>{const m=c.y;f.node.x=c.x+c.width/2,f.node.y=m,f.node.textBaseline="top",d(f);const y=f.node.computeBBox(),x=Math.ceil(y.y-m+y.height+g);c.shrink(x,"top")};return r&&(r.node.visible=null!==(e=r.enabled)&&void 0!==e&&e),a&&(a.node.visible=a.enabled,a.node.visible)&&u(a,null!==(i=a.spacing)&&void 0!==i?i:r?.node.visible?bt.SMALL_PADDING:bt.LARGE_PADDING),r&&r.node.visible&&u(r,null!==(n=r.spacing)&&void 0!==n?n:0),l&&(l.node.visible=l.enabled,l.node.visible&&((f,g)=>{const m=c.y+c.height;f.node.x=c.x+c.width/2,f.node.y=m,f.node.textBaseline="bottom",d(f);const y=f.node.computeBBox(),x=Math.ceil(m-y.y+g);c.shrink(x,"bottom")})(l,null!==(o=l.spacing)&&void 0!==o?o:0)),{shrinkRect:c}}}class Kc extends lo{constructor(t){super(),this.updateCallback=t}update(t=$.FULL,{forceNodeDataRefresh:e=!1,skipAnimations:i=!1}={}){this.updateCallback(t,{forceNodeDataRefresh:e,skipAnimations:i})}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:t})}}class $c{constructor(){this.clip=void 0,this.padding=new Ti(0)}}v([_(Me),b("design:type",Boolean)],$c.prototype,"clip",void 0);class Ee extends Bl{getOptions(){var t;const{queuedUserOptions:e}=this;return Et([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}constructor(t,e){var i;super(),this.id=ci(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new W({name:`${this.id}-Series-root`}),this.debug=Mt.create(),this.extraDebugStats={},this.container=void 0,this.data=[],this._firstAutoSize=!0,this.padding=new Ti(20),this.seriesArea=new $c,this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this._destroyFns=[],this.modules={},this.legendModules={},this.processors=[],this.legends=new Map,this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateType=$.NONE,this._performUpdateSkipAnimations=!1,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new Nf,this.updateRequestors={},this.performUpdateTrigger=function Mf(s){return Cc((t,e=0)=>setTimeout(t,e),s)}(({count:d})=>R(this,void 0,void 0,function*(){this._destroyed||this.updateMutex.acquire(()=>R(this,void 0,void 0,function*(){try{yield this.performUpdate(d)}catch(u){this._lastPerformUpdateError=u,G.error("update error",u)}}))})),this._axes=[],this._series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=function wf(s){return Cc((t,e)=>requestAnimationFrame(t),s)}(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=d=>{const u=Object.assign(Object.assign({},d),{type:"seriesNodeClick"});Object.defineProperty(u,"series",{enumerable:!1,get:()=>d.series}),this.fireEvent(u)},this.onSeriesNodeDoubleClick=d=>{const u=Object.assign(Object.assign({},d),{type:"seriesNodeDoubleClick"});this.fireEvent(u)},this.specialOverrides=function ng(s){let t,e;if(null!=s.window)t=s.window;else if(typeof window<"u")t=window;else{if(!(typeof global<"u"))throw new Error("AG Charts - unable to resolve global window");t=global.window}if(null!=s.document)e=s.document;else if(typeof document<"u")e=document;else{if(!(typeof global<"u"))throw new Error("AG Charts - unable to resolve global document");e=global.document}return{document:e,window:t,overrideDevicePixelRatio:s.overrideDevicePixelRatio,sceneMode:s.sceneMode}}(t);const{window:n,document:o}=this.specialOverrides,a=e?.scene,r=null!==(i=e?.element)&&void 0!==i?i:o.createElement("div"),l=e?.container,c=new W({name:"root"});c.visible=!1,c.append(this.seriesRoot),this.axisGridGroup=new W({name:"Axes-Grids",layer:!0,zIndex:ft.AXIS_GRID_ZINDEX}),c.appendChild(this.axisGridGroup),this.axisGroup=new W({name:"Axes",layer:!0,zIndex:ft.AXIS_ZINDEX}),c.appendChild(this.axisGroup),this.element=r,r.classList.add("ag-chart-wrapper"),r.style.position="relative",this.scene=a??new Tc(this.specialOverrides),this.scene.root=c,this.scene.container=r,this.autoSize=!0,this.chartEventManager=new Pc,this.cursorManager=new Fc(r),this.highlightManager=new Bc,this.interactionManager=new mi(r,o,n),this.zoomManager=new Uc,this.dataService=new Ff(()=>this.series),this.layoutService=new jc,this.updateService=new Kc((d=$.FULL,{forceNodeDataRefresh:u,skipAnimations:h})=>this.update(d,{forceNodeDataRefresh:u,skipAnimations:h})),this.seriesStateManager=new eg,this.seriesLayerManager=new tg(this.seriesRoot),this.callbackCache=new Cf,this.animationManager=new Lc(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.processors=[new ig(this,this.layoutService)],this.tooltip=new Pe(this.scene.canvas.element,o,n,o.body),this.tooltipManager=new Fa(this.tooltip,this.interactionManager),this.overlays=new Qf(this.element),this.highlight=new Nc,this.container=l,On.observe(this.element,d=>this.rawResize(d)),this._destroyFns.push(this.interactionManager.addListener("click",d=>this.onClick(d)),this.interactionManager.addListener("dblclick",d=>this.onDoubleClick(d)),this.interactionManager.addListener("hover",d=>this.onMouseMove(d)),this.interactionManager.addListener("leave",d=>this.onLeave(d)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.interactionManager.addListener("drag-start",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",d=>{this.update($.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",d=>this.changeHighlightDatum(d)),this.zoomManager.addListener("zoom-change",d=>this.update($.PROCESS_DATA,{forceNodeDataRefresh:!0,skipAnimations:!0}))),this.legend=this.attachLegend("category",vi)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e;null===(e=this.modules[t.optionsKey])||void 0===e||e.instance.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}attachLegend(t,e){const i=new e(this.getModuleContext());return this.legends.set(t,i),i.attachLegend(this.scene.root),i}addLegendModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=this.attachLegend(t.identifier,t.instanceConstructor);this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeLegendModule(t){this.legends.delete(t.identifier),this.removeModule(t)}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:a,tooltipManager:r,zoomManager:l,dataService:c,layoutService:d,updateService:u,seriesStateManager:h,seriesLayerManager:f,mode:g,callbackCache:m,specialOverrides:{window:y,document:x}}=this;return{window:y,document:x,scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:a,tooltipManager:r,zoomManager:l,dataService:c,layoutService:d,updateService:u,mode:g,seriesStateManager:h,seriesLayerManager:f,callbackCache:m}}destroy(t){if(this._destroyed)return;const e=t?.keepTransferableResources;let i;this._performUpdateType=$.NONE,this._destroyFns.forEach(n=>n()),this.processors.forEach(n=>n.destroy()),this.tooltipManager.destroy(),this.tooltip.destroy(),Object.values(this.legends).forEach(n=>n.destroy()),this.legends.clear(),this.overlays.noData.hide(),On.unobserve(this.element);for(const n of Object.keys(this.modules))this.removeModule({optionsKey:n});return this.interactionManager.destroy(),this.animationManager.stop(),e?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach(n=>n.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,i}disablePointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>R(this,void 0,void 0,function*(){yield t(),this._pendingFactoryUpdatesCount--}))}get performUpdateType(){return this._performUpdateType}get lastPerformUpdateError(){return this._lastPerformUpdateError}update(t=$.FULL,e){var i,n;const{forceNodeDataRefresh:o=!1,skipAnimations:a,seriesToUpdate:r=this.series,newAnimationBatch:l}=e??{};o&&this.series.forEach(c=>c.markNodeDataDirty());for(const c of r)this.seriesToUpdate.add(c);if(a&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),l&&(this.animationManager.isActive()?this._performUpdateSkipAnimations=!0:null!==(i=this._performUpdateSkipAnimations)&&void 0!==i||(this._performUpdateSkipAnimations=!1)),Mt.check(!0)){let c=null!==(n=(new Error).stack)&&void 0!==n?n:"<unknown>";c=c.replace(/\([^)]*/g,""),this.updateRequestors[c]=t}t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule(e?.backOffMs))}performUpdate(t){var e;return R(this,void 0,void 0,function*(){const{_performUpdateType:i,extraDebugStats:n}=this,o=[...this.seriesToUpdate];this._performUpdateType=$.NONE,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&i<$.SCENE_RENDER&&this.animationManager.startBatch(this._performUpdateSkipAnimations),this.debug("Chart.performUpdate() - start",$[i]);const a={start:performance.now()};switch(i){case $.FULL:case $.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),a["\u{1f3ed}"]=performance.now();case $.PERFORM_LAYOUT:if(this.checkUpdateShortcut($.PERFORM_LAYOUT)||!this.checkFirstAutoSize(o))break;yield this.processLayout(),a["\u2316"]=performance.now();case $.SERIES_UPDATE:if(this.checkUpdateShortcut($.SERIES_UPDATE))break;const{seriesRect:l}=this,c=[...o].map(h=>h.update({seriesRect:l}));yield Promise.all(c),a["\u{1f914}"]=performance.now();case $.TOOLTIP_RECALCULATION:if(this.checkUpdateShortcut($.TOOLTIP_RECALCULATION))break;const d=this.tooltipManager.getTooltipMeta(this.id),u="hover"===(null===(e=d?.event)||void 0===e?void 0:e.type);i<=$.SERIES_UPDATE&&u&&this.handlePointer(d.event),a["\u2196"]=performance.now();case $.SCENE_RENDER:if(this.checkUpdateShortcut($.SCENE_RENDER))break;n.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:a,extraDebugStats:n}),this.extraDebugStats={};case $.NONE:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=void 0,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());const r=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(r-a.start))/100,count:t,performUpdateType:$[i]})})}checkUpdateShortcut(t){return this.updateShortcutCount>3?(G.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const e=this._performUpdateNoRenderCount++,i=10*(2^e);if(e<8)return this.update($.PERFORM_LAYOUT,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}set axes(t){const e=new Set;this._axes.forEach(i=>{i.detachAxis(this.axisGroup,this.axisGridGroup),e.add(i)}),this._axes=t.filter(i=>!i.linkedTo).concat(t.filter(i=>i.linkedTo)),this._axes.forEach(i=>{i.attachAxis(this.axisGroup,this.axisGridGroup),e.delete(i)}),this.zoomManager.updateAxes(this._axes),e.forEach(i=>i.destroy())}get axes(){return this._axes}set series(t){this.removeAllSeries(),this.seriesLayerManager.setSeriesCount(t.length),t.forEach(e=>this.addSeries(e))}get series(){return this._series}addSeries(t){const{series:e}=this;return e.indexOf(t)<0&&(e.push(t),null==t.rootGroup.parent&&this.seriesLayerManager.requestGroup(t),this.initSeries(t),!0)}initSeries(t){const e=this;t.chart={get mode(){return e.mode},get seriesRect(){return e.seriesRect},placeLabels:()=>e.placeLabels()},t.setChartData(this.data),this.addSeriesListeners(t),t.addChartEventListeners()}removeAllSeries(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.destroy(),t.chart=void 0}),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{var i;const n=e.direction;(null!==(i=t[n])&&void 0!==i?i:t[n]=[]).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const n=t[i];if(!n)return void G.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const o=e.getKeys(i),a=this.findMatchingAxis(n,o);a?e.axes[i]=a:G.warnOnce(`no matching axis for direction [${i}] and keys [${o}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){const n=i.keys;if(!n.length)return i;if(e)for(const o of e)if(n.indexOf(o)>=0)return i}}rawResize(t){var e;let{width:i,height:n}=t;if(i=Math.floor(i),n=Math.floor(n),!this.autoSize||0===i&&0===n)return;const[o=0,a=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];o===i&&a===n||(this._lastAutoSize=[i,n],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,e,i){var n,o,a,r;if(t??(t=null!==(n=this.width)&&void 0!==n?n:this.autoSize?null===(o=this._lastAutoSize)||void 0===o?void 0:o[0]:this.scene.canvas.width),e??(e=null!==(a=this.height)&&void 0!==a?a:this.autoSize?null===(r=this._lastAutoSize)||void 0===r?void 0:r[1]:this.scene.canvas.height),this.debug(`Chart.resize() from ${i}`,{width:t,height:e,stack:(new Error).stack}),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)){this.disablePointer(),this.animationManager.reset();let l=!0;this.autoSize&&this._firstAutoSize&&(l=!1,this._firstAutoSize=!1),this.update($.PERFORM_LAYOUT,{forceNodeDataRefresh:!0,skipAnimations:l})}}processData(){return R(this,void 0,void 0,function*(){this.series.some(i=>i.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new Mc(this.mode),e=this.series.map(i=>i.processData(t));yield t.execute(),yield Promise.all(e),yield this.updateLegend()})}placeLabels(){const t=[],e=[];for(const o of this.series){if(!o.visible)continue;const a=o.getLabelData();a&&null!=(s=a[0])&&"object"==typeof s.point&&"object"==typeof s.label&&(e.push(a),t.push(o))}var s;const{seriesRect:i}=this,n=i&&e.length>0?function pf(s,t,e=5){const i=[];s=s.map(n=>n.slice().sort((o,a)=>a.point.size-o.point.size));for(let n=0;n<s.length;n++){const o=i[n]=[],a=s[n];if(a?.length&&a[0].label)for(let r=0,l=a.length;r<l;r++){const c=a[r],d=c.label,h=c.point.x-.5*d.width,f=c.point.y-.5*c.point.size-d.height-e,{width:g,height:m}=d;t&&!uf(t,h,f,g,m)||s.some(S=>S.some(k=>df(k.point,h,f,g,m)))||i.some(S=>S.some(k=>gc(k,h,f,g,m)))||o.push({index:r,text:d.text,x:h,y:f,width:g,height:m,datum:c})}}return i}(e,{x:0,y:0,width:i.width,height:i.height}):[];return new Map(n.map((o,a)=>[t[a],o]))}updateLegend(){return R(this,void 0,void 0,function*(){this.legends.forEach((t,e)=>{const n=this.series.filter(o=>o.showInLegend).flatMap(o=>o.getLegendData(e));n.every(a=>"category"===a.legendType)&&this.validateCategoryLegendData(n),t.data=n})})}validateCategoryLegendData(t){const e={};t.forEach(i=>{var n,o,a,r,l;const c=null===(n=this.series.find(d=>d.id===i.seriesId))||void 0===n?void 0:n.type;c&&(null!==(o=e[c])&&void 0!==o||(e[c]={}),null!==(a=(r=e[c])[l=i.label.text])&&void 0!==a||(r[l]=new Set),null!=i.marker.fill&&e[c][i.label.text].add(i.marker.fill))});for(const i of Object.values(e))for(const[n,o]of Object.entries(i))o.size>1&&G.warnOnce(`legend item '${n}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){var t;return R(this,void 0,void 0,function*(){const e=this.animationRect;yield this.performLayout(),e&&!(null!==(t=this.animationRect)&&void 0!==t&&t.equals(e))&&this.animationManager.skipCurrentBatch(),this.handleNoDataOverlay(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return R(this,void 0,void 0,function*(){this.scene.root&&(this.scene.root.visible=!0);const{width:t,height:e}=this.scene;let i={shrinkRect:new H(0,0,t,e)};return i=this.layoutService.dispatchPerformLayout("start-layout",i),i=this.layoutService.dispatchPerformLayout("before-series",i),i.shrinkRect})}pickSeriesNode(t,e,i){var n,o;const a=performance.now(),r=e?[St.EXACT_SHAPE_MATCH]:void 0,l=[...this.series].reverse();let c;for(const d of l){if(!d.visible||!d.rootGroup.visible)continue;const{match:u,distance:h}=null!==(n=d.pickNode(t,r))&&void 0!==n?n:{};if(u&&null!=h&&((!c||c.distance>h)&&h<=(i??1/0)&&(c={series:d,distance:h,datum:u}),0===h))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(o=this.extraDebugStats.pickSeriesNode)&&void 0!==o?o:0)+(performance.now()-a)),c}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update($.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){const{lastPick:e,hoverRect:i}=this,{offsetX:n,offsetY:o}=t,a=(r=!1)=>{e&&this.disablePointer(r)};i?.containsPoint(n,o)?(this.handlePointerTooltip(t,a),this.handlePointerNode(t)):a()}handlePointerTooltip(t,e){const{lastPick:i,tooltip:n}=this,{range:o}=n,{offsetX:a,offsetY:r}=t;let l;"number"==typeof o&&Number.isFinite(o)&&(l=o);const c=this.pickSeriesNode({x:a,y:r},"exact"===o,l);if(!c)return this.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const d="node"===this.highlight.range||!i||i.datum!==c.datum;let u;d?(u=c.series.getTooltipHtml(c.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,c.datum)):i&&(i.event=t.sourceEvent);const y=this.tooltip.enabled&&c.series.tooltip.enabled&&("nearest"===o||null!=l||"exact"===o&&0===c.distance)&&(!d||void 0!==u),x=Fa.makeTooltipMeta(t,this.scene.canvas,c.datum,this.specialOverrides.window);y&&this.tooltipManager.updateTooltip(this.id,x,u)}handlePointerNode(t){this.checkSeriesNodeRange(t,(i,n)=>{(i.hasEventListener("nodeClick")||i.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,n)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update($.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update($.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=i?.datum,o=n?.series.nodeClickRange;let a;"number"==typeof o&&Number.isFinite(o)&&(a=o);let r=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);return r?this.highlightManager.updatePicked(this.id,r.datum):this.highlightManager.updatePicked(this.id),n&&"nearest"===o?(e(n.series,n),!0):("exact"!==o&&(r=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,a)),!!r&&!(null==a&&("exact"!==o||0!==r.distance)||(e(r.series,r.datum),0)))}changeHighlightDatum(t){var e,i;const n=new Set,{series:o,datum:a}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:r,datum:l}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};r&&n.add(r),o&&n.add(o),r?.cursor&&l&&this.cursorManager.updateCursor(r.id),o?.cursor&&a&&this.cursorManager.updateCursor(o.id,o.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0,null==o||null==r?this.update($.SERIES_UPDATE):this.update($.SERIES_UPDATE,{seriesToUpdate:n})}waitForUpdate(t=5e3){return R(this,void 0,void 0,function*(){const e=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this._performUpdateType!==$.NONE;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield Tf(5)}yield this.updateMutex.waitForClearAcquireQueue()})}handleNoDataOverlay(){!this.series.some(e=>e.hasData())&&this.seriesRect?this.overlays.noData.show(this.seriesRect):this.overlays.noData.hide()}getMinRect(){const t=this.series.map(e=>e.getMinRect()).filter(e=>void 0!==e);if(t.length)return new H(0,0,t.reduce((e,i)=>Math.max(e,i.width),0),t.reduce((e,i)=>Math.max(e,i.height),0))}}v([Zt({newValue(s){this.destroyed||s.appendChild(this.element)},oldValue(s){s.removeChild(this.element)}}),b("design:type",Object)],Ee.prototype,"container",void 0),v([Zt({newValue(s){var t;null===(t=this.series)||void 0===t||t.forEach(e=>{e.setChartData(s)})}}),b("design:type",Object)],Ee.prototype,"data",void 0),v([Zt({newValue(s){this.resize(s,void 0,"width option")}}),b("design:type",Number)],Ee.prototype,"width",void 0),v([Zt({newValue(s){this.resize(void 0,s,"height option")}}),b("design:type",Number)],Ee.prototype,"height",void 0),v([Zt({changeValue(s){this.autoSizeChanged(s)}}),_(ot),b("design:type",Object)],Ee.prototype,"autoSize",void 0),v([Zt({newValue(s){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(s.node)},oldValue(s){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(s.node)}}),b("design:type",Function)],Ee.prototype,"title",void 0),v([Zt({newValue(s){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(s.node)},oldValue(s){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(s.node)}}),b("design:type",Function)],Ee.prototype,"subtitle",void 0),v([Zt({newValue(s){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(s.node)},oldValue(s){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(s.node)}}),b("design:type",Function)],Ee.prototype,"footnote",void 0),v([_(qs("standalone","integrated")),b("design:type",String)],Ee.prototype,"mode",void 0);var ks=function(s){return s[s.Open=0]="Open",s[s.Chord=1]="Chord",s[s.Round=2]="Round",s}(ks||{});class si extends me{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=ks.Open,this.restoreOwnStyles()}get fullPie(){return function Hs(s,t,e=1e-10){return Math.abs(s-t)<e}($t(this.startAngle),$t(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===ks.Chord?t.closePath():this.type===ks.Round&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new H(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return this.type!==ks.Open&&n.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}si.className="Arc",si.defaultStyles=Object.assign({},Q.defaultStyles,{lineWidth:1,fillStyle:null}),v([at(),b("design:type",Number)],si.prototype,"centerX",void 0),v([at(),b("design:type",Number)],si.prototype,"centerY",void 0),v([at(),b("design:type",Number)],si.prototype,"radius",void 0),v([at(),b("design:type",Number)],si.prototype,"startAngle",void 0),v([at(),b("design:type",Number)],si.prototype,"endAngle",void 0),v([at(),b("design:type",Boolean)],si.prototype,"counterClockwise",void 0),v([at(),b("design:type",Number)],si.prototype,"type",void 0);const Zc=s=>{const t=X.fromString(s),[e,i,n]=X.RGBtoHSL(t.r,t.g,t.b);return{h:e,s:i,l:n,a:t.a}};class Os{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(Zc)}update(){const{domain:t,range:e}=this;t.length<2&&(G.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let i=1;i<t.length;i++)if(t[i-1]>=t[i]){G.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((a,r)=>a-r);break}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(Zc)}convert(t){const{domain:e,range:i,parsedRange:n}=this,o=e[0],a=e[e.length-1];if(t<=o)return i[0];if(t>=a)return i[i.length-1];let c,d;if(2===e.length){const f=(t-o)/(a-o),g=1/(i.length-1);c=i.length<=2?0:Math.min(Math.floor(f*(i.length-1)),i.length-2),d=(f-c*g)/g}else{for(c=0;c<e.length-2&&!(t<e[c+1]);c++);const f=e[c];d=(t-f)/(e[c+1]-f)}return((s,t,e)=>{let i,n;if(e=Math.min(Math.max(e,0),1),Number.isNaN(s.h)&&Number.isNaN(t.h))i=0,n=0;else if(Number.isNaN(s.h))i=t.h,n=t.s;else if(Number.isNaN(t.h))i=s.h,n=s.s;else{let l=t.h;const c=t.h-s.h;c>180?l-=360:c<-180&&(l+=360),i=s.h*(1-e)+l*e,n=s.s*(1-e)+t.s*e}return X.fromHSL(i,n,s.l*(1-e)+t.l*e,s.a*(1-e)+t.a*e)})(n[c],n[c+1],d).toRgbaString()}}class xo extends Q{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){null!=this._mask&&this.removeChild(this._mask),null!=t&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,n;return null!==(n=null===(i=this.mask)||void 0===i?void 0:i.isPointInPath(t,e))&&void 0!==n&&n}computeBBox(){var t;return null===(t=this.mask)||void 0===t?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:n,devicePixelRatio:o}=t,a=1/o,r=e?.computeTransformedBBox();if(null==e||null==i||null==r)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),n.save(),n.beginPath(),e.path.draw(n),n.clip(),n.resetTransform();const l=Math.floor(r.x),c=Math.ceil(r.x+r.width),d=Math.floor(r.y),u=Math.ceil(r.y+r.height),h=new Os,[f,g]="to-right"===this.direction?[l,c]:[d,u];if(h.domain=i.map((m,y)=>f+(g-f)*y/(i.length-1)),h.range=i,h.update(),"to-right"===this.direction){const m=u-d;for(let y=l;y<=c;y+=a)n.fillStyle=h.convert(y),n.fillRect(y,d,a,m)}else{const m=c-l;for(let y=d;y<=u;y+=a)n.fillStyle=h.convert(y),n.fillRect(l,y,m,a)}n.restore()}}v([B({redraw:M.MAJOR}),b("design:type",String)],xo.prototype,"direction",void 0),v([B({redraw:M.MAJOR}),b("design:type",Array)],xo.prototype,"stops",void 0),v([B({redraw:M.MAJOR}),b("design:type",Function)],xo.prototype,"_mask",void 0);class De extends me{constructor(){super(...arguments),this.borderPath=new Vi,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Q.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Q.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||null!==(t=this.clipPath)&&void 0!==t&&t.isDirty())}updatePath(){var t,e,i;const{path:n,borderPath:o,crisp:a}=this;let{x:r,y:l,width:c,height:d,strokeWidth:u}=this;const f=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let g=1;if(n.clear({trackChanges:!0}),o.clear({trackChanges:!0}),a&&(c<=f&&(g*=c/f),d<=f&&(g*=d/f),c=this.align(r,c),d=this.align(l,d),r=this.align(r),l=this.align(l)),u)if(c<f){const m=r+f/2;o.moveTo(m,l),o.lineTo(m,l+d),u=f,this.borderClipPath=void 0}else if(d<f){const m=l+f/2;o.moveTo(r,m),o.lineTo(r+c,m),u=f,this.borderClipPath=void 0}else if(u<c&&u<d){const m=u/2;r+=m,l+=m,c-=u,d-=u,this.borderClipPath=void 0,n.rect(r,l,c,d),o.rect(r,l,c,d)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new Vi,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(r,l,c,d),o.rect(r,l,c,d);else this.borderClipPath=void 0,n.rect(r,l,c,d);this.effectiveStrokeWidth=u,this.lastUpdatePathStrokeWidth=u,this.microPixelEffectOpacity=g}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new H(t,e,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:n}=this,{globalAlpha:o}=t;t.globalAlpha=o*n*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:n,borderClipPath:o,opacity:a,microPixelEffectOpacity:r}=this;if(e&&i){const{strokeOpacity:c,lineDash:d,lineDashOffset:u,lineCap:h,lineJoin:f}=this;o&&(o.draw(t),t.clip()),n.draw(t);const{globalAlpha:g}=t;t.strokeStyle=e,t.globalAlpha=g*a*c*r,t.lineWidth=i,d&&t.setLineDash(d),u&&(t.lineDashOffset=u),h&&(t.lineCap=h),f&&(t.lineJoin=f),t.stroke(),t.globalAlpha=g}}}De.className="Rect",v([at(),b("design:type",Number)],De.prototype,"x",void 0),v([at(),b("design:type",Number)],De.prototype,"y",void 0),v([at(),b("design:type",Number)],De.prototype,"width",void 0),v([at(),b("design:type",Number)],De.prototype,"height",void 0),v([at(),b("design:type",Number)],De.prototype,"radius",void 0),v([at(),b("design:type",Boolean)],De.prototype,"crisp",void 0);class Cn extends Tt{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===M.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const o=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(o,0,0,o.width,o.height,this.x,this.y,this.width,this.height),super.render(t)}}v([B({redraw:M.MAJOR}),b("design:type",Number)],Cn.prototype,"x",void 0),v([B({redraw:M.MAJOR}),b("design:type",Number)],Cn.prototype,"y",void 0),v([B({redraw:M.MAJOR}),b("design:type",Number)],Cn.prototype,"width",void 0),v([B({redraw:M.MAJOR}),b("design:type",Number)],Cn.prototype,"height",void 0),v([B({redraw:M.MAJOR}),b("design:type",Number)],Cn.prototype,"opacity",void 0),Object.assign(Object.assign({},up),Jp);const ag={[P.X]:["xKey"],[P.Y]:["yKey"]},rg={[P.X]:["xName"],[P.Y]:["yName"]};class Ga extends uo{constructor(t,e,i,n){super(t,e,i,n),this.xKey=n.xKey,this.yKey=n.yKey}}class bi extends ec{get contextNodeData(){return this._contextNodeData.slice()}constructor(t){var{pathsPerSeries:e=1,hasMarkers:i=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:o=[],directionKeys:a=ag,directionNames:r=rg,datumSelectionGarbageCollection:l=!0,markerSelectionGarbageCollection:c=!0,animationResetFns:d}=t,u=pe(t,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationResetFns"]);super(Object.assign({directionKeys:a,directionNames:r,useSeriesGroupLayer:!0,canHaveAxes:!0},u)),this.legendItemName=void 0,this._contextNodeData=[],this.NodeClickEvent=Ga,this.highlightSelection=lt.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=lt.select(this.highlightLabel,z),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=Mt.create(),this.opts={pathsPerSeries:e,hasMarkers:i,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:o,directionKeys:a,directionNames:r,animationResetFns:d,datumSelectionGarbageCollection:l,markerSelectionGarbageCollection:c},this.animationState=new ms("empty",{empty:{update:{target:"ready",action:h=>this.animateEmptyUpdateReady(h)}},ready:{updateData:"waiting",clear:"clearing",highlight:h=>this.animateReadyHighlight(h),highlightMarkers:h=>this.animateReadyHighlightMarkers(h),resize:h=>this.animateReadyResize(h)},waiting:{update:{target:"ready",action:h=>this.animateWaitingUpdateReady(h)}},clearing:{update:{target:"empty",action:h=>this.animateClearingUpdateEmpty(h)}}},()=>this.checkProcessedDataAnimatable())}addChartEventListeners(){this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update({seriesRect:t}){var e,i;return R(this,void 0,void 0,function*(){const{visible:n,_contextNodeData:o}=this,{series:a}=null!==(i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==i?i:{},r=a?a===this:void 0,l=this.checkResize(t),c=yield this.updateHighlightSelection(r);yield this.updateSelections(n),yield this.updateNodes(c,r,n);const d=this.getAnimationData(t,o);l&&this.animationState.transition("resize",d),this.animationState.transition("update",d)})}updateSelections(t){return R(this,void 0,void 0,function*(){if((t||!this.ctx.animationManager.isSkipped())&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const e=this.isProcessedDataAnimatable();this._contextNodeData.forEach(o=>{var a;null!==(a=o.animationValid)&&void 0!==a||(o.animationValid=e)}),yield this.updateSeriesGroups();const{dataModel:i,processedData:n}=this;void 0!==i&&void 0!==n&&this.dispatch("data-update",{dataModel:i,processedData:n})}yield Promise.all(this.subGroups.map((e,i)=>this.updateSeriesGroupSelections(e,i)))}})}updateSeriesGroupSelections(t,e,i){return R(this,void 0,void 0,function*(){const{datumSelection:n,labelSelection:o,markerSelection:a,paths:r}=t,l=this._contextNodeData[e],{nodeData:c,labelData:d,itemId:u}=l;yield this.updatePaths({seriesHighlighted:i,itemId:u,contextData:l,paths:r,seriesIdx:e}),t.datumSelection=yield this.updateDatumSelection({nodeData:c,datumSelection:n,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:d,labelSelection:o,seriesIdx:e}),a&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:c,markerSelection:a,seriesIdx:e}))})}markerFactory(){return new(wi())}updateSeriesGroups(){return R(this,void 0,void 0,function*(){const{_contextNodeData:t,contentGroup:e,subGroups:i,opts:{pathsPerSeries:n,hasMarkers:o,datumSelectionGarbageCollection:a,markerSelectionGarbageCollection:r}}=this;if(t.length===i.length)return;t.length<i.length&&i.splice(t.length).forEach(({dataNodeGroup:c,markerGroup:d,labelGroup:u,paths:h})=>{e.removeChild(c),d&&e.removeChild(d),u&&e.removeChild(u);for(const f of h)e.removeChild(f)});const l=t.length;for(;l>i.length;){const d=this.subGroupId++,u=new W({name:`${this.id}-series-sub${d}-dataNodes`,layer:!1,zIndex:ft.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",d)}),h=o?new W({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:!1,zIndex:ft.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",d)}):void 0,f=new W({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:!1,zIndex:ft.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",d)});e.appendChild(u),e.appendChild(f),h&&e.appendChild(h);const g=[];for(let m=0;m<n;m++)g[m]=new me,g[m].zIndex=ft.SERIES_LAYER_ZINDEX,g[m].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",m),e.appendChild(g[m]);i.push({paths:g,dataNodeGroup:u,markerGroup:h,labelGroup:f,labelSelection:lt.select(f,z),datumSelection:lt.select(u,()=>this.nodeFactory(),a),markerSelection:h?lt.select(h,()=>this.markerFactory(),r):void 0})}})}getGroupZIndexSubOrder(t,e=0){var i;const n=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const o=null!==(i=this.opts.pathsZIndexSubOrderOffset[e])&&void 0!==i?i:0,a=n[0];n[0]="function"==typeof a?()=>+a()+o:+a+o}return n}updateNodes(t,e,i){var n;return R(this,void 0,void 0,function*(){const{highlightSelection:o,highlightLabelSelection:a,opts:{hasMarkers:r,hasHighlightedLabels:l}}=this,c=!this.ctx.animationManager.isSkipped(),d=this.visible&&(null===(n=this._contextNodeData)||void 0===n?void 0:n.length)>0&&i;this.rootGroup.visible=c||d,this.contentGroup.visible=c||d,this.highlightGroup.visible=(c||d)&&!!e;const u=this.getOpacity();r?(yield this.updateMarkerNodes({markerSelection:o,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",o)):(yield this.updateDatumNodes({datumSelection:o,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",o)),l&&(yield this.updateLabelNodes({labelSelection:a,seriesIdx:-1})),yield Promise.all(this.subGroups.map((h,f)=>R(this,void 0,void 0,function*(){const{dataNodeGroup:g,markerGroup:m,datumSelection:y,labelSelection:x,markerSelection:A,paths:S,labelGroup:k}=h,{itemId:E}=this.contextNodeData[f],O=d;g.opacity=u,g.visible=c||O,k.visible=O,m&&(m.opacity=u,m.zIndex=g.zIndex>=ft.SERIES_LAYER_ZINDEX?g.zIndex:g.zIndex+1,m.visible=O),k&&(k.opacity=u),yield this.updatePathNodes({seriesHighlighted:e,itemId:E,paths:S,seriesIdx:f,opacity:u,visible:O,animationEnabled:c}),g.visible&&(yield this.updateDatumNodes({datumSelection:y,highlightedItems:t,isHighlight:!1,seriesIdx:f}),yield this.updateLabelNodes({labelSelection:x,seriesIdx:f}),r&&A&&(yield this.updateMarkerNodes({markerSelection:A,isHighlight:!1,seriesIdx:f})))})))})}getHighlightLabelData(t,e){const i=t.find(n=>n.datum===e.datum&&n.itemId===e.itemId);return i?[i]:void 0}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){var e;return R(this,void 0,void 0,function*(){const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:o}=this,a=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),r=t&&a?.datum?a:void 0;let l,c;if(null!=r){const d=this.isLabelEnabled();for(const{labelData:u,nodeData:h}of o)if(c=this.getHighlightData(h,r),l=d?this.getHighlightLabelData(u,r):void 0,(!d||null!=l)&&null!=c)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:c,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:l,highlightLabelSelection:n}),c})}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:n,y:o}=t,{opts:{hasMarkers:a}}=this;for(const{dataNodeGroup:r,markerGroup:l}of this.subGroups){let c=r.pickNode(n,o);if(!c&&a&&(c=l?.pickNode(n,o)),c)break}for(const r of this.moduleMap){const{datum:l}=null!==(e=r.pickNodeExact(t))&&void 0!==e?e:{};if(void 0!==l)return{datum:l,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:n,y:o}=t,{axes:a,rootGroup:r,_contextNodeData:l}=this,c=a[P.X],d=a[P.Y],u=r.transformPoint(n,o);let f,h=1/0;for(const g of l)for(const m of g.nodeData){const{point:{x:y=NaN,y:x=NaN}={}}=m;if(isNaN(y)||isNaN(x)||!c?.inRange(y)||!d?.inRange(x))continue;const S=Math.max(Math.pow(u.x-y,2)+Math.pow(u.y-x,2),0);S<h&&(h=S,f=m)}for(const g of this.moduleMap){const m=g.pickNodeNearest(t);if(void 0!==m&&m.distanceSquared<h){h=m.distanceSquared,f=m.datum;break}}if(f)return{datum:f,distance:Math.max(Math.sqrt(h)-(null!==(i=null===(e=f.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}pickNodeMainAxisFirst(t,e){var i,n;const{x:o,y:a}=t,{axes:r,rootGroup:l,_contextNodeData:c}=this,d=r[P.X],u=r[P.Y],h=[d,u].filter(A=>A instanceof gi).map(A=>A.direction);if(e&&0===h.length)return;const[f=P.X]=h,g=l.transformPoint(o,a),m=f===P.X?[g.x,g.y]:[g.y,g.x],y=[1/0,1/0];let x;for(const A of c)for(const S of A.nodeData){const{point:{x:k=NaN,y:E=NaN}={}}=S;if(isNaN(k)||isNaN(E)||!d?.inRange(k)||!u?.inRange(E))continue;const D=f===P.X?[k,E]:[E,k];let T=!0;for(let w=0;w<D.length;w++){const C=Math.abs(D[w]-m[w]);if(C>y[w]){T=!1;break}C<y[w]&&(y[w]=C,y.fill(1/0,w+1,y.length))}T&&(x=S)}if(x){let A=Math.max(Math.pow(y[0],2)+Math.pow(y[1],2)-(null!==(n=null===(i=x.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0),0);for(const S of this.moduleMap){const k=S.pickNodeMainAxisFirst(t);if(void 0!==k&&k.distanceSquared<A){x=k.datum,A=k.distanceSquared;break}}return{datum:x,distance:Math.sqrt(A)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:n,legendItemName:o}=t;(n.id===this.id||null!=this.legendItemName&&this.legendItemName===o)&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:o,legendItemName:a}=t,r=Object.values(o).reduce((c,d)=>c+d,0);this.toggleSeriesItem(i,!!(n.id===this.id||null!=this.legendItemName&&this.legendItemName===a||e&&1===r))}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){const[t]=this._contextNodeData;if(!t||0==t.nodeData.length)return;const e=t.nodeData.map(({midPoint:n})=>{var o;return null!==(o=n?.x)&&void 0!==o?o:0}).sort((n,o)=>n-o).reduce((n,o,a,r)=>a>0?Math.max(n,o-r[a-1]):n,0),i=t.nodeData.map(({midPoint:n})=>{var o;return null!==(o=n?.y)&&void 0!==o?o:0}).sort((n,o)=>n-o).reduce((n,o,a,r)=>a>0?Math.max(n,o-r[a-1]):n,0);return new H(0,0,e,i)}updateHighlightSelectionItem(t){return R(this,void 0,void 0,function*(){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:n}=t,o=i??[];return e?this.updateMarkerSelection({nodeData:o,markerSelection:n,seriesIdx:-1}):this.updateDatumSelection({nodeData:o,datumSelection:n,seriesIdx:-1})})}updateHighlightSelectionLabel(t){return R(this,void 0,void 0,function*(){const{items:e,highlightLabelSelection:i}=t;return this.updateLabelSelection({labelData:e??[],labelSelection:i,seriesIdx:-1})})}updateDatumSelection(t){return R(this,void 0,void 0,function*(){return t.datumSelection})}updateDatumNodes(t){return R(this,void 0,void 0,function*(){})}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){return t.markerSelection})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){})}updatePaths(t){return R(this,void 0,void 0,function*(){t.paths.forEach(e=>e.visible=!1)})}updatePathNodes(t){return R(this,void 0,void 0,function*(){const{paths:e,opacity:i,visible:n}=t;for(const o of e)o.opacity=i,o.visible=n})}resetAllAnimation(t){var e,i;const{path:n,datum:o,label:a,marker:r}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),n&&t.paths.forEach(l=>{It(l,n)}),o&&It(t.datumSelections,o),a&&It(t.labelSelections,a),r&&It(t.markerSelections,r),t.contextData.some(l=>!1===l.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:n}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};n&&It([t],n)}animateReadyHighlightMarkers(t){var e,i;const{marker:n}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};n&&It([t],n)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t,e){return{datumSelections:this.subGroups.map(({datumSelection:n})=>n),markerSelections:this.subGroups.filter(({markerSelection:n})=>void 0!==n).map(({markerSelection:n})=>n),labelSelections:this.subGroups.map(({labelSelection:n})=>n),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map(({paths:n})=>n),seriesRect:t}}calculateScaling(){const t={},e=i=>{const n=this.axes[i];if(n)if(n.scale instanceof An){const{range:o,domain:a}=n.scale;t[i]={type:"log",convert:r=>n.scale.convert(r),domain:[a[0],a[1]],range:[o[0],o[1]]}}else if(n.scale instanceof rt){const{range:o}=n.scale,a=n.scale.getDomain();t[i]={type:"continuous",domain:[a[0],a[1]],range:[o[0],o[1]]}}else if(n.scale){const{domain:o}=n.scale;t[i]={type:"category",domain:o,range:o.map(a=>n.scale.convert(a))}}};return e(P.X),e(P.Y),t}}v([_(j),b("design:type",String)],bi.prototype,"legendItemName",void 0);const lg=["top","right","bottom","left"];let qc=(()=>{class s extends Ee{constructor(e,i){super(e,i),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return R(this,void 0,void 0,function*(){const i=yield e.performLayout.call(this),{animationRect:n,seriesRect:o,visibility:a,clipSeries:r}=this.updateAxes(i);this.seriesRoot.visible=a.series,this.seriesRect=o,this.animationRect=n,this.seriesRoot.translationX=Math.floor(o.x),this.seriesRoot.translationY=Math.floor(o.y);const{seriesArea:{padding:l}}=this,c=o.clone().grow({top:l.top,right:l.right,bottom:l.bottom,left:l.left});return this.hoverRect=c,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:r,series:{rect:o,paddedRect:c,visible:a.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(d=>Object.assign({id:d.id},d.getLayoutState()))}),i})}updateAxes(e){var i;const n=Object.assign({},this._lastAxisWidths),o=Object.assign({},this._lastVisibility),a=new Set(this._axes.map(y=>y.position));for(const y of Object.keys(n))a.has(y)||delete n[y];const r=(y,x)=>!Object.keys(y).some(A=>null==n[A])&&o.crossLines===x.crossLines&&o.series===x.series&&Object.entries(n).every(([A,S])=>{const k=y[A];return null==S&&null==k||S===k}),l=y=>Object.entries(y).reduce((x,[A,S])=>(S&&Math.abs(S)===1/0&&(S=0),x[A]=null!=S?Math.ceil(S):S,x),{});let c={},d={},u=!1,h=null===(i=this.seriesRect)||void 0===i?void 0:i.clone(),f=0,g={};do{Object.assign(n,c),Object.assign(o,d);const y=this.updateAxesPass(n,e.clone(),h);if(c=l(y.axisWidths),d=y.visibility,u=y.clipSeries,h=y.seriesRect,g=y.primaryTickCounts,f++>10){G.warn("unable to find stable axis layout.");break}}while(!r(c,d));return this.axes.forEach(y=>{const{direction:x}=y;y.update(g[x])}),this.axes.forEach(y=>{if(y.setCrossLinesVisible(o.crossLines),h)switch(y.clipGrid(h.x,h.y,h.width+5,h.height+5),y.position){case"left":case"right":y.clipTickLines(e.x,h.y,e.width+5,h.height+5);break;case"top":case"bottom":y.clipTickLines(h.x,e.y,h.width+5,e.height+5)}}),this._lastAxisWidths=n,this._lastVisibility=o,{seriesRect:h,animationRect:e,visibility:o,clipSeries:u}}updateAxesPass(e,i,n){const{axes:o}=this,a={},r={},l={series:!0,crossLines:!0};let c=!1;const d={},u=this.applySeriesPadding(i),h=n?this.buildCrossLinePadding(e):{},f=this.buildAxisBound(u,e,h,l),g=this.buildSeriesRect(f,e);return o.forEach(m=>{var y,x;const{position:A="left"}=m,{clipSeries:S,axisThickness:k,axisOffset:E}=this.calculateAxisDimensions({axis:m,seriesRect:g,paddedBounds:u,axisWidths:e,newAxisWidths:r,primaryTickCounts:d,clipSeries:c,addInterAxisPadding:(null!==(y=a[A])&&void 0!==y?y:0)>0});a[A]=(null!==(x=a[A])&&void 0!==x?x:0)+1,c=c||S,this.positionAxis({axis:m,axisBound:f,axisOffset:E,axisThickness:k,axisWidths:e,primaryTickCounts:d,seriesRect:g})}),{clipSeries:c,seriesRect:g,axisWidths:r,visibility:l,primaryTickCounts:d}}buildCrossLinePadding(e){var i;const n={};this.axes.forEach(o=>{o.crossLines&&o.crossLines.forEach(a=>{a.calculatePadding(n)})});for(const[o,a=0]of Object.entries(n))n[o]=Math.max(a-(null!==(i=e[o])&&void 0!==i?i:0),0);return n}applySeriesPadding(e){const i=e.clone(),n=this.axes.slice().reverse();return lg.forEach(o=>{const a=this.seriesArea.padding[o],r=n.find(l=>l.position===o);r?r.seriesAreaPadding=a:i.shrink(a,o)}),i}buildAxisBound(e,i,n,o){var a,r,l,c;const d=e.clone(),{top:u=0,right:h=0,bottom:f=0,left:g=0}=n,m=g+h,y=u+f,x=(null!==(a=i.left)&&void 0!==a?a:0)+(null!==(r=i.right)&&void 0!==r?r:0)+m,A=(null!==(l=i.top)&&void 0!==l?l:0)+(null!==(c=i.bottom)&&void 0!==c?c:0)+y;return d.width<=x||d.height<=A?(o.crossLines=!1,o.series=!1,d):(d.x+=g,d.y+=u,d.width-=m,d.height-=y,d)}buildSeriesRect(e,i){const n=e.clone(),{top:o,bottom:a,left:r,right:l}=i;return n.x+=r??0,n.y+=o??0,n.width-=(r??0)+(l??0),n.height-=(o??0)+(a??0),n.width=Math.max(0,n.width),n.height=Math.max(0,n.height),n}clampToOutsideSeriesRect(e,i,n,o){const{x:a,y:r,width:l,height:c}=e;return(1===o?Math.min:Math.max)(i,[a,r,a+l,r+c][("x"===n?0:1)+(1===o?0:2)])}calculateAxisDimensions(e){var i,n,o,a,r;const{axis:l,seriesRect:c,paddedBounds:d,axisWidths:u,newAxisWidths:h,primaryTickCounts:f,addInterAxisPadding:g}=e;let{clipSeries:m}=e;const{position:y="left",direction:x}=l,S=null!==(i=h[y])&&void 0!==i?i:0;switch(y){case"top":case"bottom":l.range=[0,c.width],l.gridLength=c.height;break;case"right":case"left":l.range=(F=l)instanceof gi||F instanceof Xi?[0,c.height]:[c.height,0],l.gridLength=c.width}var F;const k=this.zoomManager.getAxisZoom(l.id),{min:E=0,max:O=1}=k??{};l.visibleRange=[E,O],m||(m=l.dataDomain.clipped||l.visibleRange[0]>0||l.visibleRange[1]<1);let T=l.nice?f[x]:void 0;l.maxThickness=null!=l.thickness&&l.thickness>0?l.thickness:x===P.Y?.3*d.width:.3*d.height;const C=l.calculateLayout(T);T=C.primaryTickCount,f[x]=null!==(n=f[x])&&void 0!==n?n:T;let N=0;if(null!=l.thickness&&l.thickness>0)N=l.thickness;else{const{bbox:F}=C;N=x===P.X?F.height:F.width}return g&&(N+=15),N=Math.ceil(N),h[y]=(null!==(o=h[y])&&void 0!==o?o:0)+N,l.gridPadding=(null!==(a=u[y])&&void 0!==a?a:0)-(null!==(r=h[y])&&void 0!==r?r:0),{clipSeries:m,axisThickness:N,axisOffset:S,primaryTickCount:T}}positionAxis(e){var i,n,o,a;const{axis:r,axisBound:l,axisWidths:c,seriesRect:d,axisOffset:u,axisThickness:h}=e,{position:f}=r;switch(f){case"top":r.translation.x=l.x+(null!==(i=c.left)&&void 0!==i?i:0),r.translation.y=this.clampToOutsideSeriesRect(d,l.y+1+u+h,"y",1);break;case"bottom":r.translation.x=l.x+(null!==(n=c.left)&&void 0!==n?n:0),r.translation.y=this.clampToOutsideSeriesRect(d,l.y+l.height+1-h-u,"y",-1);break;case"left":r.translation.y=l.y+(null!==(o=c.top)&&void 0!==o?o:0),r.translation.x=this.clampToOutsideSeriesRect(d,l.x+u+h,"x",1);break;case"right":r.translation.y=l.y+(null!==(a=c.top)&&void 0!==a?a:0),r.translation.x=this.clampToOutsideSeriesRect(d,l.x+l.width-h-u,"x",-1)}r.updatePosition({rotation:fe(r.rotation),sideFlag:r.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(e=>!(e instanceof bi&&e.shouldFlipXY()))}}return s.className="CartesianChart",s.type="cartesian",s})();class Ki{static isInstance(t){var e;return t instanceof Ki||"AgChartInstanceProxy"===(null===(e=t.constructor)||void 0===e?void 0:e.name)&&null!=t.chart||null!=t.chart&&this.validateImplementation(t)}static validateImplementation(t){var e,i;const o=Object.keys(null!==(i=null===(e=t.constructor)||void 0===e?void 0:e.prototype)&&void 0!==i?i:{});return["getOptions","destroy"].every(a=>o.includes(a))}constructor(t){this.chart=t}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}}class Jc extends Be{constructor(){super(...arguments),this.maxSpacing=NaN}}v([_(Qe(li(1),pn("minSpacing"))),fi(NaN),b("design:type",Number)],Jc.prototype,"maxSpacing",void 0);class $i extends kn{constructor(t,e=new Wi){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:o}=qn(t,e,i);return{domain:n,clipped:o}}formatDatum(t){return"number"==typeof t?t.toFixed(2):(G.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new Jc}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,i]=function cg(s,t){let e=Math.floor(s[0]),i=s[1];e=function dg(s,t,e){const i=Math.abs(t-s)/(e-1),n=Math.floor(Math.log10(i)),o=Math.pow(10,n);return Math.floor(s/o)*o}(e,i,t);const n=function hg(s,t,e){return function pg(s){const t=Math.floor(Math.log10(s)),e=Math.pow(10,t),i=s/e*10;return i>0&&i<=1?e/10:i>1&&i<=2?2*e/10:i>1&&i<=5?5*e/10:i>5&&i<=10?10*e/10:i>10&&i<=20?20*e/10:i>20&&i<=40?40*e/10:i>40&&i<=50?50*e/10:i>50&&i<=100?100*e/10:i}((t-s)/(e-1))}(e,i,t);i=e+(t-1)*n;const a=[e,i],r=function ug(s,t,e){const i=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(i):0,o=Math.pow(10,n),a=new da(n);for(let r=0;r<e;r++)a[r]=Math.round((s+t*r)*o)/o;return a}(e,n,t);return[a,r]}(this.dataDomain.domain,t??0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}function Qc(){return U(t=>"number"==typeof t&&0!==t,"expecting a non-zero Number")}$i.className="NumberAxis",$i.type="number",v([_(Qe(li(),ns("max"))),fi(NaN),b("design:type",Number)],$i.prototype,"min",void 0),v([_(Qe(li(),pn("min"))),fi(NaN),b("design:type",Number)],$i.prototype,"max",void 0);class Ri extends $i{normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:o}=qn(t,e,i),r=n[0]<0&&n[1]>0,l=0===n[0]&&0===n[1];return(n[0]>n[1]||r||l)&&(t=[],r?G.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):l&&G.warn("the data domain has 0 extent, no data is rendered.")),0===n[0]&&(n[0]=1),0===n[1]&&(n[1]=-1),{domain:n,clipped:o}}set base(t){this.scale.base=t}get base(){return this.scale.base}constructor(t){super(t,new An),this.min=NaN,this.max=NaN}}Ri.className="LogAxis",Ri.type="log",v([_(Qe(li(),ns("max"),Qc())),fi(NaN),b("design:type",Number)],Ri.prototype,"min",void 0),v([_(Qe(li(),pn("min"),Qc())),fi(NaN),b("design:type",Number)],Ri.prototype,"max",void 0);class td extends Be{constructor(){super(...arguments),this.maxSpacing=NaN}}v([_(Qe(li(1),pn("minSpacing"))),fi(NaN),b("design:type",Number)],td.prototype,"maxSpacing",void 0);class Zi extends kn{constructor(t){super(t,new Na),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:n}=this,o=!1;return"number"==typeof i&&(i=new Date(i)),"number"==typeof n&&(n=new Date(n)),t.length>2&&(t=(null!==(e=Ne(t))&&void 0!==e?e:[0,1e3]).map(a=>new Date(a))),i instanceof Date&&(o||(o=i>t[0]),t=[i,t[1]]),n instanceof Date&&(o||(o=n<t[1]),t=[t[0],n]),t[0]>t[1]&&(t=[]),{domain:t,clipped:o}}createTick(){return new td}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return[0,1]}}Zi.className="TimeAxis",Zi.type="time",v([_(Qe(Jo,ns("max"))),b("design:type",Object)],Zi.prototype,"min",void 0),v([_(Qe(Jo,pn("min"))),b("design:type",Object)],Zi.prototype,"max",void 0);const So={[$i.type]:$i,[gi.type]:gi,[Zi.type]:Zi,[Xi.type]:Xi,[Ri.type]:Ri};function fg(s,t){So[s]=t}function gg(s,t){const e=So[s];if(e)return new e(t);throw new Error(`AG Charts - unknown axis type: ${s}`)}const Ya={has:s=>Object.prototype.hasOwnProperty.call(So,s),get axesTypes(){return Object.keys(So)}},ed={};function id(s,t){ed[s]=t}function mg(s){var t;return null!==(t=ed[s])&&void 0!==t?t:{}}const Nn=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function nd(s){return Nn.some(t=>"series"===t.type&&t.identifier===s)}function Ua(s){var t;return null===(t=Nn.find(e=>"series"===e.type&&e.identifier===s))||void 0===t?void 0:t.chartTypes}function yg(s){var t,e;return(null!==(e=null===(t=Nn.find(i=>"series"===i.type&&i.identifier===s))||void 0===t?void 0:t.useCount)&&void 0!==e?e:0)>0}function Sg(s){var t;if("enterprise"!==s.packageType)throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const e=Nn.find(i=>i.type===s.type&&i.optionsKey===s.optionsKey&&i.identifier===s.identifier&&s.chartTypes.every(n=>i.chartTypes.includes(n)));return e&&(null!==(t=e.useCount)&&void 0!==t||(e.useCount=0),e.useCount++),null!=e}const sd={category:"legend"};function Ag(s,t,e,i){sd[s]=t,od[t]=i}const od={};class _o extends Uo{constructor(t){var e;super(),this.node=new W({name:"background",zIndex:ft.SERIES_BACKGROUND_ZINDEX}),this.rectNode=new De,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push(()=>{var i;return null===(i=t.scene.root)||void 0===i?void 0:i.removeChild(this.node)},t.layoutService.addListener("layout-complete",i=>this.onLayoutComplete(i)))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}}v([_(ot),Rt("node","visible"),b("design:type",Boolean)],_o.prototype,"visible",void 0),v([_(Ot),Rt("rectNode","fill"),b("design:type",String)],_o.prototype,"fill",void 0);const ad={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:_o};class rd{set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}constructor(t){this.rh=t}}class Eg{set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}constructor(t){this.rm=t}}class Ge extends me{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:n}=this;return new H(t-i/2,e-n/2,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:n,height:o}=this;t.clear();const a=e-n/2,r=i-o/2,l=this.align(a),c=this.align(r),d=l+this.align(a,n),u=c+this.align(r,o);t.moveTo(l,c),t.lineTo(d,c),t.lineTo(d,u),t.lineTo(l,u),t.lineTo(l,c);const h=this.gripLineGap/2,f=this.gripLineLength/2;t.moveTo(this.align(e-h),this.align(i-f)),t.lineTo(this.align(e-h),this.align(i+f)),t.moveTo(this.align(e+h),this.align(i-f)),t.lineTo(this.align(e+h),this.align(i+f))}}function Ao(s,t){s!==t&&(this.dirtyPath=!0)}Ge.className="RangeHandle",v([_(_e),b("design:type",Object)],Ge.prototype,"_fill",void 0),v([_(_e),b("design:type",Object)],Ge.prototype,"_stroke",void 0),v([_(I(0)),b("design:type",Object)],Ge.prototype,"_strokeWidth",void 0),v([_(ea),b("design:type",Object)],Ge.prototype,"_lineCap",void 0),v([_(I(0)),b("design:type",Number)],Ge.prototype,"_width",void 0),v([_(I(0)),b("design:type",Number)],Ge.prototype,"_gripLineGap",void 0),v([_(I(0)),b("design:type",Number)],Ge.prototype,"_gripLineLength",void 0),v([_(I(0)),b("design:type",Number)],Ge.prototype,"_height",void 0);class Li extends me{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.05,this._min=0,this._max=1}set min(t){var e;t=we(0,t,this.max-this.minRange),this._min!==t&&!isNaN(t)&&(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=we(this.min+this.minRange,t,1),this._max!==t&&!isNaN(t)&&(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new H(t,e,i,n)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:n,min:o,max:a}=this,r=t+i*o;return new H(r,e,t+i*a-r,n)}updatePath(){const{path:t,x:e,y:i,width:n,height:o,min:a,max:r}=this;t.clear();const l=this.align(e),c=this.align(i),d=l+this.align(e,n),u=c+this.align(i,o);t.moveTo(l,c),t.lineTo(d,c),t.lineTo(d,u),t.lineTo(l,u),t.lineTo(l,c);const h=this.align(e+n*a),f=this.align(e+n*r);t.moveTo(h,c),t.lineTo(h,u),t.lineTo(f,u),t.lineTo(f,c),t.lineTo(h,c)}}Li.className="RangeMask",v([Zt({changeValue:Ao}),_(I(0)),b("design:type",Object)],Li.prototype,"x",void 0),v([Zt({changeValue:Ao}),_(I(0)),b("design:type",Object)],Li.prototype,"y",void 0),v([Zt({changeValue:Ao}),_(I(0)),b("design:type",Object)],Li.prototype,"width",void 0),v([Zt({changeValue:Ao}),_(I(0)),b("design:type",Object)],Li.prototype,"height",void 0),v([_(I()),b("design:type",Number)],Li.prototype,"_min",void 0),v([_(I()),b("design:type",Number)],Li.prototype,"_max",void 0);let Dg=(()=>{class s extends W{set x(e){this.mask.x=e,this.updateHandles()}get x(){return this.mask.x}set y(e){this.mask.y=e,this.updateHandles()}get y(){return this.mask.y}set width(e){this.mask.width=e,this.updateHandles()}get width(){return this.mask.width}set height(e){this.mask.height=e,this.updateHandles()}get height(){return this.mask.height}set min(e){this.mask.min=e}get min(){return this.mask.min}set max(e){this.mask.max=e}get max(){return this.mask.max}constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new Ge,this.maxHandle=new Ge,this.mask=(()=>{const{x:e,y:i,width:n,height:o,min:a,max:r}=s.defaults,l=new Li;l.x=e,l.y=i,l.width=n,l.height=o,l.min=a,l.max=r;const{minHandle:c,maxHandle:d}=this;return c.centerX=e,d.centerX=e+n,c.centerY=d.centerY=i+o/2,this.append([l,c,d]),l.onRangeChange=()=>{var u;this.updateHandles(),null===(u=this.onRangeChange)||void 0===u||u.call(this)},l})(),this._x=s.defaults.x,this._y=s.defaults.y,this._width=s.defaults.width,this._height=s.defaults.height,this._min=s.defaults.min,this._max=s.defaults.max,this.isContainerNode=!0}updateHandles(){const{minHandle:e,maxHandle:i,x:n,y:o,width:a,height:r,mask:l}=this;e.centerX=n+a*l.min,i.centerX=n+a*l.max,e.centerY=i.centerY=o+r/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(e){const{ctx:i,forceRender:n,stats:o}=e;if(this.dirty===M.NONE&&!n)return void(o&&o.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(i);const{mask:a,minHandle:r,maxHandle:l}=this;[a,r,l].forEach(c=>{c.visible&&(n||c.dirty>M.NONE)&&(i.save(),c.render(Object.assign(Object.assign({},e),{ctx:i,forceRender:n})),i.restore())}),this.markClean({force:!0}),o&&o.nodesRendered++}}return s.className="Range",s.defaults={x:0,y:0,width:200,height:30,min:0,max:1},s})();class ja extends Uo{set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}):this.ctx.zoomManager.updateZoom("navigator")}constructor(t){var e;super(),this.ctx=t,this.rs=new Dg,this.mask=new Eg(this.rs.mask),this.minHandle=new rd(this.rs.minHandle),this.maxHandle=new rd(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>t.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}),null===(e=t.scene.root)||void 0===e||e.appendChild(this.rs);const i={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("drag-start",n=>this.onDragStart(n),i),t.interactionManager.addListener("drag",n=>this.onDrag(n),i),t.interactionManager.addListener("hover",n=>this.onDrag(n),i),t.interactionManager.addListener("drag-end",()=>this.onDragStop(),i),t.layoutService.addListener("before-series",n=>this.layout(n)),t.layoutService.addListener("layout-complete",n=>this.layoutComplete(n)),()=>{var n;return null===(n=t.scene.root)||void 0===n?void 0:n.removeChild(this.rs)},()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}layout({shrinkRect:t}){return this.enabled&&(t.shrink(this.rs.height+this.margin,"bottom"),this.rs.y=t.y+t.height+this.margin),{shrinkRect:t}}layoutComplete({series:{rect:t,visible:e}}){this.enabled&&e&&(this.rs.x=t.x,this.rs.width=t.width),this.visible=e}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:n}=this,{minHandle:o,maxHandle:a,x:r,width:l,min:c}=n,d=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(o.containsPoint(e,i)?this.minHandleDragging=!0:a.containsPoint(e,i)?this.maxHandleDragging=!0:d.containsPoint(e,i)&&(this.panHandleOffset=(e-r)/l-c))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:n,y:o,width:a,height:r,minHandle:l,maxHandle:c}=e,{offsetX:d,offsetY:u}=t,h=n+a*e.min,g=new H(h,o,n+a*e.max-h,r),m=()=>Math.min(Math.max((d-n)/a,0),1);if(l.containsPoint(d,u)||c.containsPoint(d,u)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):g.containsPoint(d,u)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=m();else if(this.maxHandleDragging)e.max=m();else if(!isNaN(i)){const y=e.max-e.min,x=Math.min(m()-i,1-y);x<=e.min?(e.min=x,e.max=e.min+y):(e.max=x+y,e.min=e.max-y)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}v([Zt({changeValue(s){s&&(this.min=0,this.max=1),this.updateGroupVisibility()}}),_(ot),b("design:type",Object)],ja.prototype,"enabled",void 0),v([_(I(0)),b("design:type",Object)],ja.prototype,"margin",void 0);const Tg={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:ja,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}},za=({takeColors:s})=>{const{fills:[t],strokes:[e]}=s(1);return{fill:t,stroke:e}},Es=s=>{const{fill:t,stroke:e}=za(s);return{marker:{fill:t,stroke:e}}},Ii_SMALL=12,Ii_MEDIUM=13,Ii_LARGE=17,wn="normal",Ye_BOTTOM="bottom",Ye_LEFT="left",Ue_CATEGORY="category",Ue_NUMBER="number",qi={},Va={},Te={has:s=>Object.prototype.hasOwnProperty.call(qi,s),isCartesian:s=>"cartesian"===qi[s],isPolar:s=>"polar"===qi[s],isHierarchy:s=>"hierarchy"===qi[s],get seriesTypes(){return Object.keys(qi)},get cartesianTypes(){return this.seriesTypes.filter(s=>this.isCartesian(s))},get polarTypes(){return this.seriesTypes.filter(s=>this.isPolar(s))},get hierarchyTypes(){return this.seriesTypes.filter(s=>this.isHierarchy(s))}};function Rg(s,t){var e;Va[s]=Et([null!==(e=Va[s])&&void 0!==e?e:{},t])}function ld(s){var t;return null!==(t=Va[s])&&void 0!==t?t:{}}function Ji(s){var t,e,i,n;return null!==(n=null!==(t=s.type)&&void 0!==t?t:null===(i=null===(e=s.series)||void 0===e?void 0:e[0])||void 0===i?void 0:i.type)&&void 0!==n?n:"line"}function Mn(s){const t=Ji(s);return null==t||("cartesian"===t?(G.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):Te.isCartesian(t)||function vg(s){var t;return"cartesian"===(null===(t=Ua(s))||void 0===t?void 0:t.find(i=>"cartesian"===i))}(t))}function ko(s){const t=Ji(s);return null!=t&&("hierarchy"===t?(G.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):Te.isHierarchy(t)||function xg(s){var t;return"hierarchy"===(null===(t=Ua(s))||void 0===t?void 0:t.find(i=>"hierarchy"===i))}(t))}function Oo(s){const t=Ji(s);return null!=t&&("polar"===t?(G.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):Te.isPolar(t)||function bg(s){var t;return"polar"===(null===(t=Ua(s))||void 0===t?void 0:t.find(i=>"polar"===i))}(t))}const cd={axes:[{type:Ue_NUMBER,position:Ye_LEFT},{type:Ue_CATEGORY,position:Ye_BOTTOM}]},dd=Symbol("extends-chart-defaults"),ud=Symbol("extends-legend-defaults"),hd=Symbol("extends-legend-item-defaults"),pd=Symbol("extends-legend-item-marker-defaults"),fd=Symbol("extends-axes-defaults"),gd=Symbol("extends-axes-label-defaults"),md=Symbol("extends-axes-line-defaults"),yd=Symbol("extends-axes-tick-defaults"),vd=Symbol("extends-axes-grid-line-defaults"),xi=Symbol("extends-series-defaults"),Rn=Symbol("extends-cartesian-marker-defaults"),bd=Symbol("override-series-label-defaults"),Ft=Symbol("default-font"),Vt=Symbol("default-label-colour"),xd=Symbol("default-inverted-label-colour"),Ln=Symbol("default-inside-series-label-colour"),In=Symbol("default-muted-label-colour"),Eo=Symbol("default-axis-grid-colour"),Do=Symbol("default-axis-line-colour"),Ds=Symbol("default-cross-lines-colour"),To=Symbol("default-background-colour"),Pn=Symbol("default-shadow-colour"),je=Symbol("default-waterfall-series-positive-colors"),ze=Symbol("default-waterfall-series-negative-colors"),We=Symbol("default-waterfall-series-total-colors"),Ve=Symbol("default-waterfall-series-connector-line-stroke"),Co=Symbol("default-polar-series-stroke"),He=Symbol("default-diverging-series-colour-range"),Ha=Symbol("default-hierarchy-fills"),Xa=Symbol("default-hierarchy-strokes");function Sd(s,t,e,i,n){const{defaultDuration:o}=e,{addPhaseFn:a,updatePhaseFn:r,removePhaseFn:l}=n,c=(d,u,h)=>{e.animate({id:`${s}_${t}_${u.id}_${d}`,groupId:s,from:0,to:1,ease:as,onUpdate(f,g){g&&"removed"!==d||(u.path.clear({trackChanges:!0}),h(f,u),u.checkPathDirty())},onStop(){"added"===d&&(u.path.clear({trackChanges:!0}),h(1,u),u.checkPathDirty())},duration:ee[d].animationDuration*o,delay:ee[d].animationDelay*o})};for(const d of i)e.isSkipped()||(c("removed",d,l),c("updated",d,r)),c("added",d,a)}const Gg=U(s=>Vc(s)||Object.getPrototypeOf(s)===Ae,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class ce extends aa{constructor(){super(...arguments),this.enabled=!0,this.shape=ro,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:o,strokeOpacity:a}=this;return{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:o,strokeOpacity:a}}getDiameter(){return this.size+this.strokeWidth}}function Ka({id:s},t,e){di(s,"markers",t,e,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1}),e.forEach(i=>i.cleanup())}function $a({id:s},t,e,i){Ct(s,"markers",t,e,{fromFn:(r,l)=>{var c,d;const h=(s=>-(Math.cos(s*Math.PI)-1)/2)((null!==(d=null===(c=l.midPoint)||void 0===c?void 0:c.x)&&void 0!==d?d:i)/i)-.1;return{scalingX:0,scalingY:0,animationDelay:Math.max(Math.min(h,1),0),animationDuration:.2}},toFn:()=>({scalingX:1,scalingY:1})})}function Ts(s){return{opacity:1,scalingX:1,scalingY:1}}function Cs(s,t){var e,i,n,o;return{translationX:null!==(i=null===(e=t.point)||void 0===e?void 0:e.x)&&void 0!==i?i:NaN,translationY:null!==(o=null===(n=t.point)||void 0===n?void 0:n.y)&&void 0!==o?o:NaN}}function Za(s,t){const e=(a,r)=>{const l=s[r][a];return Array.isArray(l)?l[0]:l},i=a=>{const{xValue:r}=a;return s.moved[r]?{point:e(r,"moved"),status:"updated"}:s.removed[r]?{point:e(r,"removed"),status:"removed"}:s.added[r]?{point:e(r,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(a,r)=>{var l,c,d,u,h,f;const{status:g,point:m}=i(r);if("unknown"===g)return{opacity:0};const y=Object.assign({translationX:null!==(c=null===(l=m?.from)||void 0===l?void 0:l.x)&&void 0!==c?c:a.translationX,translationY:null!==(u=null===(d=m?.from)||void 0===d?void 0:d.y)&&void 0!==u?u:a.translationY,opacity:a.opacity},ee[g]);return"added"===t?Object.assign(Object.assign(Object.assign({},y),{opacity:0,translationX:null===(h=m?.to)||void 0===h?void 0:h.x,translationY:null===(f=m?.to)||void 0===f?void 0:f.y}),ee.added):("added"===g&&(y.opacity=0),y)},toFn:(a,r)=>{var l,c;const{status:d,point:u}=i(r);if("unknown"===d)return{opacity:0};const h=Object.assign({translationX:r.point.x,translationY:r.point.y,opacity:1},ee[d]);return"removed"===d||"removed"===t?Object.assign(Object.assign(Object.assign({},h),{translationX:null===(l=u?.to)||void 0===l?void 0:l.x,translationY:null===(c=u?.to)||void 0===c?void 0:c.y,opacity:0}),ee.removed):h}}}function qa(s){return s.reduce(({min:t,max:e},i)=>((null==t||t.point.x>i.point.x)&&(t=i),(null==e||e.point.x<i.point.x)&&(e=i),{min:t,max:e}),{})}function _d(s,t,e){return{x:e,y:(t.y-s.y)/(t.x-s.x)*(e-s.x)+s.y}}function Ad(s,t,e,i){let n=-1,o=0;const a=[];for(;o<s.length;)s[o].change!==t?s[o].change!==e?(a.length>0&&(i(a,n,o),a.length=0),n=o,o++):o++:(a.push(s[o]),o++);a.length>0&&i(a,n,o)}function Ja(s,t){Ad(s,"out","in",(e,i,n)=>{var o,a;-1===i&&s[n]?e.forEach(r=>r.to=s[n].from):n===s.length&&s[i]?e.forEach(r=>r.to=s[i].from):"intersect"===t&&null!==(o=s[i])&&void 0!==o&&o.from&&null!==(a=s[n])&&void 0!==a&&a.from?e.forEach(r=>r.to=_d(s[i].from,s[n].from,r.from.x)):e.forEach(r=>r.to=r.from)}),Ad(s,"in","out",(e,i,n)=>{var o,a;-1===i&&s[n]?e.forEach(r=>r.from=s[n].to):n===s.length&&s[i]?e.forEach(r=>r.from=s[i].to):"intersect"===t&&null!==(o=s[i])&&void 0!==o&&o.to&&null!==(a=s[n])&&void 0!==a&&a.to?e.forEach(r=>r.from=_d(s[i].to,s[n].to,r.to.x)):e.forEach(r=>r.from=r.to)})}function kd(s,t,e){const i=isNaN(s.x)?t.x:s.x,n=isNaN(s.y)?t.y:s.y,o=t.x-s.x,a=t.y-s.y;return{x:i+(isNaN(o)?0:o*e),y:n+(isNaN(a)?0:a*e)}}function Qa(s,t,e){const{path:i}=e;let n;for(const o of s){const a=t[o.change];if(null==a)continue;const{from:r,to:l}=o;if(null==r||null==l)continue;const{x:c,y:d}=kd(r,l,a);if(!1===o.moveTo)i.lineTo(c,d);else if(!0!==o.moveTo&&n){if(n){const u="in"===o.moveTo?a:1-a,{x:h,y:f}=kd(n,{x:c,y:d},u);i.lineTo(h,f),i.moveTo(c,d)}}else i.moveTo(c,d);n={x:c,y:d}}}function tr({id:s},t,e){di(s,"path_properties",t,e,{clipScalingX:0},{clipScalingX:1},{start:{clipMode:"normal"},finish:{clipMode:void 0}})}function er(s){return t=>({opacity:s.getOpacity(),clipScalingX:1,clipMode:void 0})}function No(s,t){if(!t)return NaN;if(s instanceof Date&&(s=s.getTime()),"continuous"===t.type&&"number"==typeof s)return(s-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if("log"===t.type&&"number"==typeof s)return t.convert(s);const e=t.domain.findIndex(i=>i===s);return e>=0?t.range[e]:NaN}function jg(s,t){const e=Number(s),i=Number(t);return isNaN(e)||isNaN(i)?s===t:Math.abs(i-e)<.25}function Ed(s=!1,t=!1){return s===t?!!s:s?"in":"out"}function Ns(s,t,e={}){var i,n,o,a;const{backfillSplitMode:r="intersect"}=e,l=S=>{var k,E;return{x:No(null!==(k=S.xValue)&&void 0!==k?k:NaN,s.scales.x),y:No(null!==(E=S.yValue)&&void 0!==E?E:NaN,s.scales.y)}},c=S=>{var k,E;return{x:No(null!==(k=S.xValue)&&void 0!==k?k:NaN,t.scales.x),y:No(null!==(E=S.yValue)&&void 0!==E?E:NaN,t.scales.y)}},d=[],u={added:{},moved:{},removed:{}},h=(S,k,E,O="move")=>{S&&(isNaN(S.point.x)||isNaN(S.point.y))&&(S=k);const D={from:S?.point,to:k?.point,moveTo:Ed(S?.point.moveTo,k?.point.moveTo),change:O};"move"===O?(u.moved[E]=D,x++,A++):"in"===O?(u.added[E]=D,A++):"out"===O&&(u.removed[E]=D,x++),d.push(D)},{min:f,max:g}=qa(t.nodeData),{min:m,max:y}=qa(s.nodeData);let x=0,A=0;for(;x<t.nodeData.length||A<s.nodeData.length;){const S=t.nodeData[x],k=s.nodeData[A],E=S?l(S):void 0,O=k?c(k):void 0,D=void 0;if(E&&jg(E.x,k?.point.x))h(S,k,k.xValue,"move");else if(E&&E.x<(null!==(i=m?.point.x)&&void 0!==i?i:-1/0))h(S,D,S.xValue,"out");else if(E&&E.x>(null!==(n=y?.point.x)&&void 0!==n?n:1/0))h(S,D,S.xValue,"out");else if(O&&O.x<(null!==(o=f?.point.x)&&void 0!==o?o:-1/0))h(D,k,k.xValue,"in");else if(O&&O.x>(null!==(a=g?.point.x)&&void 0!==a?a:1/0))h(D,k,k.xValue,"in");else if(E&&E.x<k?.point.x)h(S,D,S.xValue,"out");else if(O&&O.x<S?.point.x)h(D,k,k.xValue,"in");else if(S)h(S,D,S.xValue,"out");else{if(!k)throw new Error("Unable to process points");h(D,k,k.xValue,"in")}}return Ja(d,r),{result:d,resultMap:u}}function ws(s,t,e,i={}){var n,o,a;const{backfillSplitMode:r="intersect",multiDatum:l=!1}=i,c=[],d={added:{},moved:{},removed:{}},u={added:{},moved:{},removed:{}};let h,f;const g=(S,k)=>{var E,O;const D="move"===k.change?"moved":"in"===k.change?"added":"removed";l?(null!==(E=(O=u[D])[S])&&void 0!==E||(O[S]=[]),u[D][S].push(k)):d[D][S]=k,h=k,f=S};let m=0,y=0,x=!1;for(;m<t.nodeData.length||y<s.nodeData.length;){const S=t.nodeData[m],k=s.nodeData[y];let E;if(S?.xValue===k?.xValue)E={change:"move",moveTo:Ed(null!==(n=S.point.moveTo)&&void 0!==n&&n,k.point.moveTo),from:S.point,to:k.point},g(S.xValue,E),m++,y++;else if(e.removed.indexOf(S?.xValue)>=0)E={change:"out",moveTo:null!==(o=S.point.moveTo)&&void 0!==o&&o,from:S.point},g(S.xValue,E),m++;else if(e.added.indexOf(k?.xValue)>=0)E={change:"in",moveTo:null!==(a=k.point.moveTo)&&void 0!==a&&a,to:k.point},g(k.xValue,E),y++;else if(l&&h&&f===S?.xValue)E=Object.assign({},h),g(S.xValue,E),m++;else{if(!l||!h||f!==k?.xValue){x=!0;break}E=Object.assign({},h),g(k.xValue,E),y++}c.push(E)}let A=-1/0;return x||(x=c.some(S=>{const{change:k,to:{x:E=-1/0}={}}=S;if("out"===k)return;const O=E<A;return A=E,O})),x?{result:void 0,resultMap:void 0}:(Ja(c,r),l?{result:c,resultMap:u}:{result:c,resultMap:d})}function ir(s,t,e,i,n){const o=function Dd(s,t){let e="updated";const i=n=>n.visible;return!i(t)&&i(s)?e="added":i(t)&&!i(s)&&(e="removed"),e}(s,t),c=function zg(s,t){const e="none"===t?"updated":s,i={fromFn:n=>{let o;return o="removed"===s?{finish:{visible:!1}}:"added"===s?{start:{visible:!0}}:{},Object.assign(Object.assign({},ee[e]),o)},toFn:n=>Object.assign({},ee[e])};return"fade"===t?{fromFn:n=>Object.assign({opacity:"added"===s?0:n.opacity},i.fromFn(n)),toFn:n=>Object.assign({opacity:"removed"===s?0:1},i.toFn(n))}:i}(o,i);return{status:o,path:{addPhaseFn:(d,u)=>{n(e,{move:1,in:d},u)},updatePhaseFn:(d,u)=>{n(e,{move:d},u)},removePhaseFn:(d,u)=>{n(e,{move:0,out:d},u)}},pathProperties:c}}v([_(ot),B({redraw:M.MAJOR}),b("design:type",Object)],ce.prototype,"enabled",void 0),v([_(Gg),B({redraw:M.MAJOR}),b("design:type",Object)],ce.prototype,"shape",void 0),v([_(I(0)),B({redraw:M.MAJOR}),b("design:type",Number)],ce.prototype,"size",void 0),v([_(Ot),B({redraw:M.MAJOR}),b("design:type",String)],ce.prototype,"fill",void 0),v([_(J(0,1)),B({redraw:M.MAJOR}),b("design:type",Number)],ce.prototype,"fillOpacity",void 0),v([_(Ot),B({redraw:M.MAJOR}),b("design:type",String)],ce.prototype,"stroke",void 0),v([_(J(0)),B({redraw:M.MAJOR}),b("design:type",Number)],ce.prototype,"strokeWidth",void 0),v([_(J(0,1)),B({redraw:M.MAJOR}),b("design:type",Number)],ce.prototype,"strokeOpacity",void 0),v([_(ti),B({redraw:M.MAJOR}),b("design:type",Function)],ce.prototype,"formatter",void 0);var Ms=function(s){return s[s.Fill=0]="Fill",s[s.Stroke=1]="Stroke",s[s.Marker=2]="Marker",s[s.Label=3]="Label",s}(Ms||{});function wo(s){const{points:t}=s.fillData;return{top:t.slice(0,t.length/2),bottom:t.slice(t.length/2).reverse()}}function Pi(s,t,e){return{scales:t.scales,nodeData:e[s],visible:t.visible}}class ne extends bi{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[St.NEAREST_BY_MAIN_AXIS_FIRST,St.EXACT_SHAPE_MATCH],animationResetFns:{path:er({getOpacity:()=>this.getOpacity()}),label:Di,marker:(e,i)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),Cs(0,i))}}),this.tooltip=new ke,this.marker=new ce,this.label=new zt,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this.strokeWidth=2,this.shadow=void 0}processData(t){return R(this,void 0,void 0,function*(){const{xKey:e,yKey:i,normalizedTo:n,data:o,visible:a,seriesGrouping:{groupIndex:r=this.id}={}}=this;if(null==e||null==i||null==o)return;const l=!this.ctx.animationManager.isSkipped(),{isContinuousX:c,isContinuousY:d}=this.isContinuous(),u=[`area-stack-${r}-yValues`,`area-stack-${r}-yValues-trailing`,`area-stack-${r}-yValues-prev`,`area-stack-${r}-yValues-trailing-prev`,`area-stack-${r}-yValues-marker`],h=[],f=n&&isFinite(n)?n:void 0;f&&(h.push(oo(this,[u[0],u[1],u[4]],f,"range")),h.push(oo(this,[u[2],u[3]],f,"range"))),!c&&l&&this.processedData&&h.push(bn(this.processedData)),l&&h.push(hs(this));const g={invalidValue:null};a||(g.forceValue=0),yield this.requestDataModel(t,o,{props:[re(this,e,c,{id:"xValue"}),_t(this,i,d,Object.assign({id:"yValueRaw"},g)),...Ei(this,i,d,"window","current",Object.assign(Object.assign({id:"yValueEnd"},g),{groupId:u[0]})),...Ei(this,i,d,"window-trailing","current",Object.assign(Object.assign({id:"yValueStart"},g),{groupId:u[1]})),...Ei(this,i,d,"window","last",Object.assign(Object.assign({id:"yValuePreviousEnd"},g),{groupId:u[2]})),...Ei(this,i,d,"window-trailing","last",Object.assign(Object.assign({id:"yValuePreviousStart"},g),{groupId:u[3]})),...Ei(this,i,d,"normal","current",Object.assign(Object.assign({id:"yValueCumulative"},g),{groupId:u[4]})),...h],groupByKeys:!0}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:n}=this;if(!e||!i)return[];const o=n[P.X],a=n[P.Y],r=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",e),c=i.getDomain(this,"yValueEnd","value",e);return t===P.X?"key"===r?.def.type&&"category"===r.def.valueType?l:ie(Ne(l),o):ie(a instanceof Ri||a instanceof Zi?c:[c[0]>0?0:c[0],c[1]<0?0:c[1]],a)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return R(this,void 0,void 0,function*(){const{axes:i,data:n,processedData:{data:o}={},dataModel:a}=this,r=i[P.X],l=i[P.Y];if(!(r&&l&&n&&a))return[];const{yKey:c="",xKey:d="",marker:u,label:h,fill:f,stroke:g}=this,{scale:m}=r,{scale:y}=l,x=rt.is(y),A=(null!==(e=m.bandwidth)&&void 0!==e?e:0)/2,S=a.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),k=it=>{const{point:nt}=it,tt=pe(it,["point"]);return Object.assign(Object.assign({},tt),{point:Object.assign(Object.assign({},nt),{moveTo:!0})})},E=(it,nt,tt)=>{const dt=m.convert(it)+A,ht=y.convert(nt);return[{point:{x:dt,y:y.convert(tt)},yValue:tt,xValue:it},{point:{x:dt,y:ht},yValue:nt,xValue:it}]},O=(it,nt,tt)=>{let dt;const ht=this.normalizedTo&&isFinite(this.normalizedTo),wt=ht&&x&&fa(tt);return(!ht&&!isNaN(tt)||wt)&&(dt=nt),{x:m.convert(it)+A,y:y.convert(dt),size:u.size}},D=c,T=[],w=[],C={itemId:D,fillData:{itemId:D,points:[]},strokeData:{itemId:D,points:[]},labelData:T,nodeData:w,scales:t.calculateScaling.call(this),visible:this.visible},N=C.fillData.points,L=[],F=C.strokeData.points;let Z,V=-1,q=-1/0;return o?.forEach(it=>{const{keys:nt,keys:[tt],datum:dt,values:ht}=it;ht.forEach((wt,Jt)=>{var gt,Ce,Y;V++;const mt=dt[Jt],At=a.resolveProcessedDataDefsValues(S,{keys:nt,values:wt}),{yValueRaw:pt,yValueCumulative:be}=At;let{yValueStart:Xt,yValueEnd:Ut,yValuePreviousStart:Kt,yValuePreviousEnd:Ys}=At;const Hn=null!=pt,Us=O(tt,+be,pt);if(Hn&&u&&w.push({index:V,series:this,itemId:D,datum:mt,midPoint:{x:Us.x,y:Us.y},cumulativeValue:Ut,yValue:pt,xValue:tt,yKey:c,xKey:d,point:Us,fill:null!==(gt=u.fill)&&void 0!==gt?gt:f,stroke:null!==(Ce=u.stroke)&&void 0!==Ce?Ce:g,strokeWidth:null!==(Y=u.strokeWidth)&&void 0!==Y?Y:this.getStrokeWidth(this.strokeWidth)}),Hn&&h){const nu=this.getLabelText(h,{value:pt,datum:mt,xKey:d,yKey:c,xName:this.xName,yName:this.yName},_r=>ae(_r)?_r.toFixed(2):String(_r));T.push({index:V,series:this,itemId:c,datum:mt,x:Us.x,y:Us.y,label:nu?{text:nu,fontStyle:h.fontStyle,fontWeight:h.fontWeight,fontSize:h.fontSize,fontFamily:h.fontFamily,textAlign:"center",textBaseline:"bottom",fill:h.color}:void 0})}(null==q||null==pt)&&(Xt=Xt??0,Ut=Xt??0,Kt=Kt??0,Ys=Kt??0);const[eu,k0]=E(Z,Kt,Ys),[iu,O0]=E(tt,Xt,Ut);null!=Z&&null!=tt&&(N.push(eu),L.push(k0),N.push(iu),L.push(O0)),Hn&&null!=q&&V>0&&(F.push(k(eu)),F.push(iu)),Z=tt,q=pt})}),F.length>0&&(F[0]=k(F[0])),L.reverse(),N.push(...L),[C]})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(wi(t))}updatePathNodes(t){return R(this,void 0,void 0,function*(){const{opacity:e,visible:i,animationEnabled:n}=t,[o,a]=t.paths,{seriesRectHeight:r,seriesRectWidth:l}=this.nodeDataDependencies,c=this.getStrokeWidth(this.strokeWidth);a.setProperties({tag:Ms.Stroke,fill:void 0,lineJoin:a.lineCap="round",pointerEvents:te.None,stroke:this.stroke,strokeWidth:c,strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,opacity:e,visible:i}),o.setProperties({tag:Ms.Fill,stroke:void 0,lineJoin:"round",pointerEvents:te.None,fill:this.fill,fillOpacity:this.fillOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,strokeOpacity:this.strokeOpacity,fillShadow:this.shadow,opacity:e,visible:i||n,strokeWidth:c});const d=u=>{var h,f;null==u.clipPath&&(u.clipPath=new Vi,u.clipScalingX=1,u.clipScalingY=1),null===(h=u.clipPath)||void 0===h||h.clear({trackChanges:!0}),null===(f=u.clipPath)||void 0===f||f.rect(-25,-25,(l??0)+50,(r??0)+50)};d(a),d(o)})}updatePaths(t){return R(this,void 0,void 0,function*(){this.updateAreaPaths([t.paths],[t.contextData])})}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(({fillData:i},n)=>{const[o]=t[n],{path:a}=o;a.clear({trackChanges:!0});for(const{point:r}of i.points)r.moveTo?a.moveTo(r.x,r.y):a.lineTo(r.x,r.y);a.closePath(),o.checkPathDirty()})}updateStrokePath(t,e){e.forEach(({strokeData:i},n)=>{const[,o]=t[n],{path:a}=o;a.clear({trackChanges:!0});for(const{point:r}of i.points)r.moveTo?a.moveTo(r.x,r.y):a.lineTo(r.x,r.y);o.checkPathDirty()})}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this,o=n&&e?e:[];return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(o)})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",marker:a,fill:r,stroke:l,strokeWidth:c,fillOpacity:d,strokeOpacity:u}=this,h=oe(i&&this.highlightStyle.item,a.getStyle(),{fill:r,stroke:l,strokeWidth:c,fillOpacity:d,strokeOpacity:u});e.each((f,g)=>{this.updateMarkerStyle(f,a,{datum:g,highlighted:i,xKey:n,yKey:o},h)}),i||this.marker.markClean()})}updateLabelSelection(t){return R(this,void 0,void 0,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,n=>{n.tag=Ms.Label})})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:a,fontFamily:r,color:l}=this.label;e.each((c,d)=>{const{x:u,y:h,label:f}=d;f&&i&&this.visible?(c.fontStyle=n,c.fontWeight=o,c.fontSize=a,c.fontFamily=r,c.textAlign=f.textAlign,c.textBaseline=f.textBaseline,c.text=f.text,c.x=u,c.y=h-10,c.fill=l,c.visible=!0):c.visible=!1})})}getTooltipHtml(t){const{xKey:e,id:i,axes:n,xName:o,yName:a,tooltip:r,marker:l,dataModel:c}=this,{yKey:d,xValue:u,yValue:h,datum:f}=t,g=n[P.X],m=n[P.Y];if(!(e&&d&&g&&m&&ae(h)&&c))return"";const y=g.formatDatum(u),x=m.formatDatum(h),A=xt(a),S=xt(y+": "+x),k=oe({fill:this.fill},l.getStyle(),{stroke:this.stroke,strokeWidth:this.strokeWidth}),{fill:E}=this.getMarkerStyle(l,{datum:t,xKey:e,yKey:d,highlighted:!1},k);return r.toTooltipHtml({title:A,content:S,backgroundColor:E},{datum:f,xKey:e,xName:o,yKey:d,yName:a,color:E,title:A,seriesId:i})}getLegendData(t){var e,i,n,o,a;const{data:r,id:l,xKey:c,yKey:d,yName:u,marker:h,fill:f,stroke:g,fillOpacity:m,strokeOpacity:y,visible:x}=this;return r?.length&&c&&d&&"category"===t?[{legendType:t,id:l,itemId:d,seriesId:l,enabled:x,label:{text:u??d},marker:{shape:h.shape,fill:null!==(e=h.fill)&&void 0!==e?e:f,stroke:null!==(i=h.stroke)&&void 0!==i?i:g,fillOpacity:null!==(n=h.fillOpacity)&&void 0!==n?n:m,strokeOpacity:null!==(o=h.strokeOpacity)&&void 0!==o?o:y,strokeWidth:null!==(a=h.strokeWidth)&&void 0!==a?a:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:n,paths:o}=t,{animationManager:a}=this.ctx,{seriesRectWidth:r=0}=this.nodeDataDependencies;this.updateAreaPaths(o,n),tr(this,a,o.flat()),It(e,Cs),$a(this,a,e,r),Dt(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelections:o,labelSelections:a,contextData:r,paths:l,previousContextData:c}=t;if(super.resetAllAnimation(t),0===r.length||!c||0===c.length)return n.skipCurrentBatch(),void this.updateAreaPaths(l,r);const[[d,u]]=l,[h]=r,[f]=c,g=function Cd(s,t,e){var i;const n="category"===(null===(i=s.scales.x)||void 0===i?void 0:i.type);let o="updated";t.visible&&!s.visible?o="removed":!t.visible&&s.visible&&(o="added");const{resultMap:l}=n&&e?ws(s,t,e,{backfillSplitMode:"static",multiDatum:!0}):Ns(s,t,{backfillSplitMode:"static"}),{top:c,bottom:d}=n&&e?function Wg(s,t,e){const i=wo(t),n=wo(s),o={multiDatum:!0};return{top:ws(Pi("top",s,n),Pi("top",t,i),e,o),bottom:ws(Pi("bottom",s,n),Pi("bottom",t,i),e,o)}}(s,t,e):function Vg(s,t){const e=wo(t),i=wo(s);return{top:Ns(Pi("top",s,i),Pi("top",t,e)),bottom:Ns(Pi("bottom",s,i),Pi("bottom",t,e))}}(s,t);if(void 0===l||void 0===c.result||void 0===d.result)return;return{fill:ir(s,t,[...c.result,...d.result.reverse()],"none",Qa),marker:Za(l,o)}}(h,f,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===g)return n.skipCurrentBatch(),void this.updateAreaPaths(l,r);Ct(this.id,"marker_update",n,o,g.marker),Ct(this.id,"fill_path_properties",n,[d],g.fill.pathProperties),Sd(this.id,"fill_path_update",n,[d],g.fill.path),this.updateStrokePath(l,r),function Od({id:s},t,e,i){di(s,t,e,i,{opacity:0},{opacity:1},rs)}(this,"stroke",n,[u]),Dt(this,"labels",n,a)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new W}}ne.className="AreaSeries",ne.type="area",v([_(_e),b("design:type",String)],ne.prototype,"fill",void 0),v([_(_e),b("design:type",String)],ne.prototype,"stroke",void 0),v([_(I(0,1)),b("design:type",Object)],ne.prototype,"fillOpacity",void 0),v([_(I(0,1)),b("design:type",Object)],ne.prototype,"strokeOpacity",void 0),v([_(ki),b("design:type",Array)],ne.prototype,"lineDash",void 0),v([_(I(0)),b("design:type",Number)],ne.prototype,"lineDashOffset",void 0),v([_(j),b("design:type",String)],ne.prototype,"xKey",void 0),v([_(j),b("design:type",String)],ne.prototype,"xName",void 0),v([_(j),b("design:type",String)],ne.prototype,"yKey",void 0),v([_(j),b("design:type",String)],ne.prototype,"yName",void 0),v([_(J(0)),b("design:type",Number)],ne.prototype,"normalizedTo",void 0),v([_(I(0)),b("design:type",Object)],ne.prototype,"strokeWidth",void 0);const Hg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:ne,stackable:!0,seriesDefaults:cd,themeTemplate:{__extends__:xi,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Pn,xOffset:3,yOffset:3,blur:5},marker:{__extends__:Rn,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ft,color:Vt,formatter:void 0}},paletteFactory:s=>{const{marker:t}=Es(s);return{fill:t.fill,stroke:t.stroke,marker:t}}};class nr extends bi{constructor(){super(...arguments),this.direction="vertical"}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return"horizontal"===this.direction}getBarDirection(){return this.shouldFlipXY()?P.X:P.Y}getCategoryDirection(){return this.shouldFlipXY()?P.Y:P.X}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}}function Rs(s,t){const{startingX:e,startingY:i}=function Kg(s,t){const e=t[s?P.Y:P.X];let i=1/0,n=0;return e?(s?n=e.scale.convert(rt.is(e.scale)?0:Math.max(...e.range)):i=e.scale.convert(rt.is(e.scale)?0:Math.min(...e.range)),{startingX:i,startingY:n}):{startingX:i,startingY:n}}(s,t),n=a=>{var r;return is(null!==(r=a.yValue)&&void 0!==r?r:0)};return{isVertical:s,calculate:(a,r)=>{let l=s?a.x:e,c=s?i:a.y,d=s?a.width:0,u=s?0:a.height;return r&&(isNaN(l)||isNaN(c))&&(({x:l,y:c}=r),d=s?r.width:0,u=s?0:r.height,s&&!n(r)?c+=r.height:!s&&n(r)&&(l+=r.width)),{x:l,y:c,width:d,height:u}}}}function Ls(s){const t=n=>null==n||isNaN(n.x)||isNaN(n.y);return{toFn:(n,o,a)=>"removed"===a||t(o)?s.calculate(o,n.previousDatum):{x:o.x,y:o.y,width:o.width,height:o.height},fromFn:(n,o,a)=>{"updated"===a&&t(o)?a="removed":"updated"===a&&t(n.previousDatum)&&(a="added");let r={x:n.x,y:n.y,width:n.width,height:n.height};return("unknown"===a||"added"===a)&&(r=s.calculate(o,n.previousDatum)),Object.assign(Object.assign({},r),ee[a])}}}function sr(s,{x:t,y:e,width:i,height:n}){return{x:t,y:e,width:i,height:n}}v([_(oa),b("design:type",String)],nr.prototype,"direction",void 0);var or=function(s){return s[s.Bar=0]="Bar",s[s.Label=1]="Label",s}(or||{});class Id extends zt{constructor(){super(...arguments),this.placement="inside"}}v([_(qs("inside","outside")),b("design:type",String)],Id.prototype,"placement",void 0);class Ht extends nr{constructor(t){super({moduleCtx:t,pickModes:[St.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationResetFns:{datum:sr,label:Di}}),this.label=new Id,this.tooltip=new ke,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.stackGroup=void 0,this.strokeWidth=1,this.shadow=void 0,this.groupScale=new hn,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===P.X?t===P.X?P.Y:P.X:t}processData(t){var e,i,n,o;return R(this,void 0,void 0,function*(){const{xKey:a,yKey:r,normalizedTo:l,seriesGrouping:{groupIndex:c=this.id}={},data:d=[]}=this;if(null==a||null==r||null==d)return;const u=!this.ctx.animationManager.isSkipped(),h=Math.abs(l??NaN),f=rt.is(null===(e=this.getCategoryAxis())||void 0===e?void 0:e.scale),g=rt.is(null===(i=this.getValueAxis())||void 0===i?void 0:i.scale),m=`bar-stack-${c}-yValues`,y=`${m}-trailing`,x=h&&isFinite(h)?h:void 0,A=[];x&&A.push(oo(this,[m,y],x,"range")),u&&this.processedData&&A.push(bn(this.processedData)),u&&A.push(hs(this));const S=this.visible?{}:{forceValue:0},{processedData:k}=yield this.requestDataModel(t,d,{props:[re(this,a,f,{id:"xValue"}),_t(this,r,g,Object.assign({id:"yValue-raw",invalidValue:null},S)),...Ei(this,r,g,"normal","current",Object.assign({id:"yValue-end",invalidValue:null,missingValue:0,groupId:m,separateNegative:!0},S)),...Ei(this,r,g,"trailing","current",Object.assign({id:"yValue-start",invalidValue:null,missingValue:0,groupId:y,separateNegative:!0},S)),...f?[ga]:[],...A],groupByKeys:!0});this.smallestDataInterval={x:null!==(o=null===(n=k.reduced)||void 0===n?void 0:n.smallestKeyInterval)&&void 0!==o?o:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:n}=this;if(!i||!n)return[];const{reduced:{[ga.property]:o}={}}=i,a=this.getCategoryAxis(),r=this.getValueAxis(),l=n.resolveProcessedDataDefById(this,"xValue"),c=n.getDomain(this,"xValue","key",i),d=n.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===l?.def.type&&"category"===l?.def.valueType)return c;const u=null!=o&&isFinite(o)?o:0,h=null!==(e=Ne(c))&&void 0!==e?e:[NaN,NaN];return ie(t===P.Y?[h[0]+-u,h[1]]:[h[0],h[1]+u],a)}return this.getValueAxis()instanceof Ri?ie(d,r):ie([d[0]>0?0:d[0],d[1]<0?0:d[1]],r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return R(this,void 0,void 0,function*(){const{dataModel:e}=this,i=this.getCategoryAxis(),n=this.getValueAxis();if(!(e&&i&&n))return[];const o=i.scale,a=n.scale,{groupScale:r,yKey:l="",xKey:c="",fill:d,stroke:u,strokeWidth:h,label:f,processedData:g,ctx:{seriesStateManager:m},smallestDataInterval:y}=this,x=rt.is(o)?o.calcBandwidth(y?.x):o.bandwidth,A=[],{index:S,visibleGroupCount:k}=m.getVisiblePeerGroupIndex(this);for(let L=0;L<k;L++)A.push(String(L));r.domain=A,r.range=[0,x??0],i instanceof gi?r.paddingInner=i.groupPaddingInner:r.padding=i instanceof Xi?.1:0,r.round=0!==r.padding;const E=r.bandwidth>=1?r.bandwidth:r.rawBandwidth,O=e.resolveProcessedDataIndexById(this,"xValue").index,D=e.resolveProcessedDataIndexById(this,"yValue-raw").index,T=e.resolveProcessedDataIndexById(this,"yValue-start").index,w=e.resolveProcessedDataIndexById(this,"yValue-end").index,C=!this.ctx.animationManager.isSkipped(),N={itemId:l,nodeData:[],labelData:[],scales:t.calculateScaling.call(this),visible:this.visible||C};return g?.data.forEach(({keys:L,datum:F,values:V})=>{const Z=L[O],q=o.convert(Z),it=+V[0][w],nt=+V[0][T],tt=V[0][D],dt=q+r.convert(String(S));if(isNaN(it))return;const ht=a.convert(it),wt=a.convert(nt),Jt=this.getBarDirection()===P.X,gt={x:Jt?Math.min(ht,wt):dt,y:Jt?dt:Math.min(ht,wt),width:Jt?Math.abs(wt-ht):E,height:Jt?E:Math.abs(wt-ht)},{fontStyle:Ce,fontWeight:Y,fontSize:mt,fontFamily:At,color:pt,placement:be}=f,Xt=this.getLabelText(this.label,{datum:F[0],value:tt,xKey:c,yKey:l,xName:this.xName,yName:this.yName,legendItemName:this.legendItemName},Hn=>ae(Hn)?Hn.toFixed(2):""),Ut=Xt?Object.assign({text:Xt,fill:pt,fontStyle:Ce,fontWeight:Y,fontSize:mt,fontFamily:At},function Ld({isPositive:s,isVertical:t,placement:e,padding:i=0,rect:n}){let o=n.x+n.width/2,a=n.y+n.height/2,r="center",l="middle";switch(e){case"start":t?(a=s?n.y+n.height+i:n.y-i,l=s?"top":"bottom"):(o=s?n.x-i:n.x+n.width+i,r=s?"start":"end");break;case"outside":case"end":t?(a=s?n.y-i:n.y+n.height+i,l=s?"bottom":"top"):(o=s?n.x+n.width+i:n.x-i,r=s?"start":"end")}return{x:o,y:a,textAlign:r,textBaseline:l}}({isPositive:tt>=0,isVertical:!Jt,placement:be,rect:gt})):void 0,Kt=this.shouldFlipXY()?gt.height:gt.width,Ys={series:this,itemId:l,datum:F[0],cumulativeValue:it,xValue:Z,yValue:tt,yKey:l,xKey:c,capDefaults:{lengthRatioMultiplier:Kt,lengthMax:Kt},x:gt.x,y:gt.y,width:gt.width,height:gt.height,midPoint:{x:gt.x+gt.width/2,y:gt.y+gt.height/2},fill:d,stroke:u,strokeWidth:h,label:Ut};N.nodeData.push(Ys),N.labelData.push(Ys)}),[N]})}nodeFactory(){return new De}updateDatumSelection(t){return R(this,void 0,void 0,function*(){return t.datumSelection.update(t.nodeData,e=>{e.tag=or.Bar},e=>e.xValue)})}updateDatumNodes(t){return R(this,void 0,void 0,function*(){const{datumSelection:e,isHighlight:i}=t,{yKey:n="",fill:o,stroke:a,fillOpacity:r,strokeOpacity:l,lineDash:c,lineDashOffset:d,shadow:u,formatter:h,id:f,highlightStyle:{item:g},ctx:m,stackGroup:y}=this,x=this.axes[P.X],A=function Md(s=[]){const[t,e]=s;return!(0!==t||1!==e)}(x?.visibleRange),S=this.getCategoryDirection()===P.X;e.each((k,E)=>{const O={fill:o,stroke:a,fillOpacity:r,strokeOpacity:l,lineDash:c,lineDashOffset:d,fillShadow:u,strokeWidth:this.getStrokeWidth(this.strokeWidth)},D=S?E.width>0:E.height>0,T=function wd(s){var t,e,i,n,o,{datum:a,isHighlighted:r,style:l,highlightStyle:c,formatter:d,seriesId:u,ctx:{callbackCache:h}}=s,f=pe(s,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:g,fillOpacity:m,stroke:y,strokeWidth:x}=oe(r&&c,l),{strokeOpacity:A,fillShadow:S,lineDash:k,lineDashOffset:E}=l;let O;return d&&(O=h.call(d,Object.assign({datum:a.datum,xKey:a.xKey,fill:g,stroke:y,strokeWidth:x,highlighted:r,seriesId:u},f))),{fill:null!==(t=O?.fill)&&void 0!==t?t:g,stroke:null!==(e=O?.stroke)&&void 0!==e?e:y,strokeWidth:null!==(i=O?.strokeWidth)&&void 0!==i?i:x,fillOpacity:null!==(n=O?.fillOpacity)&&void 0!==n?n:m,strokeOpacity:null!==(o=O?.strokeOpacity)&&void 0!==o?o:A,lineDash:k,lineDashOffset:E,fillShadow:S}}({datum:E,isHighlighted:i,style:O,highlightStyle:g,formatter:h,seriesId:f,stackGroup:y,ctx:m,yKey:n});T.crisp=A,T.visible=D,function Nd({rect:s,config:t}){const{crisp:e=!0,fill:i,stroke:n,strokeWidth:o,fillOpacity:a,strokeOpacity:r,lineDash:l,lineDashOffset:c,fillShadow:d,visible:u=!0}=t;s.crisp=e,s.fill=i,s.stroke=n,s.strokeWidth=o,s.fillOpacity=a,s.strokeOpacity=r,s.lineDash=l,s.lineDashOffset=c,s.fillShadow=d,s.visible=u}({rect:k,config:T})})})}updateLabelSelection(t){return R(this,void 0,void 0,function*(){return t.labelSelection.update(this.label.enabled?t.labelData:[],i=>{i.tag=or.Label,i.pointerEvents=te.None})})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){t.labelSelection.each((e,i)=>{!function Rd(s,t,e){if(t.enabled&&e){const{x:i,y:n,text:o,textAlign:a,textBaseline:r}=e,{color:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h}=t;s.setProperties({visible:!0,x:i,y:n,text:o,fill:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h,textAlign:a,textBaseline:r})}else s.visible=!1}(e,this.label,i.label)})})}getTooltipHtml(t){var e;const{xKey:i,yKey:n,processedData:o,ctx:{callbackCache:a}}=this,r=this.getCategoryAxis(),l=this.getValueAxis(),{xValue:c,yValue:d,datum:u}=t;if(!(o&&i&&n&&r&&l))return"";const{xName:h,yName:f,fill:g,stroke:m,tooltip:y,formatter:x,id:A,stackGroup:S}=this,k=this.getStrokeWidth(this.strokeWidth),E=r.formatDatum(c),O=l.formatDatum(d),D=xt(f),T=xt(E+": "+O);let w;x&&(w=a.call(x,{datum:u,fill:g,stroke:m,strokeWidth:k,highlighted:!1,xKey:i,yKey:n,seriesId:A,stackGroup:S}));const C=null!==(e=w?.fill)&&void 0!==e?e:g;return y.toTooltipHtml({title:D,content:T,backgroundColor:C},Object.assign({datum:u,xKey:i,xName:h,yKey:n,yName:f,color:C,title:D,seriesId:A,stackGroup:S},this.getModuleTooltipParams(u)))}getLegendData(t){var e;const{id:i,data:n,xKey:o,yKey:a,yName:r,legendItemName:l,fill:c,stroke:d,strokeWidth:u,fillOpacity:h,strokeOpacity:f,visible:g,showInLegend:m}=this;return"category"===t&&m&&n?.length&&o&&a?[{legendType:"category",id:i,itemId:a,seriesId:i,enabled:g,label:{text:null!==(e=l??r)&&void 0!==e?e:a},marker:{fill:c,stroke:d,fillOpacity:h,strokeOpacity:f,strokeWidth:u},legendItemName:l}]:[]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e,annotationSelections:i}){const n=Ls(Rs("vertical"===this.direction,this.axes));Ct(this.id,"nodes",this.ctx.animationManager,t,n),Dt(this,"labels",this.ctx.animationManager,e),Dt(this,"annotations",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var e,i;const{datumSelections:n,labelSelections:o,annotationSelections:a}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,l=Ls(Rs("vertical"===this.direction,this.axes));Ct(this.id,"nodes",this.ctx.animationManager,n,l,(c,d)=>String(d.xValue),r),Dt(this,"labels",this.ctx.animationManager,o),Dt(this,"annotations",this.ctx.animationManager,a)}isLabelEnabled(){return this.label.enabled}}Ht.className="BarSeries",Ht.type="bar",v([_(Ot),b("design:type",String)],Ht.prototype,"fill",void 0),v([_(Ot),b("design:type",String)],Ht.prototype,"stroke",void 0),v([_(I(0,1)),b("design:type",Object)],Ht.prototype,"fillOpacity",void 0),v([_(I(0,1)),b("design:type",Object)],Ht.prototype,"strokeOpacity",void 0),v([_(ki),b("design:type",Array)],Ht.prototype,"lineDash",void 0),v([_(I(0)),b("design:type",Number)],Ht.prototype,"lineDashOffset",void 0),v([_(ti),b("design:type",Function)],Ht.prototype,"formatter",void 0),v([_(j),b("design:type",String)],Ht.prototype,"xKey",void 0),v([_(j),b("design:type",String)],Ht.prototype,"xName",void 0),v([_(j),b("design:type",String)],Ht.prototype,"yKey",void 0),v([_(j),b("design:type",String)],Ht.prototype,"yName",void 0),v([_(j),b("design:type",String)],Ht.prototype,"stackGroup",void 0),v([_(J()),b("design:type",Number)],Ht.prototype,"normalizedTo",void 0),v([_(I(0)),b("design:type",Number)],Ht.prototype,"strokeWidth",void 0);const $g={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:Ht,stackable:!0,groupable:!0,seriesDefaults:{axes:[{type:Ue_NUMBER,position:Ye_LEFT},{type:Ue_CATEGORY,position:Ye_BOTTOM}]},swapDefaultAxesCondition:s=>"horizontal"===s?.direction,themeTemplate:{__extends__:xi,fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:wn,fontSize:12,fontFamily:Ft,color:Ln,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:Pn,xOffset:3,yOffset:3,blur:5}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:.3}}},paletteFactory:za};class Zg extends Ga{constructor(t,e,i,n){super(t,e,i,n),this.sizeKey=n.sizeKey}}class ar extends ce{constructor(){super(...arguments),this.maxSize=30,this.domain=void 0}}v([_(I(0)),B({redraw:M.MAJOR}),b("design:type",Object)],ar.prototype,"maxSize",void 0),v([_(Zs),B({redraw:M.MAJOR}),b("design:type",Array)],ar.prototype,"domain",void 0);class qt extends bi{constructor(t){super({moduleCtx:t,pickModes:[St.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,St.NEAREST_NODE,St.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Di,marker:Ts}}),this.NodeClickEvent=Zg,this.sizeScale=new Wi,this.marker=new ar,this.label=new zt,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new Os,this.tooltip=new ke}processData(t){var e,i;return R(this,void 0,void 0,function*(){const{xKey:n,yKey:o,sizeKey:a,labelKey:r,colorScale:l,colorDomain:c,colorRange:d,colorKey:u,marker:h,data:f}=this;if(null==n||null==o||null==a||null==f)return;const{isContinuousX:g,isContinuousY:m}=this.isContinuous(),{dataModel:y,processedData:x}=yield this.requestDataModel(t,f,{props:[re(this,n,g,{id:"xKey-raw"}),re(this,o,m,{id:"yKey-raw"}),...r?[re(this,r,!1,{id:"labelKey-raw"})]:[],_t(this,n,g,{id:"xValue"}),_t(this,o,m,{id:"yValue"}),_t(this,a,!0,{id:"sizeValue"}),...u?[_t(this,u,!0,{id:"colorValue"})]:[],...r?[_t(this,r,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),A=y.resolveProcessedDataIndexById(this,"sizeValue").index,S=null!==(e=x.domain.values[A])&&void 0!==e?e:[];if(this.sizeScale.domain=h.domain?h.domain:S,u){const k=y.resolveProcessedDataIndexById(this,"colorValue").index;l.domain=null!==(i=c??x.domain.values[k])&&void 0!==i?i:[],l.range=d,l.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===P.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n),a=e.getDomain(this,n,"value",i);if("value"===o?.def.type&&"category"===o?.def.valueType)return a;const r=this.axes[t];return ie(Ne(a),r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n,o;return R(this,void 0,void 0,function*(){const{visible:a,axes:r,yKey:l="",xKey:c="",label:d,labelKey:u,dataModel:h,processedData:f,colorScale:g,sizeKey:m="",colorKey:y}=this,x=r[P.X],A=r[P.Y];if(!(h&&f&&a&&x&&A))return[];const S=h.resolveProcessedDataIndexById(this,"xValue").index,k=h.resolveProcessedDataIndexById(this,"yValue").index,E=m?h.resolveProcessedDataIndexById(this,"sizeValue").index:-1,O=y?h.resolveProcessedDataIndexById(this,"colorValue").index:-1,D=u?h.resolveProcessedDataIndexById(this,"labelValue").index:-1,T=x.scale,w=A.scale,C=(null!==(e=T.bandwidth)&&void 0!==e?e:0)/2,N=(null!==(i=w.bandwidth)&&void 0!==i?i:0)/2,{sizeScale:L,marker:F}=this,V=[];L.range=[F.size,F.maxSize];const Z=d.getFont();for(const{values:q,datum:it}of null!==(n=f.data)&&void 0!==n?n:[]){const nt=q[S],tt=q[k],dt=T.convert(nt)+C,ht=w.convert(tt)+N,wt=this.getLabelText(d,{value:u?q[D]:tt,datum:it,xKey:c,yKey:l,sizeKey:m,labelKey:u,xName:this.xName,yName:this.yName,sizeName:this.sizeName,labelName:this.labelName}),Jt=ut.getTextSize(String(wt),Z),gt=m?L.convert(q[E]):F.size,Ce=y?g.convert(q[O]):void 0;V.push({series:this,itemId:l,yKey:l,xKey:c,datum:it,xValue:nt,yValue:tt,sizeValue:q[E],point:{x:dt,y:ht,size:gt},midPoint:{x:dt,y:ht},fill:Ce,label:Object.assign({text:wt},Jt)})}return[{itemId:null!==(o=this.yKey)&&void 0!==o?o:this.id,nodeData:V,labelData:V,scales:t.calculateScaling.call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((e,i)=>e.concat(i.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(wi(t))}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){const{nodeData:e,markerSelection:i}=t;return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.marker.enabled?e:[],void 0,o=>this.getDatumId(o))})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",sizeKey:a="",labelKey:r,marker:l}=this,c=oe(i&&this.highlightStyle.item,l.getStyle());this.sizeScale.range=[l.size,l.maxSize],e.each((d,u)=>{this.updateMarkerStyle(d,l,{datum:u,highlighted:i,xKey:n,yKey:o,sizeKey:a,labelKey:r},c)}),i||this.marker.markClean()})}updateLabelSelection(t){var e,i;return R(this,void 0,void 0,function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,r=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(l=>Object.assign(Object.assign({},l.datum),{point:{x:l.x,y:l.y,size:l.datum.point.size}}));return n.update(r)})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,{label:i}=this;e.each((n,o)=>{var a,r,l,c;n.text=o.label.text,n.fill=i.color,n.x=null!==(r=null===(a=o.point)||void 0===a?void 0:a.x)&&void 0!==r?r:0,n.y=null!==(c=null===(l=o.point)||void 0===l?void 0:l.y)&&void 0!==c?c:0,n.fontStyle=i.fontStyle,n.fontWeight=i.fontWeight,n.fontSize=i.fontSize,n.fontFamily=i.fontFamily,n.textAlign="left",n.textBaseline="top"})})}getTooltipHtml(t){var e;const{xKey:i,yKey:n,sizeKey:o,axes:a}=this,r=a[P.X],l=a[P.Y];if(!(i&&n&&r&&l&&o))return"";const{marker:c,tooltip:d,xName:u,yName:h,sizeName:f,labelKey:g,labelName:m,id:y}=this,x=oe({fill:t.fill,strokeWidth:this.getStrokeWidth(c.strokeWidth)},c.getStyle()),{fill:A="gray"}=this.getMarkerStyle(c,{datum:t,highlighted:!1,xKey:i,yKey:n,sizeKey:o,labelKey:g},x),S=null!==(e=this.title)&&void 0!==e?e:h,{datum:k,xValue:E,yValue:O,sizeValue:D,label:{text:T}}=t,w=xt(r.formatDatum(E)),C=xt(l.formatDatum(O));let N=`<b>${xt(u??i)}</b>: ${w}<br><b>${xt(h??n)}</b>: ${C}`;return o&&(N+=`<br><b>${xt(f??o)}</b>: ${xt(String(D))}`),g&&(N=`<b>${xt(m??g)}</b>: ${xt(T)}<br>`+N),d.toTooltipHtml({title:S,content:N,backgroundColor:A},{datum:k,xKey:i,xName:u,yKey:n,yName:h,sizeKey:o,sizeName:f,labelKey:g,labelName:m,title:S,color:A,seriesId:y})}getLegendData(){var t;const{id:e,data:i,xKey:n,yKey:o,sizeKey:a,yName:r,title:l,visible:c,marker:d}=this,{shape:u,fill:h,stroke:f,fillOpacity:g,strokeOpacity:m,strokeWidth:y}=d;return i?.length&&n&&o&&a?[{legendType:"category",id:e,itemId:o,seriesId:e,enabled:c,label:{text:null!==(t=l??r)&&void 0!==t?t:o},marker:{shape:u,fill:h??"rgba(0, 0, 0, 0)",stroke:f??"rgba(0, 0, 0, 0)",fillOpacity:g??1,strokeOpacity:m??1,strokeWidth:y??0}}]:[]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){Ka(this,this.ctx.animationManager,t),Dt(this,"labels",this.ctx.animationManager,e)}getDatumId(t){return xn([`${t.xValue}`,`${t.yValue}`,t.label.text])}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new W}}qt.className="BubbleSeries",qt.type="bubble",v([_(j),b("design:type",String)],qt.prototype,"title",void 0),v([_(j),b("design:type",String)],qt.prototype,"labelKey",void 0),v([_(j),b("design:type",String)],qt.prototype,"xName",void 0),v([_(j),b("design:type",String)],qt.prototype,"yName",void 0),v([_(j),b("design:type",String)],qt.prototype,"sizeName",void 0),v([_(j),b("design:type",String)],qt.prototype,"labelName",void 0),v([_(j),b("design:type",String)],qt.prototype,"xKey",void 0),v([_(j),b("design:type",String)],qt.prototype,"yKey",void 0),v([_(j),b("design:type",String)],qt.prototype,"sizeKey",void 0),v([_(j),b("design:type",String)],qt.prototype,"colorKey",void 0),v([_(j),b("design:type",String)],qt.prototype,"colorName",void 0),v([_(Zs),b("design:type",Array)],qt.prototype,"colorDomain",void 0),v([_(fn),b("design:type",Array)],qt.prototype,"colorRange",void 0);const qg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:qt,seriesDefaults:{axes:[{type:Ue_NUMBER,position:Ye_BOTTOM},{type:Ue_NUMBER,position:Ye_LEFT}]},themeTemplate:{__extends__:xi,tooltip:{position:{type:"node"}},marker:{__extends__:Rn,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ft,color:Vt}},paletteFactory:Es},Jg=["count","sum","mean"],Qg=U(s=>Jg.includes(s),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var rr=function(s){return s[s.Bin=0]="Bin",s[s.Label=1]="Label",s}(rr||{});class Yt extends bi{constructor(t){super({moduleCtx:t,pickModes:[St.EXACT_SHAPE_MATCH],datumSelectionGarbageCollection:!1,animationResetFns:{datum:sr,label:Di}}),this.label=new zt,this.tooltip=new ke,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.aggregation="sum",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[]}deriveBins(t){if(void 0===this.binCount){const e=no(t[0],t[1],10),i=yn(t[0],t[1],10),n=e[0];return[[n-i,n],...e.map(a=>[a,a+i])]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),n=t[1],o=e||1,{start:a,binSize:r}=this.calculateNiceStart(i,n,o);return this.getBins(a,n,r,o)}getBins(t,e,i,n){const o=[];for(let a=0;a<n;a++){const r=Math.round(10*(t+a*i))/10;let l=Math.round(10*(t+(a+1)*i))/10;a===n-1&&(l=Math.max(l,e)),o[a]=[r,l]}return o}calculateNiceStart(t,e,i){const n=Math.abs(e-t)/i,o=Math.floor(Math.log10(n)),a=Math.pow(10,o);return{start:Math.floor(t/a)*a,binSize:n}}processData(t){return R(this,void 0,void 0,function*(){const{xKey:e,yKey:i,data:n,areaPlot:o,aggregation:a}=this,r=[re(this,e,!0),Il];if(i){let c=va(this,"groupCount");"count"===a||("sum"===a?c=function Gl(s,t,e){return{id:t,scopes:[s.id],type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:i=>co(i),groupAggregateFunction:(i,n=[0,0])=>{var o,a;return n[0]+=null!==(o=i?.[0])&&void 0!==o?o:0,n[1]+=null!==(a=i?.[1])&&void 0!==a?a:0,n}}}(this,"groupAgg"):"mean"===a&&(c=function Yl(s,t,e){return{id:t,scopes:[s.id],matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:n=>co(n),groupAggregateFunction:(n,o=[0,0,-1])=>{var a,r;return o[0]+=null!==(a=n?.[0])&&void 0!==a?a:0,o[1]+=null!==(r=n?.[1])&&void 0!==r?r:0,o[2]++,o},finalFunction:(n=[0,0,0])=>{const o=n[0]+n[1];return o>=0?[0,o/n[2]]:[o/n[2],0]}}}(this,"groupAgg"))),o&&(c=ba(this,"groupAgg",c)),r.push(_t(this,i,!0,{invalidValue:void 0}),c)}else{let c=va(this,"groupAgg");o&&(c=ba(this,"groupAgg",c)),r.push(c)}!this.ctx.animationManager.isSkipped()&&this.processedData&&r.push(bn(this.processedData,!1)),yield this.requestDataModel(t,n??[],{props:r,dataVisible:this.visible,groupByFn:c=>{var d;const u=ie(c.domain.keys[0]);if(0===u.length)return c.domain.groups=[],()=>[];const h=null!==(d=this.bins)&&void 0!==d?d:this.deriveBins(u),f=h.length;return this.calculatedBins=[...h],g=>{const m=g.keys[0];for(let y=0;y<f;y++){const x=h[y];if(m>=x[0]&&m<x[1]||y===f-1&&m<=x[1])return x}return[]}}}),this.animationState.transition("updateData")})}getSeriesDomain(t){var e,i,n,o;const{processedData:a,dataModel:r}=this;if(!a||!r||!this.calculatedBins.length)return[];const l=r.getDomain(this,"groupAgg","aggregate",a),c=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],d=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(o=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==o?o:0)-1][1];return ie(t===P.X?[c,d]:l)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return R(this,void 0,void 0,function*(){const{axes:i,processedData:n,ctx:{callbackCache:o}}=this,a=i[P.X],r=i[P.Y];if(!(this.visible&&a&&r&&n&&"grouped"===n.type))return[];const{scale:l}=a,{scale:c}=r,{fill:d,stroke:u,strokeWidth:h,id:f,yKey:g="",xKey:m=""}=this,y=[],{label:{formatter:x=(D=>String(D.value)),fontStyle:A,fontWeight:S,fontSize:k,fontFamily:E,color:O}}=this;return n.data.forEach(D=>{var T;const{aggValues:[[w,C]]=[[0,0]],datum:N,datum:{length:L},keys:F,keys:[V,Z]}=D,q=l.convert(V),it=l.convert(Z),nt=w+C,tt=c.convert(0),dt=c.convert(nt),ht=it-q,wt=Math.abs(dt-tt),Jt=0!==nt?{text:null!==(T=o.call(x,{value:nt,datum:N,seriesId:f,xKey:m,yKey:g,xName:this.xName,yName:this.yName}))&&void 0!==T?T:String(nt),fontStyle:A,fontWeight:S,fontSize:k,fontFamily:E,fill:O,x:q+ht/2,y:dt+wt/2}:void 0;y.push({series:this,datum:N,aggregatedValue:nt,frequency:L,domain:F,yKey:g,xKey:m,x:q,y:dt,xValue:q,yValue:dt,width:ht,height:wt,midPoint:{x:q+ht/2,y:dt+wt/2},fill:d,stroke:u,strokeWidth:h,label:Jt})}),[{itemId:null!==(e=this.yKey)&&void 0!==e?e:this.id,nodeData:y,labelData:y,scales:t.calculateScaling.call(this),animationValid:!0,visible:this.visible}]})}nodeFactory(){return new De}updateDatumSelection(t){return R(this,void 0,void 0,function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,n=>{n.tag=rr.Bin,n.crisp=!0},n=>n.domain.join("_"))})}updateDatumNodes(t){return R(this,void 0,void 0,function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:n,strokeOpacity:o,shadow:a,highlightStyle:{item:{fill:r,fillOpacity:l=n,stroke:c,strokeWidth:d}}}=this;e.each((u,h,f)=>{var g,m;const y=i&&void 0!==d?d:h.strokeWidth,x=i?l:n;u.fill=null!==(g=i?r:void 0)&&void 0!==g?g:h.fill,u.stroke=null!==(m=i?c:void 0)&&void 0!==m?m:h.stroke,u.fillOpacity=x,u.strokeOpacity=o,u.strokeWidth=y,u.lineDash=this.lineDash,u.lineDashOffset=this.lineDashOffset,u.fillShadow=a,u.zIndex=i?Ie.highlightedZIndex:f,u.visible=h.height>0})})}updateLabelSelection(t){return R(this,void 0,void 0,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,n=>{n.tag=rr.Label,n.pointerEvents=te.None,n.textAlign="center",n.textBaseline="middle"})})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each((n,o)=>{const a=o.label;a&&i?(n.text=a.text,n.x=a.x,n.y=a.y,n.fontStyle=a.fontStyle,n.fontWeight=a.fontWeight,n.fontSize=a.fontSize,n.fontFamily=a.fontFamily,n.fill=a.fill,n.visible=!0):n.visible=!1})})}getTooltipHtml(t){const{xKey:e,yKey:i="",axes:n}=this,o=n[P.X],a=n[P.Y];if(!e||!o||!a)return"";const{xName:r,yName:l,fill:c,tooltip:d,aggregation:u,id:h}=this,{aggregatedValue:f,frequency:g,domain:[m,y]}=t,x=`${xt(r??e)}: ${o.formatDatum(m)} - ${o.formatDatum(y)}`;let A=i?`<b>${xt(l??i)} (${u})</b>: ${a.formatDatum(f)}<br>`:"";return A+=`<b>Frequency</b>: ${g}`,d.toTooltipHtml({title:x,backgroundColor:c,content:A},{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xName:r,yKey:i,yName:l,color:c,title:x,seriesId:h})}getLegendData(t){var e;const{id:i,data:n,xKey:o,yName:a,visible:r,fill:l,stroke:c,fillOpacity:d,strokeOpacity:u,strokeWidth:h}=this;return n&&0!==n.length&&"category"===t?[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:r,label:{text:null!==(e=a??o)&&void 0!==e?e:"Frequency"},marker:{fill:l??"rgba(0, 0, 0, 0)",stroke:c??"rgba(0, 0, 0, 0)",fillOpacity:d,strokeOpacity:u,strokeWidth:h}}]:[]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){const i=Ls(Rs(!0,this.axes));Ct(this.id,"datums",this.ctx.animationManager,t,i),Dt(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e,i;const n=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,o=Ls(Rs(!0,this.axes));Ct(this.id,"datums",this.ctx.animationManager,t.datumSelections,o,(a,r)=>this.getDatumId(r),n),Dt(this,"labels",this.ctx.animationManager,t.labelSelections)}getDatumId(t){return xn(t.domain.map(e=>`${e}`))}isLabelEnabled(){return this.label.enabled}}Yt.className="HistogramSeries",Yt.type="histogram",v([_(Ot),b("design:type",String)],Yt.prototype,"fill",void 0),v([_(Ot),b("design:type",String)],Yt.prototype,"stroke",void 0),v([_(I(0,1)),b("design:type",Object)],Yt.prototype,"fillOpacity",void 0),v([_(I(0,1)),b("design:type",Object)],Yt.prototype,"strokeOpacity",void 0),v([_(ki),b("design:type",Array)],Yt.prototype,"lineDash",void 0),v([_(I(0)),b("design:type",Number)],Yt.prototype,"lineDashOffset",void 0),v([_(j),b("design:type",String)],Yt.prototype,"xKey",void 0),v([_(ot),b("design:type",Boolean)],Yt.prototype,"areaPlot",void 0),v([_(Xs()),b("design:type",Array)],Yt.prototype,"bins",void 0),v([_(Qg),b("design:type",String)],Yt.prototype,"aggregation",void 0),v([_(J(0)),b("design:type",Number)],Yt.prototype,"binCount",void 0),v([_(j),b("design:type",String)],Yt.prototype,"xName",void 0),v([_(j),b("design:type",String)],Yt.prototype,"yKey",void 0),v([_(j),b("design:type",String)],Yt.prototype,"yName",void 0),v([_(I(0)),b("design:type",Number)],Yt.prototype,"strokeWidth",void 0);const tm={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:Yt,seriesDefaults:{axes:[{type:Ue_NUMBER,position:Ye_BOTTOM},{type:Ue_NUMBER,position:Ye_LEFT}]},themeTemplate:{__extends__:xi,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ft,color:Ln,formatter:void 0},shadow:{enabled:!1,color:Pn,xOffset:3,yOffset:3,blur:5}},paletteFactory:({takeColors:s})=>{const{fills:[t],strokes:[e]}=s(1);return{fill:t,stroke:e}}};class ve extends bi{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[St.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,St.NEAREST_NODE,St.EXACT_SHAPE_MATCH],markerSelectionGarbageCollection:!1,animationResetFns:{path:er({getOpacity:()=>this.getOpacity()}),label:Di,marker:(e,i)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),Cs(0,i))}}),this.label=new zt,this.marker=new ce,this.tooltip=new ke,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0}processData(t){return R(this,void 0,void 0,function*(){const{xKey:e,yKey:i,data:n}=this;if(null==e||null==i||null==n)return;const o=!this.ctx.animationManager.isSkipped(),{isContinuousX:a,isContinuousY:r}=this.isContinuous(),l=[];a||(l.push(re(this,e,a,{id:"xKey"})),o&&this.processedData&&l.push(bn(this.processedData))),o&&l.push(hs(this,a?["xValue"]:[])),l.push(_t(this,e,a,{id:"xValue"}),_t(this,i,r,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,n,{props:l}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:n}=this;if(!n||!i)return[];const o=e[P.X],a=e[P.Y],r=i.resolveProcessedDataDefById(this,"xValue");if(t===P.X){const l=i.getDomain(this,"xValue","value",n);return"value"===r?.def.type&&"category"===r.def.valueType?l:ie(Ne(l),o)}return ie(i.getDomain(this,"yValue","value",n),a)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n;return R(this,void 0,void 0,function*(){const{processedData:o,dataModel:a,axes:r}=this,l=r[P.X],c=r[P.Y];if(!(o&&a&&l&&c))return[];const{label:d,yKey:u="",xKey:h=""}=this,f=l.scale,g=c.scale,m=(null!==(e=f.bandwidth)&&void 0!==e?e:0)/2,y=(null!==(i=g.bandwidth)&&void 0!==i?i:0)/2,x=[],A=this.marker.enabled?this.marker.size:0,S=a.resolveProcessedDataIndexById(this,"xValue").index,k=a.resolveProcessedDataIndexById(this,"yValue").index;let O,E=!0;for(let D=0;D<o.data.length;D++){const{datum:T,values:w}=O??o.data[D],C=w[S],N=w[k];if(void 0===N)E=!0;else{const L=f.convert(C)+m;if(isNaN(L)){E=!0,O=void 0;continue}O=void 0===(null===(n=o.data[D+1])||void 0===n?void 0:n.values[k])?void 0:o.data[D+1];const F=g.convert(N)+y,V=this.getLabelText(d,{value:N,datum:T,xKey:h,yKey:u,xName:this.xName,yName:this.yName},Z=>ae(Z)?Z.toFixed(2):String(Z));x.push({series:this,datum:T,yKey:u,xKey:h,point:{x:L,y:F,moveTo:E,size:A},midPoint:{x:L,y:F},yValue:N,xValue:C,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},label:V?{text:V,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:void 0}),E=!1}}return[{itemId:u,nodeData:x,labelData:x,scales:t.calculateScaling.call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(wi(t))}updatePathNodes(t){var e,i;return R(this,void 0,void 0,function*(){const{paths:[n],opacity:o,visible:a,animationEnabled:r}=t,{seriesRectHeight:l,seriesRectWidth:c}=this.nodeDataDependencies;n.setProperties({fill:void 0,lineJoin:"round",pointerEvents:te.None,opacity:o,stroke:this.stroke,strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset}),r||(n.visible=a),null==n.clipPath&&(n.clipPath=new Vi,n.clipScalingX=1,n.clipScalingY=1),null===(e=n.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=n.clipPath)||void 0===i||i.rect(-25,-25,(c??0)+50,(l??0)+50)})}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,a=>this.getDatumId(a))})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",marker:a,stroke:r,strokeWidth:l,strokeOpacity:c}=this,d=oe(i&&this.highlightStyle.item,a.getStyle(),{stroke:r,strokeWidth:l,strokeOpacity:c}),u=this.ctx.animationManager.isSkipped();e.each((h,f)=>{this.updateMarkerStyle(h,a,{datum:f,highlighted:i,xKey:n,yKey:o},d,{applyTranslation:u})}),i||this.marker.markClean()})}updateLabelSelection(t){return R(this,void 0,void 0,function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],i.update(e)})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:a,fontFamily:r,color:l}=this.label;e.each((c,d)=>{const{point:u,label:h}=d;d&&h&&i?(c.fontStyle=n,c.fontWeight=o,c.fontSize=a,c.fontFamily=r,c.textAlign=h.textAlign,c.textBaseline=h.textBaseline,c.text=h.text,c.x=u.x,c.y=u.y-10,c.fill=l,c.visible=!0):c.visible=!1})})}getTooltipHtml(t){var e;const{xKey:i,yKey:n,axes:o}=this,a=o[P.X],r=o[P.Y];if(!(i&&n&&a&&r))return"";const{xName:l,yName:c,tooltip:d,marker:u,id:h}=this,{datum:f,xValue:g,yValue:m}=t,y=a.formatDatum(g),x=r.formatDatum(m),A=xt(null!==(e=this.title)&&void 0!==e?e:c),S=xt(y+": "+x),k=oe({fill:u.stroke},u.getStyle(),{strokeWidth:this.strokeWidth}),{fill:E}=this.getMarkerStyle(u,{datum:t,xKey:i,yKey:n,highlighted:!1},k);return d.toTooltipHtml({title:A,content:S,backgroundColor:E},Object.assign({datum:f,xKey:i,xName:l,yKey:n,yName:c,title:A,color:E,seriesId:h},this.getModuleTooltipParams(f)))}getLegendData(t){var e,i,n,o,a,r,l,c;const{id:d,data:u,xKey:h,yKey:f,yName:g,visible:m,title:y,marker:x,stroke:A,strokeOpacity:S}=this;return u?.length&&h&&f&&"category"===t?[{legendType:"category",id:d,itemId:f,seriesId:d,enabled:m,label:{text:null!==(e=y??g)&&void 0!==e?e:f},marker:{shape:x.shape,fill:null!==(i=x.fill)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(o=null!==(n=x.stroke)&&void 0!==n?n:A)&&void 0!==o?o:"rgba(0, 0, 0, 0)",fillOpacity:null!==(a=x.fillOpacity)&&void 0!==a?a:1,strokeOpacity:null!==(l=null!==(r=x.strokeOpacity)&&void 0!==r?r:S)&&void 0!==l?l:1,strokeWidth:null!==(c=x.strokeWidth)&&void 0!==c?c:0}}]:[]}updatePaths(t){return R(this,void 0,void 0,function*(){this.updateLinePaths([t.paths],[t.contextData])})}updateLinePaths(t,e){e.forEach(({nodeData:i},n)=>{const[o]=t[n],{path:a}=o;a.clear({trackChanges:!0});for(const r of i)r.point.moveTo?a.moveTo(r.point.x,r.point.y):a.lineTo(r.point.x,r.point.y);o.checkPathDirty()})}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:n,contextData:o,paths:a}=t,{animationManager:r}=this.ctx,{seriesRectWidth:l=0}=this.nodeDataDependencies;this.updateLinePaths(a,o),tr(this,r,a.flat()),It(e,Cs),$a(this,r,e,l),Dt(this,"labels",r,i),Dt(this,"annotations",r,n)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelections:o,labelSelections:a,annotationSelections:r,contextData:l,paths:c,previousContextData:d}=t;if(super.resetAllAnimation(t),0===l.length||!d||0===d.length)return n.skipCurrentBatch(),void this.updateLinePaths(c,l);const[u]=c,[h]=l,[f]=d,g=function Td(s,t,e){var i;const n="category"===(null===(i=s.scales.x)||void 0===i?void 0:i.type),{result:o,resultMap:a}=n&&e?ws(s,t,e):Ns(s,t);let r="updated";if(t.visible&&!s.visible?r="removed":!t.visible&&s.visible&&(r="added"),void 0===o||void 0===a)return;const l=ir(s,t,o,"fade",Qa),c=Za(a,r);return Object.assign(Object.assign({},l),{marker:c})}(h,f,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===g)return n.skipCurrentBatch(),void this.updateLinePaths(c,l);Ct(this.id,"marker",n,o,g.marker),Ct(this.id,"path_properties",n,u,g.pathProperties),Sd(this.id,"path_update",n,u,g.path),Dt(this,"labels",n,a),Dt(this,"annotations",n,r)}getDatumId(t){return xn([`${t.xValue}`])}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new W}}ve.className="LineSeries",ve.type="line",v([_(j),b("design:type",String)],ve.prototype,"title",void 0),v([_(Ot),b("design:type",String)],ve.prototype,"stroke",void 0),v([_(ki),b("design:type",Array)],ve.prototype,"lineDash",void 0),v([_(I(0)),b("design:type",Number)],ve.prototype,"lineDashOffset",void 0),v([_(I(0)),b("design:type",Number)],ve.prototype,"strokeWidth",void 0),v([_(I(0,1)),b("design:type",Number)],ve.prototype,"strokeOpacity",void 0),v([_(j),b("design:type",String)],ve.prototype,"xKey",void 0),v([_(j),b("design:type",String)],ve.prototype,"xName",void 0),v([_(j),b("design:type",String)],ve.prototype,"yKey",void 0),v([_(j),b("design:type",String)],ve.prototype,"yName",void 0);const em={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:ve,seriesDefaults:cd,themeTemplate:{__extends__:xi,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:Rn,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ft,color:Vt,formatter:void 0}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:s=>{const{marker:t}=Es(s);return{stroke:t.fill,marker:t}}};class de extends bi{constructor(t){super({moduleCtx:t,pickModes:[St.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,St.NEAREST_NODE,St.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Ts,label:Di}}),this.marker=new ce,this.label=new zt,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new Os,this.tooltip=new ke}processData(t){var e;return R(this,void 0,void 0,function*(){const{xKey:i,yKey:n,labelKey:o,data:a}=this;if(null==i||null==n||null==a)return;const{isContinuousX:r,isContinuousY:l}=this.isContinuous(),{colorScale:c,colorDomain:d,colorRange:u,colorKey:h}=this,{dataModel:f,processedData:g}=yield this.requestDataModel(t,a,{props:[re(this,i,r,{id:"xKey-raw"}),re(this,n,l,{id:"yKey-raw"}),...o?[re(this,o,!1,{id:"labelKey-raw"})]:[],_t(this,i,r,{id:"xValue"}),_t(this,n,l,{id:"yValue"}),...h?[_t(this,h,!0,{id:"colorValue"})]:[],...o?[_t(this,o,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(h){const m=f.resolveProcessedDataIndexById(this,"colorValue").index;c.domain=null!==(e=d??g.domain.values[m])&&void 0!==e?e:[],c.range=u,c.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===P.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n),a=e.getDomain(this,n,"value",i);if("value"===o?.def.type&&"category"===o?.def.valueType)return a;const r=this.axes[t];return ie(Ne(a),r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n,o;return R(this,void 0,void 0,function*(){const{visible:a,axes:r,yKey:l="",xKey:c="",label:d,labelKey:u,dataModel:h,processedData:f}=this,g=r[P.X],m=r[P.Y];if(!(h&&f&&a&&g&&m))return[];const y=h.resolveProcessedDataIndexById(this,"xValue").index,x=h.resolveProcessedDataIndexById(this,"yValue").index,A=this.colorKey?h.resolveProcessedDataIndexById(this,"colorValue").index:-1,S=this.labelKey?h.resolveProcessedDataIndexById(this,"labelValue").index:-1,{colorScale:k,colorKey:E}=this,O=g.scale,D=m.scale,T=(null!==(e=O.bandwidth)&&void 0!==e?e:0)/2,w=(null!==(i=D.bandwidth)&&void 0!==i?i:0)/2,{marker:C}=this,N=[],L=d.getFont();for(const{values:F,datum:V}of null!==(n=f.data)&&void 0!==n?n:[]){const Z=F[y],q=F[x],it=O.convert(Z)+T,nt=D.convert(q)+w,tt=this.getLabelText(this.label,{value:u?F[S]:q,datum:V,xKey:c,yKey:l,labelKey:u,xName:this.xName,yName:this.yName,labelName:this.labelName}),dt=ut.getTextSize(tt,L),ht=E?k.convert(F[A]):void 0;N.push({series:this,itemId:l,yKey:l,xKey:c,datum:V,xValue:Z,yValue:q,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},point:{x:it,y:nt,size:C.size},midPoint:{x:it,y:nt},fill:ht,label:Object.assign({text:tt},dt)})}return[{itemId:null!==(o=this.yKey)&&void 0!==o?o:this.id,nodeData:N,labelData:N,scales:t.calculateScaling.call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((e,i)=>e.concat(i.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(wi(t))}updateMarkerSelection(t){return R(this,void 0,void 0,function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this;return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(n?e:[])})}updateMarkerNodes(t){return R(this,void 0,void 0,function*(){const{xKey:e="",yKey:i="",labelKey:n,marker:o}=this,{markerSelection:a,isHighlight:r}=t,l=oe(r&&this.highlightStyle.item,o.getStyle());a.each((c,d)=>{this.updateMarkerStyle(c,o,{datum:d,highlighted:r,xKey:e,yKey:i,labelKey:n},l)}),r||this.marker.markClean()})}updateLabelSelection(t){var e,i;return R(this,void 0,void 0,function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,r=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(l=>Object.assign(Object.assign({},l.datum),{point:{x:l.x,y:l.y,size:l.datum.point.size}}));return n.update(r)})}updateLabelNodes(t){return R(this,void 0,void 0,function*(){const{labelSelection:e}=t,{label:i}=this;e.each((n,o)=>{var a,r,l,c;n.text=o.label.text,n.fill=i.color,n.x=null!==(r=null===(a=o.point)||void 0===a?void 0:a.x)&&void 0!==r?r:0,n.y=null!==(c=null===(l=o.point)||void 0===l?void 0:l.y)&&void 0!==c?c:0,n.fontStyle=i.fontStyle,n.fontWeight=i.fontWeight,n.fontSize=i.fontSize,n.fontFamily=i.fontFamily,n.textAlign="left",n.textBaseline="top"})})}getTooltipHtml(t){const{xKey:e,yKey:i,axes:n}=this,o=n[P.X],a=n[P.Y];if(!(e&&i&&o&&a))return"";const{marker:r,tooltip:l,xName:c,yName:d,labelKey:u,labelName:h,id:f,title:g=d}=this,m=oe({fill:t.fill,strokeWidth:this.getStrokeWidth(r.strokeWidth)},r.getStyle()),{fill:y="gray"}=this.getMarkerStyle(r,{datum:t,highlighted:!1,xKey:e,yKey:i,labelKey:u},m),{datum:x,xValue:A,yValue:S,label:k}=t,E=xt(o.formatDatum(A)),O=xt(a.formatDatum(S));let D=`<b>${xt(c??e)}</b>: ${E}<br><b>${xt(d??i)}</b>: ${O}`;return u&&(D=`<b>${xt(h??u)}</b>: ${xt(k.text)}<br>`+D),l.toTooltipHtml({title:g,content:D,backgroundColor:y},Object.assign({datum:x,xKey:e,xName:c,yKey:i,yName:d,labelKey:u,labelName:h,title:g,color:y,seriesId:f},this.getModuleTooltipParams(x)))}getLegendData(t){var e,i,n,o,a;const{id:r,data:l,xKey:c,yKey:d,yName:u,title:h,visible:f,marker:g}=this,{fill:m,stroke:y,fillOpacity:x,strokeOpacity:A,strokeWidth:S}=g;return l?.length&&c&&d&&"category"===t?[{legendType:"category",id:r,itemId:d,seriesId:r,enabled:f,label:{text:null!==(e=h??u)&&void 0!==e?e:d},marker:{shape:g.shape,fill:null!==(n=null!==(i=g.fill)&&void 0!==i?i:m)&&void 0!==n?n:"rgba(0, 0, 0, 0)",stroke:null!==(a=null!==(o=g.stroke)&&void 0!==o?o:y)&&void 0!==a?a:"rgba(0, 0, 0, 0)",fillOpacity:x??1,strokeOpacity:A??1,strokeWidth:S??0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:n}=t;Ka(this,this.ctx.animationManager,e),Dt(this,"labels",this.ctx.animationManager,i),Dt(this,"annotations",this.ctx.animationManager,n)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new W}}de.className="ScatterSeries",de.type="scatter",v([_(j),b("design:type",String)],de.prototype,"title",void 0),v([_(j),b("design:type",String)],de.prototype,"labelKey",void 0),v([_(j),b("design:type",String)],de.prototype,"xName",void 0),v([_(j),b("design:type",String)],de.prototype,"yName",void 0),v([_(j),b("design:type",String)],de.prototype,"labelName",void 0),v([_(j),b("design:type",String)],de.prototype,"xKey",void 0),v([_(j),b("design:type",String)],de.prototype,"yKey",void 0),v([_(j),b("design:type",String)],de.prototype,"colorKey",void 0),v([_(j),b("design:type",String)],de.prototype,"colorName",void 0),v([_(Zs),b("design:type",Array)],de.prototype,"colorDomain",void 0),v([_(fn),b("design:type",Array)],de.prototype,"colorRange",void 0);const im={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:de,seriesDefaults:{axes:[{type:Ue_NUMBER,position:Ye_BOTTOM},{type:Ue_NUMBER,position:Ye_LEFT}]},themeTemplate:{__extends__:xi,tooltip:{position:{type:"node"}},marker:{__extends__:Rn,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ft,color:Vt}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:Es},nm={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:ct,seriesDefaults:{},themeTemplate:{__extends__:xi,title:{enabled:!0,fontStyle:void 0,fontWeight:wn,fontSize:14,fontFamily:Ft,color:In,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ft,color:Vt,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:wn,fontSize:12,fontFamily:Ft,color:Ln,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:Pn,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ft,color:Vt,margin:2}},paletteFactory:({takeColors:s,colorsCount:t,userPalette:e})=>{const{fills:i,strokes:n}=s(t);return{fills:i,strokes:e?n:[Co],calloutLine:{colors:n}}}};let Mo=(()=>{class s{constructor(e,i,n,o,a,r,l,c,d,u,h){this.series=e,this.index=i,this.datum=n,this.size=o,this.colorValue=a,this.fill=r,this.stroke=l,this.sumSize=c,this.depth=d,this.parent=u,this.children=h,this.midPoint={x:0,y:0}}contains(e){let i=e;for(;null!=i&&i.index>=this.index;){if(i===this)return!0;i=i.parent}return!1}walk(e,i=s.Walk.PreOrder){i===s.Walk.PreOrder&&e(this),this.children.forEach(n=>{n.walk(e,i)}),i===s.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*e}}return s.Walk={PreOrder:0,PostOrder:1},s})();class Fi extends Ie{constructor(t){super({moduleCtx:t,pickModes:[St.EXACT_SHAPE_MATCH],contentGroupVirtual:!1}),this.childrenKey="children",this.sizeKey=void 0,this.colorKey=void 0,this.colorName=void 0,this.fills=Object.values(hi),this.strokes=Object.values(Sn),this.colorRange=void 0,this.rootNode=new Mo(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new ms("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)}},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e)},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)}},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)}}},()=>this.checkProcessedDataAnimatable())}hasData(){return Array.isArray(this.data)&&this.data.length>0}processData(){var t,e;return R(this,void 0,void 0,function*(){const{childrenKey:i,sizeKey:n,colorKey:o,fills:a,strokes:r,colorRange:l}=this;let c=0,u=0,h=1/0,f=-1/0;const g=new Array((null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0)+1).fill(void 0),m=(k,E)=>{const O=(c+=1,c),D=null!=E.depth?E.depth+1:0,T=null!=i?k[i]:void 0,w=null==T||0===T.length;let C=null!=n?k[n]:void 0;C=Number.isFinite(C)?Math.max(C,0):w?1:0;const N=C;u=Math.max(u,D);const L=null!=o?k[o]:void 0;return"number"==typeof L&&(g[O]=L,h=Math.min(h,L),f=Math.max(f,L)),y(new Mo(this,O,k,C,L,void 0,void 0,N,D,E,[]),T)},y=(k,E)=>(E?.forEach(O=>{const D=m(O,k);k.children.push(D),k.sumSize+=D.sumSize}),k),x=y(new Mo(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),A=[h,f];let S;null!=l&&Number.isFinite(h)&&Number.isFinite(f)&&(S=new Os,S.domain=A,S.range=l,S.update()),x.children.forEach((k,E)=>{k.walk(O=>{let D;const T=g[O.index];null!=T&&(D=S?.convert(T)),D??(D=a?.[E%a.length]),O.fill=D,O.stroke=null==S?r?.[E%r.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=x,this.maxDepth=u,this.colorDomain=A})}update({seriesRect:t}){return R(this,void 0,void 0,function*(){yield this.updateSelections(),yield this.updateNodes();const e=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",e),this.animationState.transition("update",e)})}resetAllAnimation(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&It(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;null!=i&&It([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){return"gradient"===t&&null!=this.colorKey&&null!=this.colorRange?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.colorName,colorDomain:this.colorDomain,colorRange:this.colorRange}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}}v([_(j),b("design:type",String)],Fi.prototype,"childrenKey",void 0),v([_(j),b("design:type",String)],Fi.prototype,"sizeKey",void 0),v([_(j),b("design:type",String)],Fi.prototype,"colorKey",void 0),v([_(j),b("design:type",String)],Fi.prototype,"colorName",void 0),v([_(ss),b("design:type",Array)],Fi.prototype,"fills",void 0),v([_(ss),b("design:type",Array)],Fi.prototype,"strokes",void 0),v([_(ss),b("design:type",Array)],Fi.prototype,"colorRange",void 0);class Is extends Ci{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}}v([_(I(0,1)),b("design:type",Number)],Is.prototype,"innerRadiusRatio",void 0);const Fd={},Bd={},lr={},Gd={},Yd={},Ud=new Set,jd=new Set,zd=new Set,Wd=new Set,cr={},Vd={};function am(s,t,e,i,n,o,a,r,l,c,d,u,h){Fd[s]=e,Bd[s]=i,Hd(s,n,o),a&&function cm(s,t){Yd[s]=t}(s,a),r&&function pm(s){Ud.add(s)}(s),l&&function fm(s){jd.add(s)}(s),c&&function hm(s){zd.add(s)}(s),d&&function gm(s){Wd.add(s)}(s),u&&function mm(s,t){cr[s]=t}(s,u),h&&function ym(s,t){Vd[s]=t}(s,h),function Mg(s,t){qi[s]=t}(s,t)}function Hd(s,t,e={}){const i=lr[s];lr[s]=Et([i,t]),Gd[s]=Et([i,t,e])}function rm(s,t){const e=Fd[s];if(e)return new e(t);throw new Error(`AG Charts - unknown series type: ${s}`)}function Xd(s){return Bd[s]}function Ro(s){return Ud.has(s)}function dr(s){return jd.has(s)}function ur(s){return zd.has(s)}let Kd=(()=>{class s extends Ee{constructor(e,i){super(e,i),this._data={}}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return R(this,void 0,void 0,function*(){const i=yield e.performLayout.call(this),{seriesArea:{padding:n},seriesRoot:o}=this,a=i.clone();return i.shrink(n.left,"left"),i.shrink(n.top,"top"),i.shrink(n.right,"right"),i.shrink(n.bottom,"bottom"),this.seriesRect=i,this.animationRect=i,this.hoverRect=i,o.translationX=Math.floor(i.x),o.translationY=Math.floor(i.y),yield Promise.all(this.series.map(r=>R(this,void 0,void 0,function*(){yield r.update({seriesRect:i})}))),o.visible=this.series[0].visible,o.setClipRectInGroupCoordinateSpace(new H(i.x,i.y,i.width,i.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:a,paddedRect:i,visible:!0},axes:[]}),i})}}return s.className="HierarchyChart",s.type="hierarchy",s})();const hr="white",km={fills:Array.from(Object.values(hi)),strokes:Array.from(Object.values(Sn))},pr={get cartesian(){return{seriesTypes:Te.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Te.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:Te.hierarchyTypes,commonOptions:[]}}},Om=Object.values(pr).reduce((s,{commonOptions:t})=>[...s,...t],[]);class K{getPalette(){return km}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontStyle:void 0,fontWeight:wn,fontSize:Ii_MEDIUM,fontFamily:Ft,color:Vt},label:{fontStyle:void 0,fontWeight:void 0,fontSize:Ii_SMALL,fontFamily:Ft,padding:5,rotation:void 0,color:Vt,formatter:void 0,avoidCollisions:!0},line:{enabled:!0,width:1,color:Do},tick:{enabled:!1,width:1,color:Do},gridLine:{enabled:!0,style:[{stroke:Eo,lineDash:[]}]},crossLines:{enabled:!1,fill:Ds,stroke:Ds,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:Ii_SMALL,fontFamily:Ft,padding:5,color:Vt}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1,formatter:void 0}}static getLegendItemMarkerDefaults(){return{shape:void 0,size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:To},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:wn,fontSize:Ii_LARGE,fontFamily:Ft,color:Vt,wrapping:K.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:Ii_MEDIUM,fontFamily:Ft,color:In,wrapping:K.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:Ii_MEDIUM,fontFamily:Ft,color:"rgb(140, 140, 140)",wrapping:K.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:K.getLegendItemMarkerDefaults(),label:{color:Vt,fontStyle:void 0,fontWeight:void 0,fontSize:Ii_SMALL,fontFamily:Ft,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:Vt},inactiveStyle:{fill:In},highlightStyle:{fill:Vt},label:{color:Vt}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}constructor(t){t=ye({},t??{});const{overrides:e=null,palette:i=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:o}=e,a=(r,l)=>{if(l)for(const c of r)n[c]=ye(n[c],l)};for(const[,{seriesTypes:r,commonOptions:l}]of Object.entries(pr)){const c=Object.assign({},o);for(const d of Om)l.includes(d)||delete c[d];a(r,c)}Te.seriesTypes.forEach(r=>{e[r]&&(n[r]=ye(n[r],e[r]))})}this.palette=i??this.getPalette(),this.config=Object.freeze(this.templateTheme(n))}createChartConfigPerChartType(t){return Object.entries(pr).forEach(([e,{seriesTypes:i}])=>{const n=ld(e);i.forEach(o=>{const a=o;t[a]||(t[a]={},ye(t[a],n))})}),t}getDefaults(){let t={};const i=(n,o)=>{var a,r,l,c;const d=(n=>Object.assign(Object.assign(Object.assign({},function kg(){return od}()),K.getChartDefaults()),ld(n)))(n),u={};for(const h of o){null!==(a=u[h])&&void 0!==a||(u[h]=ye({},d));const f=null!==(r=(c=u[h]).axes)&&void 0!==r?r:c.axes={},g=(s=h,zs()?Gd[s]:lr[s]);g&&(u[h].series=ye(u[h].series,g));for(const m of Ya.axesTypes){const y=mg(m);"cartesian"===n&&(f[m]=ye(f[m],null!==(l=K.cartesianAxisDefault[m])&&void 0!==l?l:{})),y&&(f[m]=ye(f[m],y))}}var s;return u};return t=ye(t,i("cartesian",Te.cartesianTypes)),t=ye(t,i("polar",Te.polarTypes)),t=ye(t,i("hierarchy",Te.hierarchyTypes)),t}templateTheme(t){const e=Et([t]),{extensions:i,properties:n}=this.getTemplateParameters();return ji(e,(o,a)=>{if(a.__extends__){const r=a.__extends__,l=i.get(r);if(null==l)throw new Error("AG Charts - no template variable provided for: "+r);Object.keys(l).forEach(c=>{c in a||(a[c]=l[c])}),delete a.__extends__}if(a.__overrides__){const r=a.__overrides__,l=i.get(r);if(null==l)throw new Error("AG Charts - no template variable provided for: "+r);Object.assign(a,l),delete a.__overrides__}if(Array.isArray(a))for(let r=0;r<a.length;r++){const l=a[r];n.has(l)&&(a[r]=n.get(l))}else for(const[r,l]of Object.entries(a))n.has(l)&&(a[r]=n.get(l))}),e}static getWaterfallSeriesDefaultPositiveColors(){return{fill:hi.BLUE,stroke:Sn.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:hi.ORANGE,stroke:Sn.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:hi.GRAY,stroke:Sn.GRAY}}getTemplateParameters(){const t=new Map;t.set(dd,K.getChartDefaults()),t.set(fd,K.getAxisDefaults()),t.set(ud,K.getChartDefaults().legend),t.set(hd,K.getChartDefaults().legend.item),t.set(pd,K.getLegendItemMarkerDefaults()),t.set(gd,K.getAxisDefaults().label),t.set(md,K.getAxisDefaults().line),t.set(yd,K.getAxisDefaults().tick),t.set(vd,K.getAxisDefaults().gridLine),t.set(xi,K.getSeriesDefaults()),t.set(bd,{}),t.set(Rn,K.getCartesianSeriesMarkerDefaults());const e=new Map;return e.set(Ft,"Verdana, sans-serif"),e.set(Vt,"rgb(70, 70, 70)"),e.set(xd,"white"),e.set(In,"rgb(140, 140, 140)"),e.set(Eo,"rgb(224,234,241)"),e.set(Do,"rgb(195, 195, 195)"),e.set(Ds,"rgb(70, 70, 70)"),e.set(Ln,hr),e.set(To,hr),e.set(Pn,"rgba(0, 0, 0, 0.5)"),e.set(He,[hi.ORANGE,hi.YELLOW,hi.GREEN]),e.set(Ha,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),e.set(Xa,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),e.set(Co,hr),e.set(je,K.getWaterfallSeriesDefaultPositiveColors()),e.set(ze,K.getWaterfallSeriesDefaultNegativeColors()),e.set(We,K.getWaterfallSeriesDefaultTotalColors()),e.set(Ve,K.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:t,properties:e}}}K.cartesianAxisDefault={number:Object.assign(Object.assign({},K.getAxisDefaults()),{line:Object.assign(Object.assign({},K.getAxisDefaults().line),{enabled:!1})}),log:Object.assign(Object.assign({},K.getAxisDefaults()),{base:10,line:Object.assign(Object.assign({},K.getAxisDefaults().line),{enabled:!1})}),category:Object.assign(Object.assign({},K.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},K.getAxisDefaults().label),{autoRotate:!0}),gridLine:Object.assign(Object.assign({},K.getAxisDefaults().gridLine),{enabled:!1})}),"grouped-category":Object.assign({},K.getAxisDefaults()),time:Object.assign(Object.assign({},K.getAxisDefaults()),{gridLine:Object.assign(Object.assign({},K.getAxisDefaults().gridLine),{enabled:!1})})};const fr="#182732",Qi={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Lo={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},Em={fills:Array.from(Object.values(Qi)),strokes:Array.from(Object.values(Lo))};class oi extends K{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Qi.BLUE,stroke:Lo.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Qi.ORANGE,stroke:Lo.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Qi.GRAY,stroke:Lo.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(je,oi.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(ze,oi.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(We,oi.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ve,oi.getWaterfallSeriesDefaultTotalColors().stroke),t.properties.set(Co,fr),t.properties.set(Vt,"white"),t.properties.set(In,"#7D91A0"),t.properties.set(Eo,"#545A6E"),t.properties.set(Ds,"white"),t.properties.set(He,[Qi.ORANGE,Qi.YELLOW,Qi.GREEN]),t.properties.set(Ha,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.properties.set(Xa,["#192834","#3b5164","#496275","#577287","#668399"]),t.properties.set(To,fr),t.properties.set(Ln,fr),t}getPalette(){return Em}constructor(t){super(t)}}const tn={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Io={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Dm={fills:Array.from(Object.values(tn)),strokes:Array.from(Object.values(Io))};class Fn extends oi{static getWaterfallSeriesDefaultPositiveColors(){return{fill:tn.BLUE,stroke:Io.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:tn.RED,stroke:Io.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:tn.GRAY,stroke:Io.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(je,Fn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(ze,Fn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(We,Fn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(He,[tn.ORANGE,tn.YELLOW,tn.GREEN]),t.properties.set(Ve,Fn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Dm}}const en={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Po={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Tm={fills:Array.from(Object.values(en)),strokes:Array.from(Object.values(Po))};class Bn extends K{static getWaterfallSeriesDefaultPositiveColors(){return{fill:en.BLUE,stroke:Po.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:en.RED,stroke:Po.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:en.GRAY,stroke:Po.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(je,Bn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(ze,Bn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(We,Bn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(He,[en.ORANGE,en.YELLOW,en.GREEN]),t.properties.set(Ve,Bn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Tm}}const Ps={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},gr={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},wm={fills:Array.from(Object.values(Ps)),strokes:Array.from(Object.values(gr))};class Gn extends oi{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ps.BLUE,stroke:gr.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ps.RED,stroke:gr.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(je,Gn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(ze,Gn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(We,Gn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(He,[Ps.BLUE,Ps.RED]),t.properties.set(Ve,Gn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return wm}}const Fs={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},mr={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},Lm={fills:Array.from(Object.values(Fs)),strokes:Array.from(Object.values(mr))};class Yn extends K{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Fs.BLUE,stroke:mr.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Fs.RED,stroke:mr.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(je,Yn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(ze,Yn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(We,Yn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(He,[Fs.BLUE,Fs.RED]),t.properties.set(Ve,Yn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Lm}}const nn={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Fo={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Im={fills:Array.from(Object.values(nn)),strokes:Array.from(Object.values(Fo))};class Un extends oi{static getWaterfallSeriesDefaultPositiveColors(){return{fill:nn.BLUE,stroke:Fo.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:nn.ORANGE,stroke:Fo.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:nn.GRAY,stroke:Fo.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(je,Un.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(ze,Un.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(We,Un.getWaterfallSeriesDefaultTotalColors()),t.properties.set(He,[nn.ORANGE,nn.YELLOW,nn.GREEN]),t.properties.set(Ve,Un.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Im}}const sn={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},Bo={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Pm={fills:Array.from(Object.values(sn)),strokes:Array.from(Object.values(Bo))};class jn extends K{static getWaterfallSeriesDefaultPositiveColors(){return{fill:sn.BLUE,stroke:Bo.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:sn.ORANGE,stroke:Bo.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:sn.GRAY,stroke:Bo.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(je,jn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(ze,jn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(We,jn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(He,[sn.ORANGE,sn.YELLOW,sn.GREEN]),t.properties.set(Ve,jn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Pm}}const on={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Go={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Fm={fills:Array.from(Object.values(on)),strokes:Array.from(Object.values(Go))};class zn extends oi{static getWaterfallSeriesDefaultPositiveColors(){return{fill:on.BLUE,stroke:Go.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:on.ORANGE,stroke:Go.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:on.GRAY,stroke:Go.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(je,zn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(ze,zn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(We,zn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(He,[on.ORANGE,on.YELLOW,on.GREEN]),t.properties.set(Ve,zn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Fm}}const an={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Yo={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},Bm={fills:Array.from(Object.values(an)),strokes:Array.from(Object.values(Yo))};class Wn extends K{static getWaterfallSeriesDefaultPositiveColors(){return{fill:an.BLUE,stroke:Yo.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:an.ORANGE,stroke:Yo.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:an.GRAY,stroke:Yo.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(je,Wn.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(ze,Wn.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(We,Wn.getWaterfallSeriesDefaultTotalColors()),t.properties.set(He,[an.ORANGE,an.YELLOW,an.GREEN]),t.properties.set(Ve,Wn.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Bm}}const Bs=()=>new K,yr=()=>new oi,Gm={undefined:Bs,null:Bs,"ag-default":Bs,"ag-sheets":()=>new jn,"ag-polychroma":()=>new Yn,"ag-vivid":()=>new Wn,"ag-material":()=>new Bn},$d=Object.assign(Object.assign({},{undefined:yr,null:yr,"ag-default-dark":yr,"ag-sheets-dark":()=>new Un,"ag-polychroma-dark":()=>new Gn,"ag-vivid-dark":()=>new zn,"ag-material-dark":()=>new Fn}),Gm);function vr(s){var t;let e=function Um(s){return void 0===s||"string"==typeof s||s instanceof K?s:"object"==typeof s?function Ym(s){if(null===s)return;let t=!0;const{baseTheme:e,palette:i,overrides:n}=s;if(void 0!==e&&"string"!=typeof e&&"object"!=typeof e&&(G.warn(`invalid theme.baseTheme type ${typeof e}, expected (string | object).`),t=!1),void 0!==n&&"object"!=typeof n&&(G.warn(`invalid theme.overrides type ${typeof n}, expected object.`),t=!1),"object"==typeof i){if(null!==i){const{fills:o,strokes:a}=i;Array.isArray(o)||(G.warn("theme.overrides.fills must be a defined array"),t=!1),Array.isArray(a)||(G.warn("theme.overrides.strokes must be a defined array"),t=!1)}}else void 0!==i&&(G.warn(`invalid theme.palette type ${typeof i}, expected object.`),t=!1);return t?s:void 0}(s):void G.warn(`invalid theme value type ${typeof s}, expected object.`)}(s);if(e instanceof K)return e;if(void 0===e||"string"==typeof e){const r=$d[e];return r?r():(G.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),Bs())}const i=[];let n;for(;"object"==typeof e;)i.push(null!==(t=e.overrides)&&void 0!==t?t:{}),e.palette&&null==n&&(n=e.palette),e=e.baseTheme;i.reverse();const o=Object.assign({baseTheme:e,overrides:Et(i)},n?{palette:n}:{});return new((o.baseTheme?vr(o.baseTheme):Bs()).constructor)(o)}function Zd(s,t,e){const i=[];for(let n=0;n<e;n++)i.push(t[(n+s.colourIndex)%t.length]);return i}const rn={avoidDeepClone:["data"]};function zm(s){var t,e,i,n;!function Wm(s){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([e,i])=>{var n;null!==(n=s.series)&&void 0!==n&&n.some(o=>null!=o[e])&&G.warnOnce(`Property [series.${e}] is deprecated, please use [series.${i}] and multiple series instead.`)})}(s);const o=Ji(s),a=function jm(s){if(void 0===s||"object"!=typeof s||null===s)return{};const{type:t,xOffset:e,yOffset:i}=s,n={};return"string"==typeof t&&(r=t,Object.keys({pointer:!0,node:!0}).includes(r))&&(n.type=t),"number"==typeof e&&!isNaN(e)&&isFinite(e)&&(n.xOffset=e),"number"==typeof i&&!isNaN(i)&&isFinite(i)&&(n.yOffset=i),n;var r}(null===(t=s.tooltip)||void 0===t?void 0:t.position),r=x=>{if(null!=x&&!(function Ig(s){return null!=s&&Te.has(s)}(x)||nd(x)||Xd(x)))throw new Error(`AG Charts - unknown series type: ${x}; expected one of: ${Te.seriesTypes}`)};r(o);for(const{type:x}of null!==(e=s.series)&&void 0!==e?e:[])null!=x&&r(x);s=function Hm(s){if(void 0===s.series||s.series.length<=1||!function Vm(s){for(const t of s)if(Ro(t.type))return!0;return!1}(s.series))return s;let t=[...s.series];if(Ro(t[0].type))G.warn(`series[0] of type '${t[0].type}' is incompatible with other series types. Only processing series[0]`),t=t.slice(0,1);else{const e=Array.from(new Set(t.filter(i=>Ro(i.type)).map(i=>i.type)));G.warnOnce(`Unable to mix these series types with the lead series type: ${e}`),t=t.filter(i=>!Ro(i.type))}return Object.assign(Object.assign({},s),{series:t})}(Object.assign(Object.assign({},s),{type:o}));let l="line";Mn(s)?l="line":ko(s)?l="treemap":Oo(s)&&(l="pie");let c=Xd(o);(function vm(s){var t,e;let i;for(const n of null!==(t=s.series)&&void 0!==t?t:[]){const{type:o="line"}=n,a=null===(e=cr[o])||void 0===e?void 0:e.call(cr,n);if(null!=a){if(null!=i&&i!=a)throw new Error("AG Charts - The provided series have incompatible directions");i=a}}return i})(s)&&(c=function Fg(s){var t;if(!Mn(s))return s;const[e,i]=null!==(t=s.axes)&&void 0!==t?t:[];return Object.assign(Object.assign({},s),{axes:[Object.assign(Object.assign({},e),{position:i.position}),Object.assign(Object.assign({},i),{position:e.position})]})}(c)),c=function bm(s,t){var e;let i=t;for(const n of null!==(e=s.series)&&void 0!==e?e:[]){const{type:o}=n,a=null!=o?Vd[o]:void 0;void 0!==a&&(i=Object.assign(Object.assign({},i),a(n)))}return i}(s,c);const d=function Bg(s){var t,e,i,n;const o={};for(const[a,r]of jo.entries())if(null!=s[a]&&r.length){null!==(t=o[a])&&void 0!==t||(o[a]={});for(const l of r)null!==(e=s[a])&&void 0!==e&&e.enabled&&null!==(i=s[l])&&void 0!==i&&i.enabled?(G.warnOnce(`the [${a}] module can not be used at the same time as [${l}], it will be disabled.`),o[a].enabled=!1):o[a].enabled=null===(n=s[a])||void 0===n?void 0:n.enabled}return o}(s);!function Qm(s){ji(s,(t,e)=>{!1===e.enabled&&Object.keys(e).forEach(i=>{"enabled"!==i&&delete e[i]})},{skip:["data","theme"]})}(s);const{context:u,mergedOptions:h,axesThemes:f,seriesThemes:g,theme:m}=function Km(s,t,e){const{theme:i,cleanedTheme:n,axesThemes:o,seriesThemes:a,userPalette:r}=function $m(s){var t;const e=vr(s.theme),i=e.config[Ji(s)],n=Object.entries(e.config).reduce((r,[l,{series:c}])=>(r[l]=c,r),{}),o=s.theme,a="object"==typeof o&&o.palette?o.palette:null;return{theme:e,axesThemes:null!==(t=i?.axes)&&void 0!==t?t:{},seriesThemes:n,cleanedTheme:Et([i??{},{axes:xe,series:xe}]),userPalette:a}}(t),l={colourIndex:0,palette:i.palette,userPalette:r,theme:i},c=Et([s=i.templateTheme(s),n,t,e],rn);return dn.isEnterprise||function Sm(s){var t,e,i,n;const o=[],a=function Lg(s){var t;return null!==(t=qi[s])&&void 0!==t?t:"unknown"}(Ji(s));for(const{type:r,chartTypes:l,optionsKey:c,optionsInnerKey:d,identifier:u}of Nn)if("unknown"===a||l.includes(a))if("root"===r||"legend"===r){const h=s[c];if(null==h)continue;d?h[d]&&(o.push(`${c}.${d}`),delete h[d]):(o.push(c),delete s[c])}else if("axis"===r){if(!("axes"in s)||null===(t=s.axes)||void 0===t||!t.some(h=>h.type===u))continue;o.push(`axis[type=${u}]`),s.axes=s.axes.filter(h=>h.type!==u)}else if("axis-option"===r){if(!("axes"in s)||null===(e=s.axes)||void 0===e||!e.some(h=>h[c]))continue;o.push(`axis.${c}`),s.axes.forEach(h=>{h[c]&&delete h[c]})}else if("series"===r){if(null===(i=s.series)||void 0===i||!i.some(h=>h.type===u))continue;o.push(`series[type=${u}]`),s.series=s.series.filter(h=>h.type!==u)}else if("series-option"===r){if(null===(n=s.series)||void 0===n||!n.some(h=>h[c]))continue;o.push(`series.${c}`),s.series.forEach(h=>{h[c]&&delete h[c]})}o.length>0&&G.warnOnce(["unable to use these enterprise features as 'ag-charts-enterprise' has not been loaded:","",...o,"","See: https://charts.ag-grid.com/javascript/installation/"].join("\n"))}(c),{context:l,mergedOptions:c,axesThemes:o,seriesThemes:a,theme:i}}(c,s,d);h.series=function Am(s,t){var e;const i=[],n=t.map(c=>{var d;const u=null!==(d=c.type)&&void 0!==d?d:"line",h=ur(u),f=dr(u),g=function um(s){return Wd.has(s)}(u);if(c.grouped&&!h&&G.warnOnce(`unsupported grouping of series type: ${u}`),c.stacked&&!f&&G.warnOnce(`unsupported stacking of series type: ${u}`),!h&&!f)return c;let m=!1,y=!1;return void 0===c.stacked&&void 0===c.grouped?(m=f&&g,y=h&&!m):void 0===c.stacked?(m=f&&g&&!(c.grouped&&h),y=h&&!m&&!!c.grouped):void 0===c.grouped?(m=f&&c.stacked,y=h&&!m):(m=f&&c.stacked,y=h&&!m&&c.grouped),Object.assign(Object.assign({},c),{stacked:m,grouped:y})}),o=function _m(s){var t,e,i,n;const o={},a={},r={},c=[];for(const d of s){const u=null!==(t=d.type)&&void 0!==t?t:"line",h=dr(u),f=ur(u);if(!h&&!f){c.push({type:"ungrouped",opts:[d]});continue}const{stacked:g,stackGroup:m,grouped:y,xKey:x}=d,A=null!=m||!0===g;null!==(e=r[u])&&void 0!==e||(r[u]=!1),r[u]||(r[u]=A&&h);const S=!0===y;let k=[m??(!0===g?"stacked":void 0),S?"grouped":void 0].filter(O=>null!=O).join("-");k||(k="default-ag-charts-group");const E=`${u}-${x}-${k}`;if(A&&h){const O=null!==(i=a[E])&&void 0!==i?i:a[E]={type:"stack",opts:[]};0===O.opts.length&&c.push(O),O.opts.push(d)}else if(S&&f){const O=null!==(n=o[E])&&void 0!==n?n:o[E]={type:"group",opts:[]};0===O.opts.length&&c.push(O),O.opts.push(d)}else c.push({type:"ungrouped",opts:[d]})}return Object.values(r).some(d=>d),c}(n),a=o.reduce((c,d)=>{var u,h;if("ungrouped"===d.type)return c;const f=null!==(u=d.opts[0].type)&&void 0!==u?u:"line";return null!==(h=c[f])&&void 0!==h||(c[f]=0),c[f]+="stack"===d.type?1:d.opts.length,c},{}),r={},l=c=>{var d,u;let h=0;const f=null!==(d=c.opts[0].type)&&void 0!==d?d:"line";if(null!==(u=r[f])&&void 0!==u||(r[f]=0),"stack"===c.type){for(const g of c.opts)g.seriesGrouping={groupIndex:r[f],groupCount:a[f],stackIndex:h++,stackCount:c.opts.length};r[f]++}else if("group"===c.type)for(const g of c.opts)g.seriesGrouping={groupIndex:r[f],groupCount:a[f],stackIndex:0,stackCount:0},r[f]++;else for(const g of c.opts)g.seriesGrouping=void 0;return c.opts};Mt.create(!0,"opts")("processSeriesOptions() - series grouping: ",o);for(const c of o){const d=null!==(e=c.opts[0].type)&&void 0!==e?e:"line";ur(d)||dr(d)?i.push(...l(c)):i.push(...c.opts)}return i}(0,(null!==(i=h.series)&&void 0!==i?i:[]).map(x=>{var A;const S=null!==(A=x.type)&&void 0!==A?A:l,k=function Xm(s,t,e,i){var n,o;const a=Et([Object.assign({},i),null===(n=s.tooltip)||void 0===n?void 0:n.position],rn);return Et([null!==(o=e[t])&&void 0!==o?o:{},Object.assign(Object.assign({},s),{type:t,tooltip:Object.assign(Object.assign({},s.tooltip),{position:a})})],rn)}(x,S,g,a);return"pie"===S&&function iy(s,t,e){e.innerLabels=Array.isArray(t.innerLabels)?t.innerLabels.map(i=>Et([s.innerLabels,i])):xe}(g.pie,x,k),k})).map(x=>function Zm(s,t,...e){const i=function qm(s,t){const e=function dm(s){return Yd[s]}(t.type);if(!e)return{};const{palette:{fills:i,strokes:n},userPalette:o,theme:a}=s,r=Math.max(i.length,n.length);return e({userPalette:o,themeTemplateParameters:a.getTemplateParameters(),colorsCount:r,takeColors:l=>{const c={fills:Zd(s,i,l),strokes:Zd(s,n,l)};return s.colourIndex+=l,c}})}(s,t);return Et([...e,i,t,{stacked:xe,grouped:xe}],rn)}(u,x)).map(x=>m.templateTheme(x));const y=x=>{const A=function Pg(s){return null!=s&&Ya.has(s)}(x);return A||G.warnOnce(`unknown axis type: ${x}; expected one of: ${Ya.axesTypes}, ignoring.`),A};if("axes"in h){let x=!0;for(const{type:S}of null!==(n=h.axes)&&void 0!==n?n:[])x&&(x=y(S));const A=x?h.axes:c.axes;h.axes=A?.map(S=>{var k,E,O,D,T;const w=S.type;let C;return x&&(C=null===(k=c.axes)||void 0===k?void 0:k.find(({type:L})=>L===w)),function Jm(s,t){const e={top:xe,bottom:xe,left:xe,right:xe};if(s.crossLines){Array.isArray(s.crossLines)||(G.warn("axis[].crossLines should be an array."),s.crossLines=[]);const{crossLines:n}=t;s.crossLines=s.crossLines.map(o=>Et([n,o]))}return Et([t,{crossLines:xe},s,e],rn)}(S,Et([null!==(E=f[w])&&void 0!==E?E:{},null!==(T=null===(O=f[w])||void 0===O?void 0:O[null!==(D=S.position)&&void 0!==D?D:"unknown"])&&void 0!==T?T:{},C]))}),function ty(s,t){var e,i,n,o;if(void 0===(null===(e=s.legend)||void 0===e?void 0:e.enabled)&&void 0===(null===(i=t.legend)||void 0===i?void 0:i.enabled)){if(null!==(n=t.legend)&&void 0!==n||(t.legend={}),(null!==(o=s.series)&&void 0!==o?o:[]).length>1)return void(t.legend.enabled=!0);t.legend.enabled=!1}}(s,h)}return function ey(s,t){ji(s,(e,i,n)=>{if(!n)return;const{_enabledFromTheme:o}=n;null!=o&&delete n._enabledFromTheme,"enabled"in n&&(o||null==i.enabled&&(n.enabled=!0))},{skip:["data","theme"]},t),ji(t,(e,i)=>{null!=i._enabledFromTheme&&delete i._enabledFromTheme},{skip:["data","theme"]})}(s,h),h}let qd=(()=>{class s extends Ee{constructor(e,i){super(e,i),this.padding=new Ti(40),this.axisGroup.zIndex=ft.AXIS_FOREGROUND_ZINDEX}performLayout(){const e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return R(this,void 0,void 0,function*(){const i=yield e.performLayout.call(this),n=i.clone();return this.computeSeriesRect(i),yield this.computeCircle(i),this.axes.forEach(o=>o.update()),this.hoverRect=i,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:i,visible:!0},axes:[]}),i})}updateAxes(e,i,n){var o,a;const r=this.axes.find(h=>h.direction===P.X),l=this.axes.find(h=>h.direction===P.Y);if(!(r instanceof Is&&l instanceof Is))return;const c=r.scale,d=null===(o=c.ticks)||void 0===o?void 0:o.call(c).map(h=>c.convert(h)),u=l.innerRadiusRatio;r.innerRadiusRatio=u,null===(a=r.computeRange)||void 0===a||a.call(r),r.gridLength=n,l.gridAngles=d,l.gridRange=r.range,l.range=[n,n*u],[r,l].forEach(h=>{h.translation.x=e,h.translation.y=i,h.calculateLayout()})}computeSeriesRect(e){const{seriesArea:{padding:i}}=this;e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e}computeCircle(e){return R(this,void 0,void 0,function*(){const i=this.series.filter(u=>u instanceof Oa),n=this.axes.filter(u=>u instanceof Is),o=(u,h,f)=>{this.updateAxes(u,h,f),i.forEach(m=>{m.centerX=u,m.centerY=h,m.radius=f});const g=i.filter(m=>m instanceof ct);if(g.length>1){const m=g.map(y=>{const x=y.getInnerRadius();return{series:y,innerRadius:x}}).sort((y,x)=>y.innerRadius-x.innerRadius);m[m.length-1].series.surroundingRadius=void 0;for(let y=0;y<m.length-1;y++)m[y].series.surroundingRadius=m[y+1].innerRadius}},a=e.x+e.width/2,r=e.y+e.height/2,l=Math.max(0,Math.min(e.width,e.height)/2);let c=l;o(a,r,c);const d=({hideWhenNecessary:u=!1}={})=>R(this,void 0,void 0,function*(){const h=[];for(const m of[...n,...i]){const y=yield m.computeLabelsBBox({hideWhenNecessary:u},e);y&&h.push(y)}if(0===h.length)return void o(a,r,l);const f=H.merge(h),g=this.refineCircle(f,c,e);o(g.centerX,g.centerY,g.radius),g.radius!==c&&(c=g.radius)});return yield d(),yield d(),yield d(),yield d({hideWhenNecessary:!0}),yield d({hideWhenNecessary:!0}),{radius:c,centerX:a,centerY:r}})}refineCircle(e,i,n){const r=-i,l=i,c=i;let d=Math.max(0,-i-e.x),u=Math.max(0,r-e.y),h=Math.max(0,e.x+e.width-l),f=Math.max(0,e.y+e.height-c);d=h=Math.max(d,h),u=f=Math.max(u,f);let y=Math.min(n.width-d-h,n.height-u-f)/2;const S=Math.min(.5*n.width/2,.5*n.height/2);if(y<S){y=S;const O=d+h;if(2*y+(u+f)>n.height){const T=n.height-2*y;2*Math.min(u,f)>T?(u=T/2,f=T/2):u>f?u=T-f:f=T-u}if(2*y+O>n.width){const T=n.width-2*y;2*Math.min(d,h)>T?(d=T/2,h=T/2):d>h?d=T-h:h=T-d}}return{centerX:n.x+(n.width-(d+2*y+h))/2+d+y,centerY:n.y+(n.height-(u+2*y+f))/2+u+y,radius:y}}}return s.className="PolarChart",s.type="polar",s})();const Bi=Mt.create(!0,"opts");function Jd(s){if(Mn(s))return"cartesian";if(Oo(s))return"polar";if(ko(s))return"hierarchy";throw new Error(`AG Chart - unknown type of chart for options with type: ${s.type}`)}let ln=(()=>{class s{static licenseCheck(e){var i,n,o;this.licenseChecked||(this.licenseManager=null===(i=dn.licenseManager)||void 0===i?void 0:i.call(dn,e),null===(n=this.licenseManager)||void 0===n||n.setLicenseKey(this.licenseKey),null===(o=this.licenseManager)||void 0===o||o.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(e){this.licenseKey=e}static create(e){var i,n,o;this.licenseCheck(e);const a=Gs.createOrUpdate(e);return!(null===(i=this.licenseManager)||void 0===i)&&i.isDisplayWatermark()&&(null===(n=dn.injectWatermark)||void 0===n||n.call(dn,null!==(o=e.document)&&void 0!==o?o:document,a.chart.element,this.licenseManager.getWatermarkMessage())),a}static update(e,i){if(!Ki.isInstance(e))throw new Error(s.INVALID_CHART_REF_MESSAGE);Gs.createOrUpdate(i,e)}static updateDelta(e,i){if(!Ki.isInstance(e))throw new Error(s.INVALID_CHART_REF_MESSAGE);Gs.updateUserDelta(e,i)}static download(e,i){if(!(e instanceof Ki))throw new Error(s.INVALID_CHART_REF_MESSAGE);Gs.download(e,i)}static getImageDataURL(e,i){if(!(e instanceof Ki))throw new Error(s.INVALID_CHART_REF_MESSAGE);return Gs.getImageDataURL(e,i)}}return s.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",s.licenseChecked=!1,s})(),Gs=(()=>{class s{static initialiseModules(){s.initialised||(function sm(){Ze(ad),Ze(Tg),Ze(Hg),Ze($g),Ze(qg),Ze(em),Ze(im),Ze(nm),Ze(tm)}(),function xm(){var s;for(const t of $e){if("enterprise"===t.packageType&&!Sg(t)&&G.errorOnce("Unexpected enterprise module registered: "+t.identifier),null!=vs.constructors&&null!=t.optionConstructors&&Object.assign(vs.constructors,t.optionConstructors),"root"===t.type&&t.themeTemplate)for(const e of t.chartTypes)Rg(e,t.themeTemplate);if("root"===t.type&&!(null===(s=t.conflicts)||void 0===s)&&s.length&&Pr(t.optionsKey,t.conflicts),"series"===t.type){if(t.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+t.identifier);am(t.identifier,t.chartTypes[0],t.instanceConstructor,t.seriesDefaults,t.themeTemplate,t.enterpriseThemeTemplate,t.paletteFactory,t.solo,t.stackable,t.groupable,t.stackedByDefault,t.swapDefaultAxesCondition,t.customDefaultsFunction)}if("series-option"===t.type&&t.themeTemplate)for(const e of t.seriesTypes)Hd(e,t.themeTemplate);if("axis-option"===t.type&&t.themeTemplate)for(const e of t.axisTypes){const i=t.themeTemplate[e],n=Object.assign(Object.assign({},t.themeTemplate),"object"==typeof i?i:{});for(const o of t.axisTypes)delete n[o];id(e,n)}"axis"===t.type&&(fg(t.identifier,t.instanceConstructor),t.themeTemplate&&id(t.identifier,t.themeTemplate)),"legend"===t.type&&Ag(t.identifier,t.optionsKey,0,t.themeTemplate)}if(zs()){const t=function _g(){return Nn.filter(({useCount:s})=>null==s||0===s)}();t.length>0&&G.errorOnce("Enterprise modules expected but not registered: ",t)}}(),s.initialised=!0)}static createOrUpdate(e,i){var n,o;s.initialiseModules(),Bi(">>> AgChartV2.createOrUpdate() user options",e);const{overrideDevicePixelRatio:a,document:r,window:l}=e,c=pe(e,["overrideDevicePixelRatio","document","window"]),d={overrideDevicePixelRatio:a,document:r,window:l},u=zm(c);let h=i?.chart;(null==h||Jd(c)!==Jd(h.processedOptions))&&(h=s.createChartInstance(u,d,h)),null==i?i=new Ki(h):i.chart=h,Mt.check()&&typeof window<"u"&&(null!==(n=(o=window).agChartInstances)&&void 0!==n||(o.agChartInstances={}),window.agChartInstances[h.id]=h);const f=h;f.queuedUserOptions.push(c);const g=()=>{const m=f.queuedUserOptions.indexOf(c);f.queuedUserOptions.splice(0,m)};return f.requestFactoryUpdate(()=>R(this,void 0,void 0,function*(){if(f.destroyed)return;const m=qe(f.processedOptions,u);null!=m?(yield s.updateDelta(f,m,c),g()):g()})),i}static updateUserDelta(e,i){var n;const{chart:o,chart:{queuedUserOptions:a}}=e,r=null!==(n=a[a.length-1])&&void 0!==n?n:o.userOptions,l=Et([r,i]);Bi(">>> AgChartV2.updateUserDelta() user delta",i),Bi("AgChartV2.updateUserDelta() - base options",r),s.createOrUpdate(l,e)}static download(e,i){(()=>R(this,void 0,void 0,function*(){const o=yield s.prepareResizedChart(e,i),{chart:a}=o;a.scene.download(i?.fileName,i?.fileFormat),o!==e&&o.destroy()}))().catch(o=>G.errorOnce(o))}static getImageDataURL(e,i){return R(this,void 0,void 0,function*(){const n=yield s.prepareResizedChart(e,i),{chart:o}=n,a=o.scene.canvas.getDataURL(i?.fileFormat);return n!==e&&n.destroy(),a})}static prepareResizedChart(e,i){var n;return R(this,void 0,void 0,function*(){const{chart:o}=e;let{width:a,height:r}=i??{};const l=o.width,c=o.height;if(void 0===a&&void 0===r||1===o.scene.canvas.pixelRatio&&l===a&&c===r)return e;a??(a=l),r??(r=c);const u=Object.assign(Object.assign({},o.userOptions),{container:document.createElement("div"),width:a,height:r,autoSize:!1,overrideDevicePixelRatio:1});zs()&&(null!==(n=u.animation)&&void 0!==n||(u.animation={}),u.animation.enabled=!1);const h=s.createOrUpdate(u);return yield h.chart.waitForUpdate(),h})}static createChartInstance(e,i,n){const o=n?.destroy({keepTransferableResources:!0});if(Mn(e))return new qc(i,o);if(ko(e))return new Kd(i,o);if(Oo(e))return new qd(i,o);throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}static updateDelta(e,i,n){var o;return R(this,void 0,void 0,function*(){null==i.type&&(i=Object.assign(Object.assign({},i),{type:null!==(o=e.processedOptions.type)&&void 0!==o?o:Ji(i)})),!e.destroyed&&(Bi("AgChartV2.updateDelta() - applying delta",i),function ny(s,t,e){var i,n,o,a;const r=Et([null!==(i=s.processedOptions)&&void 0!==i?i:{},t],rn),l=function sy(s,t){const e=o=>s instanceof qc&&o.chartTypes.includes("cartesian")||s instanceof qd&&o.chartTypes.includes("polar")||s instanceof Kd&&o.chartTypes.includes("hierarchy");let i=!1;const n=(o,a,r)=>{const l=$e.filter(c=>c.type===o);for(const c of l){const d=e(c)&&null!=t[c.optionsKey];d!==s.isModuleEnabled(c)&&(i=!0,d?a(c):r(c))}};return n("root",o=>s.addModule(o),o=>s.removeModule(o)),n("legend",o=>s.addLegendModule(o),o=>s.removeLegendModule(o)),i}(s,r),c=["type","data","series","listeners","theme","legend.listeners"];if(Mn(t)||Oo(t))c.push("axes");else if(!ko(t))throw new Error(`AG Charts - couldn't apply configuration, check type of options and chart: ${t.type}`);t.listeners&&Qd(s,t.listeners),br(s,t,{skip:c});let d=!1,u=!1;t.series&&t.series.length>0&&(u=function oy(s,t){const e=t.series;if(!e)return!1;const i=["type","direction","xKey","yKey","sizeKey","angleKey","stacked","stackGroup"];let n=s.series.length===e.length;for(let o=0;o<s.series.length&&n;o++)for(const a of i)n&&(n=s.series[o][a]===e[o][a]);return n?(s.series.forEach((o,a)=>{var r,l,c,d;const h=qe(null!==(c=null===(l=null===(r=s.processedOptions)||void 0===r?void 0:r.series)||void 0===l?void 0:l[a])&&void 0!==c?c:{},null!==(d=e[a])&&void 0!==d?d:{});h&&(Bi(`AgChartV2.applySeries() - applying series diff idx ${a}`,h),tu(o,h,{path:`series[${a}]`,index:a}),o.markNodeDataDirty())}),!1):(Bi("AgChartV2.applySeries() - creating new series instances"),s.series=function ry(s,t){var e;const i=[],n=s.getModuleContext();let o=0;for(const a of t??[]){const r=`series[${o++}]`,l=null!==(e=a.type)&&void 0!==e?e:"unknown";if(nd(l)&&!yg(l))continue;const c=rm(l,n);ly(c,a),tu(c,a,{path:r,index:o}),i.push(c)}return i}(s,e),!0)}(s,t),d=!0),"axes"in r&&Array.isArray(r.axes)&&function ay(s,t,e){const i=t.axes;if(!i)return!1;if(!e&&s.axes.length===i.length&&s.axes.every((o,a)=>o.type===i[a].type)){const o=s.processedOptions;if(Mn(o))return s.axes.forEach((a,r)=>{var l,c;const u=qe(null!==(c=null===(l=o.axes)||void 0===l?void 0:l[r])&&void 0!==c?c:{},i[r]);Bi(`AgChartV2.applyAxes() - applying axis diff idx ${r}`,u),br(a,u,{path:`axes[${r}]`,skip:["axes[].type"]})}),!0}return s.axes=function cy(s,t){const e=[],i=["axes[].type"],n=s.getModuleContext();let o=0;for(const a of t??[]){const r=gg(a.type,n),l=`axes[${o++}]`;dy(r,a),br(r,a,{path:l,skip:i}),e.push(r)}return e}(s,i),!0}(s,r,u)&&(d=!0);const h=t.series,f=!!t.data||h?.some(S=>null!=S.data),g=function Og(){return sd}(),m=Object.values(g).some(S=>null!=t[S]);d=d||f||m||null!=t.title&&null!=t.subtitle,t.data&&(s.data=t.data),!(null===(n=t.legend)||void 0===n)&&n.listeners&&Object.assign(s.legend.listeners,null!==(o=t.legend.listeners)&&void 0!==o?o:{}),t.listeners&&s.updateAllSeriesListeners(),s.processedOptions=r,s.userOptions=Et([null!==(a=s.userOptions)&&void 0!==a?a:{},e],rn);const A=d||l?$.PROCESS_DATA:$.PERFORM_LAYOUT;Bi("AgChartV2.applyChartOptions() - update type",$[A]),s.update(A,{forceNodeDataRefresh:d,newAnimationBatch:!0})}(e,i,n))})}}return s.initialised=!1,s})();function ly(s,t){const e=$e.filter(i=>"series-option"===i.type);for(const i of e)i.optionsKey in t&&i.seriesTypes.includes(s.type)&&s.getModuleMap().addModule(i)}function dy(s,t){let e=!1;const i=$e.filter(n=>"axis-option"===n.type);for(const n of i){const o=null!=t[n.optionsKey],a=s.getModuleMap();o!==a.isModuleEnabled(n)&&(e=!0,o?a.addModule(n):a.removeModule(n))}return e}function Qd(s,t){s.clearEventListeners();const e=Object.entries(t??{});for(const[i,n]of e)"function"==typeof n&&s.addEventListener(i,n)}function br(s,t,{skip:e,path:i}={}){return un(s,t,Object.assign(Object.assign(Object.assign({},oc()),{skip:e}),i?{path:i}:{}))}function tu(s,t,{path:e,index:i}={}){var n,o;const r=oc(),l=null!==(n=r.constructors)&&void 0!==n?n:{},c={constructors:Object.assign(Object.assign({},l),{title:"pie"===s.type?ic:l.title})},u=un(s,t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),c),{skip:["series[].type",...["series[].listeners","series[].seriesGrouping"]??[]]}),e?{path:e}:{}),{idx:i??-1}));null!=t?.listeners&&Qd(s,t.listeners);const{seriesGrouping:h}=t;return"seriesGrouping"in(t??{})&&(s.seriesGrouping=h?Object.freeze(Object.assign(Object.assign({},null!==(o=s.seriesGrouping)&&void 0!==o?o:{}),h)):h),u}Object.entries($d).reduce((s,[t,e])=>(s[t]=e(),s),{});let hy=(()=>{class s{constructor(e){this._initialised=!1,this.options={},this.onChartReady=new p.vpe,this._nativeElement=e.nativeElement}ngAfterViewInit(){const e=this.applyContainerIfNotSet(this.options);this.chart=ln.create(e),this._initialised=!0,this.chart.chart.waitForUpdate().then(()=>{this.onChartReady.emit(this.chart)})}ngOnChanges(e){!this._initialised||!this.chart||ln.update(this.chart,this.applyContainerIfNotSet(this.options))}ngOnDestroy(){this._initialised&&this.chart&&(this.chart.destroy(),this.chart=void 0,this._initialised=!1)}applyContainerIfNotSet(e){return e.container?e:{...e,container:this._nativeElement}}}return s.\u0275fac=function(e){return new(e||s)(p.Y36(p.SBq))},s.\u0275cmp=p.Xpm({type:s,selectors:[["ag-charts-angular"]],inputs:{options:"options"},outputs:{onChartReady:"onChartReady"},features:[p.TTD],decls:0,vars:0,template:function(e,i){},encapsulation:2}),s})(),py=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=p.oAB({type:s}),s.\u0275inj=p.cJS({}),s})();function fy(s,t){if(1&s&&(p.TgZ(0,"mat-option",3),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.Q6J("value",e),p.xp6(1),p.Oqu(e)}}let gy=(()=>{class s{constructor(e){this.adminService=e,this.availableYears=[2022,2023,2024],this.chartOptions={data:[],series:[{type:"line",xKey:"month",yKey:"count"}]}}ngOnInit(){this.selectedYear=(new Date).getFullYear(),this.fetchAndProcessUserData()}onSelectYear(){this.fetchAndProcessUserData()}fetchAndProcessUserData(){this.adminService.getUsers().subscribe(e=>{const i=this.filterUserDataByYear(e,Number(this.selectedYear)),n=this.processUserData(i);console.log(this.selectedYear),this.chartOptions.data=n,this.chartOptions={...this.chartOptions}})}filterUserDataByYear(e,i){return e.filter(n=>new Date(n.createdAt).getFullYear()===i)}processUserData(e){const i=this.initializeUserCountMap();return e.forEach(o=>{try{const a=this.getMonthFromDate(o.createdAt);i.set(a,(i.get(a)||0)+1)}catch(a){console.error("Error processing user:",o,a)}}),Array.from(i).map(([o,a])=>({month:o,count:a}))}initializeUserCountMap(){const i=new Map;return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].forEach(n=>{i.set(n,0)}),i}getMonthFromDate(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][new Date(e).getMonth()]}static#t=this.\u0275fac=function(i){return new(i||s)(p.Y36(Gi))};static#e=this.\u0275cmp=p.Xpm({type:s,selectors:[["app-usergraph"]],decls:11,vars:3,consts:[[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"options"],[3,"value"]],template:function(i,n){1&i&&(p.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),p._uU(3,"Select Year"),p.qZA()(),p.TgZ(4,"mat-card-content")(5,"mat-form-field")(6,"mat-label"),p._uU(7,"Year"),p.qZA(),p.TgZ(8,"mat-select",0),p.NdJ("ngModelChange",function(a){return n.selectedYear=a})("ngModelChange",function(){return n.onSelectYear()}),p.YNc(9,fy,2,2,"mat-option",1),p.qZA()(),p._UZ(10,"ag-charts-angular",2),p.qZA()()),2&i&&(p.xp6(8),p.Q6J("ngModel",n.selectedYear),p.xp6(1),p.Q6J("ngForOf",n.availableYears),p.xp6(1),p.Q6J("options",n.chartOptions))},dependencies:[ai.sg,kr.KE,kr.hX,yt.a8,yt.dn,yt.dk,yt.n5,Bu.gD,Gu.ey,se.JJ,se.On,hy],styles:["ag-charts-angular[_ngcontent-%COMP%]{width:100%;height:400px}"]})}return s})(),my=(()=>{class s{constructor(e){this.service=e,this.totalUsersCount=0,this.totalPostsCount=0}ngOnInit(){this.service.getUsers().subscribe(e=>{this.totalUsersCount=e.length}),this.service.getPosts().subscribe(e=>{this.totalPostsCount=e.length})}static#t=this.\u0275fac=function(i){return new(i||s)(p.Y36(Gi))};static#e=this.\u0275cmp=p.Xpm({type:s,selectors:[["app-admin-dashboard"]],decls:22,vars:2,consts:[[1,"container-fluid"],[2,"min-height","500px"],[1,"horizontal-cards","my-5"],[1,"card"]],template:function(i,n){1&i&&(p.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"h1"),p._uU(4,"Admin Dashboard"),p.qZA()(),p.TgZ(5,"mat-card-content",2)(6,"mat-card",3)(7,"mat-card-header")(8,"mat-card-title"),p._uU(9,"Total Users"),p.qZA()(),p.TgZ(10,"mat-card-content")(11,"h3"),p._uU(12),p.qZA()()(),p.TgZ(13,"mat-card",3)(14,"mat-card-header")(15,"mat-card-title"),p._uU(16,"Total Posts"),p.qZA()(),p.TgZ(17,"mat-card-content")(18,"h3"),p._uU(19),p.qZA()()()(),p.TgZ(20,"mat-card-content"),p._UZ(21,"app-usergraph"),p.qZA()()()),2&i&&(p.xp6(12),p.Oqu(n.totalUsersCount),p.xp6(7),p.Oqu(n.totalPostsCount))},dependencies:[yt.a8,yt.dn,yt.dk,yt.n5,gy],styles:[".horizontal-cards[_ngcontent-%COMP%]{display:flex;justify-content:space-between}mat-card[_ngcontent-%COMP%]{flex:1;margin-right:16px}.mat-card[_ngcontent-%COMP%]:last-child{margin-right:0}"]})}return s})();var xr=kt(7700);function by(s,t){if(1&s&&p._UZ(0,"img",5),2&s){const e=p.oxw();p.Q6J("src",e.data.post.image,p.LSH)}}function xy(s,t){if(1&s&&p._UZ(0,"img",5),2&s){const e=p.oxw();p.Q6J("src",e.data.report.reportedUser.profilePicture,p.LSH)}}function Sy(s,t){1&s&&(p.TgZ(0,"span",9),p._uU(1,"Active"),p.qZA())}function _y(s,t){1&s&&(p.TgZ(0,"span",10),p._uU(1,"Blocked"),p.qZA())}function Ay(s,t){if(1&s&&(p.TgZ(0,"div",6)(1,"p")(2,"strong"),p._uU(3,"Post Caption:"),p.qZA(),p._uU(4),p.qZA(),p.TgZ(5,"p")(6,"strong"),p._uU(7,"Likes Count:"),p.qZA(),p._uU(8),p.qZA(),p.TgZ(9,"p")(10,"strong"),p._uU(11,"Comments Count:"),p.qZA(),p._uU(12),p.qZA(),p.TgZ(13,"p")(14,"strong"),p._uU(15,"Owner Username:"),p.qZA(),p._uU(16),p.qZA(),p.TgZ(17,"p")(18,"strong"),p._uU(19,"Owner Full Name:"),p.qZA(),p._uU(20),p.qZA(),p.TgZ(21,"p")(22,"strong"),p._uU(23,"Post Date:"),p.qZA(),p._uU(24),p.ALo(25,"date"),p.qZA(),p.TgZ(26,"p")(27,"strong"),p._uU(28,"Post Status:"),p.qZA(),p.YNc(29,Sy,2,0,"span",7),p.qZA(),p.YNc(30,_y,2,0,"ng-template",null,8,p.W1O),p.qZA()),2&s){const e=p.MAs(31),i=p.oxw();p.xp6(4),p.hij(" ",i.data.post.caption,""),p.xp6(4),p.hij(" ",i.data.post.likes.length,""),p.xp6(4),p.hij(" ",i.data.post.comments.length,""),p.xp6(4),p.hij(" @",i.data.post.user.userName,""),p.xp6(4),p.hij(" ",i.data.post.user.fullName,""),p.xp6(4),p.hij(" ",p.xi3(25,8,i.data.post.createdAt,"medium"),""),p.xp6(5),p.Q6J("ngIf",i.data.post.isActive)("ngIfElse",e)}}function ky(s,t){1&s&&(p.TgZ(0,"span",9),p._uU(1,"Active"),p.qZA())}function Oy(s,t){1&s&&(p.TgZ(0,"span",10),p._uU(1,"Blocked"),p.qZA())}function Ey(s,t){if(1&s&&(p.TgZ(0,"div",6)(1,"p")(2,"strong"),p._uU(3,"User Name:"),p.qZA(),p._uU(4),p.qZA(),p.TgZ(5,"p")(6,"strong"),p._uU(7,"Full Name:"),p.qZA(),p._uU(8),p.qZA(),p.TgZ(9,"p")(10,"strong"),p._uU(11,"followers:"),p.qZA(),p._uU(12),p.qZA(),p.TgZ(13,"p")(14,"strong"),p._uU(15,"following:"),p.qZA(),p._uU(16),p.qZA(),p.TgZ(17,"p")(18,"strong"),p._uU(19,"User Status:"),p.qZA(),p.YNc(20,ky,2,0,"span",7),p.qZA(),p.YNc(21,Oy,2,0,"ng-template",null,8,p.W1O),p.qZA()),2&s){const e=p.MAs(22),i=p.oxw();p.xp6(4),p.hij(" ",i.data.report.reportedUser.username,""),p.xp6(4),p.hij(" ",i.data.report.reportedUser.fullName,""),p.xp6(4),p.hij(" ",i.data.report.reportedUser.followers.length,""),p.xp6(4),p.hij(" ",i.data.report.reportedUser.following.length,""),p.xp6(4),p.Q6J("ngIf",i.data.report.reportedUser.isActive)("ngIfElse",e)}}function Dy(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"button",13),p.NdJ("click",function(){p.CHM(e);const n=p.oxw(3);return p.KtG(n.block(n.data.post._id))}),p._uU(1,"Block"),p.qZA()}}function Ty(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"button",14),p.NdJ("click",function(){p.CHM(e);const n=p.oxw(3);return p.KtG(n.block(n.data.post._id))}),p._uU(1,"Unblock"),p.qZA()}}function Cy(s,t){if(1&s&&(p.TgZ(0,"div"),p.YNc(1,Dy,2,0,"button",11),p.YNc(2,Ty,2,0,"button",12),p.qZA()),2&s){const e=p.oxw(2);p.xp6(1),p.Q6J("ngIf",null==e.data.post?null:e.data.post.isActive),p.xp6(1),p.Q6J("ngIf",!(null!=e.data.post&&e.data.post.isActive))}}function Ny(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"button",13),p.NdJ("click",function(){p.CHM(e);const n=p.oxw(3);return p.KtG(n.blockUser(n.data.report._id))}),p._uU(1,"Block"),p.qZA()}}function wy(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"button",14),p.NdJ("click",function(){p.CHM(e);const n=p.oxw(3);return p.KtG(n.blockUser(n.data.report.reportedUser._id))}),p._uU(1,"Unblock"),p.qZA()}}function My(s,t){if(1&s&&(p.TgZ(0,"div"),p.YNc(1,Ny,2,0,"button",11),p.YNc(2,wy,2,0,"button",12),p.qZA()),2&s){const e=p.oxw(2);p.xp6(1),p.Q6J("ngIf",null==e.data.report.reportedUser?null:e.data.report.reportedUser.isActive),p.xp6(1),p.Q6J("ngIf",!(null!=e.data.report.reportedUser&&e.data.report.reportedUser.isActive))}}function Ry(s,t){if(1&s&&(p.TgZ(0,"div")(1,"h4")(2,"strong",10),p._uU(3,"Reported By:"),p.qZA(),p._uU(4),p.qZA(),p.TgZ(5,"h4")(6,"strong",10),p._uU(7,"Reason:"),p.qZA(),p._uU(8),p.qZA(),p.YNc(9,Cy,3,2,"div",4),p.YNc(10,My,3,2,"div",4),p.qZA()),2&s){const e=p.oxw();p.xp6(4),p.hij(" ",e.data.report.reportedBy.userName,""),p.xp6(4),p.hij(" ",e.data.report.text,""),p.xp6(1),p.Q6J("ngIf",e.data.post),p.xp6(1),p.Q6J("ngIf",!e.data.post)}}let Sr=(()=>{class s{constructor(e,i){this.data=e,this.service=i}block(e){this.service.changePostStatus(e).subscribe(()=>{this.data.post.isActive=!this.data.post.isActive})}blockUser(e){this.service.changeUserStatus(e).subscribe(()=>{this.data.report.reportedUser.isActive=!this.data.report.reportedUser.isActive})}static#t=this.\u0275fac=function(i){return new(i||s)(p.Y36(xr.WI),p.Y36(Gi))};static#e=this.\u0275cmp=p.Xpm({type:s,selectors:[["app-view-post"]],decls:12,vars:5,consts:[[1,"post-details"],[1,"post-image-container"],["alt","","class","post-image",3,"src",4,"ngIf"],["class","post-info",4,"ngIf"],[4,"ngIf"],["alt","",1,"post-image",3,"src"],[1,"post-info"],["class","text-success",4,"ngIf","ngIfElse"],["blockedStatus",""],[1,"text-success"],[1,"text-danger"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(i,n){1&i&&(p.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),p._uU(3,"Post Details"),p.qZA()(),p.TgZ(4,"mat-card-content")(5,"div",0)(6,"div",1),p.YNc(7,by,1,1,"img",2),p.YNc(8,xy,1,1,"img",2),p.qZA(),p.YNc(9,Ay,32,11,"div",3),p.YNc(10,Ey,23,6,"div",3),p.YNc(11,Ry,11,4,"div",4),p.qZA()()()),2&i&&(p.xp6(7),p.Q6J("ngIf",n.data.post),p.xp6(1),p.Q6J("ngIf",!n.data.post),p.xp6(1),p.Q6J("ngIf",n.data.post),p.xp6(1),p.Q6J("ngIf",!n.data.post),p.xp6(1),p.Q6J("ngIf",n.data.report))},dependencies:[ai.O5,yt.a8,yt.dn,yt.dk,yt.n5,ai.uU],styles:[".post-details[_ngcontent-%COMP%]{display:flex}.post-image-container[_ngcontent-%COMP%]{flex-shrink:0;margin-right:16px}.post-image[_ngcontent-%COMP%]{max-width:200px;max-height:200px;width:auto;height:auto}"]})}return s})();var Ly=kt(617);function Iy(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"User"),p.qZA())}function Py(s,t){if(1&s&&(p.TgZ(0,"td",14),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.user.userName)}}function Fy(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Caption"),p.qZA())}function By(s,t){if(1&s&&(p.TgZ(0,"td",14),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.caption)}}function Gy(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Image"),p.qZA())}function Yy(s,t){if(1&s&&p._UZ(0,"img",16),2&s){const e=p.oxw().$implicit;p.Q6J("src",e.image,p.LSH)}}function Uy(s,t){if(1&s&&(p.TgZ(0,"td",14),p.YNc(1,Yy,1,1,"img",15),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Q6J("ngIf",e.image)}}function jy(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Comments Count"),p.qZA())}function zy(s,t){if(1&s&&(p.TgZ(0,"td",14),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.comments.length)}}function Wy(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Likes Count"),p.qZA())}function Vy(s,t){if(1&s&&(p.TgZ(0,"td",14),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.likes.length)}}function Hy(s,t){1&s&&(p.TgZ(0,"th",13),p._uU(1,"Actions"),p.qZA())}function Xy(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"button",20),p.NdJ("click",function(){p.CHM(e);const n=p.oxw().$implicit,o=p.oxw();return p.KtG(o.toggleBlock(null==n?null:n._id))}),p._uU(1," Block "),p.qZA()}}function Ky(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"button",21),p.NdJ("click",function(){p.CHM(e);const n=p.oxw().$implicit,o=p.oxw();return p.KtG(o.toggleBlock(null==n?null:n._id))}),p._uU(1," Unblock "),p.qZA()}}function $y(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"td",14),p.YNc(1,Xy,2,0,"button",17),p.YNc(2,Ky,2,0,"button",18),p.TgZ(3,"button",19),p.NdJ("click",function(){const o=p.CHM(e).$implicit,a=p.oxw();return p.KtG(a.viewPost(o))}),p.TgZ(4,"mat-icon"),p._uU(5,"remove_red_eye"),p.qZA()()()}if(2&s){const e=t.$implicit;p.xp6(1),p.Q6J("ngIf",e.isActive),p.xp6(1),p.Q6J("ngIf",!e.isActive)}}function Zy(s,t){1&s&&p._UZ(0,"tr",22)}function qy(s,t){1&s&&p._UZ(0,"tr",23)}const Jy=function(){return[5,10,25,100]};function t0(s,t){1&s&&(p.TgZ(0,"th",14),p._uU(1,"Reported Content"),p.qZA())}function e0(s,t){if(1&s&&p._UZ(0,"img",18),2&s){const e=p.oxw(2).$implicit;p.Q6J("src",e.reportedPost.image,p.LSH)}}function i0(s,t){if(1&s&&(p.ynx(0),p.YNc(1,e0,1,1,"img",17),p.BQk()),2&s){const e=p.oxw().$implicit;p.xp6(1),p.Q6J("ngIf",e.reportedPost.image)}}function n0(s,t){if(1&s&&p._UZ(0,"img",20),2&s){const e=p.oxw(2).$implicit;p.Q6J("src",e.reportedBy.profilePicture,p.LSH)}}function s0(s,t){if(1&s&&p.YNc(0,n0,1,1,"img",19),2&s){const e=p.oxw().$implicit;p.Q6J("ngIf",e.reportedUser.profilePicture)}}function o0(s,t){if(1&s&&(p.TgZ(0,"td",15),p.YNc(1,i0,2,1,"ng-container",1),p.YNc(2,s0,1,1,"ng-template",null,16,p.W1O),p.qZA()),2&s){const e=t.$implicit,i=p.MAs(3);p.xp6(1),p.Q6J("ngIf","post"===e.type)("ngIfElse",i)}}function a0(s,t){1&s&&(p.TgZ(0,"th",14),p._uU(1,"Report Type"),p.qZA())}function r0(s,t){if(1&s&&(p.TgZ(0,"td",15),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.type)}}function l0(s,t){1&s&&(p.TgZ(0,"th",14),p._uU(1,"Report Details"),p.qZA())}function c0(s,t){if(1&s&&(p.TgZ(0,"td",15),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.text)}}function d0(s,t){1&s&&(p.TgZ(0,"th",14),p._uU(1,"Reported By"),p.qZA())}function u0(s,t){if(1&s&&(p.TgZ(0,"td",15),p._uU(1),p.qZA()),2&s){const e=t.$implicit;p.xp6(1),p.Oqu(e.reportedBy.userName)}}function h0(s,t){1&s&&(p.TgZ(0,"th",14),p._uU(1,"Actions"),p.qZA())}function p0(s,t){if(1&s){const e=p.EpF();p.TgZ(0,"td",15)(1,"button",21),p.NdJ("click",function(){const o=p.CHM(e).$implicit,a=p.oxw(2);return p.KtG(a.viewDetails(o))}),p._uU(2,"View"),p.qZA()()}}function f0(s,t){1&s&&p._UZ(0,"tr",22)}function g0(s,t){1&s&&p._UZ(0,"tr",23)}function m0(s,t){if(1&s&&(p.TgZ(0,"div")(1,"table",4),p.ynx(2,5),p.YNc(3,t0,2,0,"th",6),p.YNc(4,o0,4,2,"td",7),p.BQk(),p.ynx(5,8),p.YNc(6,a0,2,0,"th",6),p.YNc(7,r0,2,1,"td",7),p.BQk(),p.ynx(8,9),p.YNc(9,l0,2,0,"th",6),p.YNc(10,c0,2,1,"td",7),p.BQk(),p.ynx(11,10),p.YNc(12,d0,2,0,"th",6),p.YNc(13,u0,2,1,"td",7),p.BQk(),p.ynx(14,11),p.YNc(15,h0,2,0,"th",6),p.YNc(16,p0,3,0,"td",7),p.BQk(),p.YNc(17,f0,1,0,"tr",12),p.YNc(18,g0,1,0,"tr",13),p.qZA()()),2&s){const e=p.oxw();p.xp6(1),p.Q6J("dataSource",e.dataSource),p.xp6(16),p.Q6J("matHeaderRowDef",e.displayedColumns),p.xp6(1),p.Q6J("matRowDefColumns",e.displayedColumns)}}function y0(s,t){1&s&&(p.TgZ(0,"p"),p._uU(1,"No reports available."),p.qZA())}const v0=function(){return[5,10,25,100]};function b0(s,t){1&s&&p._UZ(0,"mat-paginator",24),2&s&&p.Q6J("pageSizeOptions",p.DdM(1,v0))}const x0=[{path:"",children:[{path:"login",component:xu,canActivate:[(s,t)=>{const e=localStorage.getItem("adminToken"),i=(0,p.f3M)(Xe.F0);return!e||(i.navigate(["admin/dashboard"]),!1)}]},{path:"",redirectTo:"login",pathMatch:"full"},{path:"",component:hu,canActivateChild:[(s,t)=>{const e=localStorage.getItem("adminToken"),i=(0,p.f3M)(Xe.F0);return!!e||(i.navigate(["admin/login"]),!1)}],children:[{path:"dashboard",component:my},{path:"users",component:Fu},{path:"posts",component:(()=>{class s{constructor(e,i){this.adminService=e,this.dialog=i,this.dataSource=new et.by,this.displayedColumns=["user","caption","image","commentsCount","likesCount","actions"]}ngOnInit(){this.adminService.getPosts().subscribe(e=>{this.dataSource.data=e,this.dataSource.paginator=this.paginator})}toggleBlock(e){this.adminService.changePostStatus(e).subscribe(()=>{const i=this.dataSource.data.findIndex(n=>n._id===e);-1!==i&&(this.dataSource.data[i].isActive=!this.dataSource.data[i].isActive,this.dataSource._updateChangeSubscription())},i=>{console.error("Error changing user status:",i)})}viewPost(e){this.dialog.open(Sr,{width:"49%",data:{post:e}})}static#t=this.\u0275fac=function(i){return new(i||s)(p.Y36(Gi),p.Y36(xr.uw))};static#e=this.\u0275cmp=p.Xpm({type:s,selectors:[["app-posts"]],viewQuery:function(i,n){if(1&i&&p.Gf(cn.NW,5),2&i){let o;p.iGM(o=p.CRH())&&(n.paginator=o.first)}},decls:28,vars:5,consts:[[2,"min-height","500px"],["matSort","","mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","user"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","caption"],["matColumnDef","image"],["matColumnDef","commentsCount"],["matColumnDef","likesCount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["alt","Post Image","style","max-width: 80px; max-height: 80px;",3,"src",4,"ngIf"],["alt","Post Image",2,"max-width","80px","max-height","80px",3,"src"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",1,"bg-light",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(p.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"h1"),p._uU(3,"Post Listing"),p.qZA()(),p.TgZ(4,"mat-card-content")(5,"table",1),p.ynx(6,2),p.YNc(7,Iy,2,0,"th",3),p.YNc(8,Py,2,1,"td",4),p.BQk(),p.ynx(9,5),p.YNc(10,Fy,2,0,"th",3),p.YNc(11,By,2,1,"td",4),p.BQk(),p.ynx(12,6),p.YNc(13,Gy,2,0,"th",3),p.YNc(14,Uy,2,1,"td",4),p.BQk(),p.ynx(15,7),p.YNc(16,jy,2,0,"th",3),p.YNc(17,zy,2,1,"td",4),p.BQk(),p.ynx(18,8),p.YNc(19,Wy,2,0,"th",3),p.YNc(20,Vy,2,1,"td",4),p.BQk(),p.ynx(21,9),p.YNc(22,Hy,2,0,"th",3),p.YNc(23,$y,6,2,"td",4),p.BQk(),p.YNc(24,Zy,1,0,"tr",10),p.YNc(25,qy,1,0,"tr",11),p.qZA()(),p.TgZ(26,"mat-card-footer"),p._UZ(27,"mat-paginator",12),p.qZA()()),2&i&&(p.xp6(5),p.Q6J("dataSource",n.dataSource),p.xp6(19),p.Q6J("matHeaderRowDef",n.displayedColumns),p.xp6(1),p.Q6J("matRowDefColumns",n.displayedColumns),p.xp6(2),p.Q6J("pageSizeOptions",p.DdM(4,Jy)))},dependencies:[ai.O5,Ly.Hw,Xn.lW,Xn.RK,yt.a8,yt.dn,yt.rt,yt.dk,et.BZ,et.fO,et.as,et.w1,et.Dz,et.nj,et.ge,et.ev,et.XQ,et.Gk,cn.NW]})}return s})()},{path:"reports",component:(()=>{class s{constructor(e,i){this.adminService=e,this.dialog=i,this.dataSource=new et.by,this.displayedColumns=["reportedContent","reportType","reportDetails","reportedBy","actions"]}ngOnInit(){this.adminService.getReports().subscribe(e=>{this.dataSource.paginator=this.paginator,console.log("reports",e),this.dataSource.data=e})}viewDetails(e){this.dialog.open(Sr,"post"===e.type?{width:"49%",data:{post:e.reportedPost,report:e}}:{width:"49%",data:{report:e}})}static#t=this.\u0275fac=function(i){return new(i||s)(p.Y36(Gi),p.Y36(xr.uw))};static#e=this.\u0275cmp=p.Xpm({type:s,selectors:[["app-reports"]],viewQuery:function(i,n){if(1&i&&p.Gf(cn.NW,5),2&i){let o;p.iGM(o=p.CRH())&&(n.paginator=o.first)}},decls:10,vars:3,consts:[[2,"min-height","500px","margin-top","80px"],[4,"ngIf","ngIfElse"],["noReports",""],["showFirstLastButtons","",3,"pageSizeOptions",4,"ngIf"],["matSort","","mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","reportedContent"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","reportType"],["matColumnDef","reportDetails"],["matColumnDef","reportedBy"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["userProfile",""],["alt","Post Image","style","max-width: 80px; max-height: 80px;",3,"src",4,"ngIf"],["alt","Post Image",2,"max-width","80px","max-height","80px",3,"src"],["alt","User Profile Picture","style","max-width: 80px; max-height: 80px;",3,"src",4,"ngIf"],["alt","User Profile Picture",2,"max-width","80px","max-height","80px",3,"src"],["mat-raised-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],["showFirstLastButtons","",3,"pageSizeOptions"]],template:function(i,n){if(1&i&&(p.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"h1"),p._uU(3,"Report Listing"),p.qZA()(),p.TgZ(4,"mat-card-content"),p.YNc(5,m0,19,3,"div",1),p.qZA(),p.YNc(6,y0,2,0,"ng-template",null,2,p.W1O),p.TgZ(8,"mat-card-footer"),p.YNc(9,b0,1,2,"mat-paginator",3),p.qZA()()),2&i){const o=p.MAs(7);p.xp6(5),p.Q6J("ngIf",n.dataSource&&n.dataSource.data.length>0)("ngIfElse",o),p.xp6(4),p.Q6J("ngIf",n.dataSource&&n.dataSource.data.length>5)}},dependencies:[ai.O5,Xn.lW,yt.a8,yt.dn,yt.rt,yt.dk,et.BZ,et.fO,et.as,et.w1,et.Dz,et.nj,et.ge,et.ev,et.XQ,et.Gk,cn.NW]})}return s})()}]}]}];let S0=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=p.oAB({type:s});static#i=this.\u0275inj=p.cJS({imports:[Xe.Bz.forChild(x0),Xe.Bz]})}return s})();var _0=kt(5252);let A0=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=p.oAB({type:s});static#i=this.\u0275inj=p.cJS({imports:[ai.ez,S0,_0.q,se.u5,se.UX,py]})}return s})()}}]);